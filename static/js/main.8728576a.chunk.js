(this["webpackJsonprif-identity-manager"]=this["webpackJsonprif-identity-manager"]||[]).push([[0],{303:function(e){e.exports=JSON.parse('{"a":"0.0.1"}')},310:function(e){e.exports=JSON.parse('{"ethrDid":"0xdca7ef03e98e0dc2b855be647c39abe984fcf21b","rpcUrl":"https://mainnet.infura.io/v3/8043bb2cf99347b1bfadfb233c5325c0","tokens":[],"dataVault":null}')},311:function(e){e.exports=JSON.parse('{"ethrDid":"0xdca7ef03e98e0dc2b855be647c39abe984fcf21b","rpcUrl":"https://did.rsk.co:4444","tokens":["0x2acc95758f8b5f583470ba265eb685a8f45fc9d5"],"dataVault":null}')},312:function(e){e.exports=JSON.parse('{"ethrDid":"0xdca7ef03e98e0dc2b855be647c39abe984fcf21b","rpcUrl":"https://did.testnet.rsk.co:4444","tokens":["0x19f64674d8a5b4e652319f5e239efd3bc969a1fe"],"dataVault":{"serviceDid":"did:ethr:rsk:testnet:0x285B30492a3F444d78f75261A35cB292Fc8F41A6","serviceUrl":"https://identity.staging.rifcomputing.net"}}')},313:function(e){e.exports=JSON.parse('{"ethrDid":"","rpcUrl":"http://127.0.0.1:7545","tokens":[],"dataVault":null}')},317:function(e){e.exports=JSON.parse('[{"constant":true,"inputs":[],"name":"symbol","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"name","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"decimals","outputs":[{"name":"","type":"uint8"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"internalType":"address","name":"account","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"}]')},325:function(e,n,t){},352:function(e,n){},391:function(e,n){},393:function(e,n){},402:function(e,n){},404:function(e,n){},429:function(e,n){},431:function(e,n){},432:function(e,n){},437:function(e,n){},439:function(e,n){},445:function(e,n){},447:function(e,n){},459:function(e,n){},471:function(e,n){},474:function(e,n){},484:function(e,n){},541:function(e,n){},544:function(e,n){},608:function(e,n){},628:function(e,n){},736:function(e,n,t){"use strict";t.r(n);var c=t(0),r=t(1),a=t.n(r),i=t(111),s=t.n(i),o=(t(325),t(303)),d=t(6),l=t(25),u=t(10),m=t(11);function j(){var e=Object(u.a)(["\n  border-radius: 5px;\n  padding: 10px 50px;\n  font-size: 18px;\n  border: none;\n  box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.1);\n  cursor: pointer;\n"]);return j=function(){return e},e}var b,h=m.a.button(j()),f=t.p+"static/media/rif-id-manager.7afc1cbb.svg",O=function(e){var n=e.handleLogin;return Object(c.jsx)("div",{className:"container login-screen",children:Object(c.jsxs)("div",{className:"column",children:[Object(c.jsx)("img",{src:f,alt:"RIF identity Manager"}),Object(c.jsx)("h1",{children:"Sign in"}),Object(c.jsx)(h,{className:"blue",onClick:n,children:"Connect your wallet"}),Object(c.jsxs)("p",{children:["Don't have a wallet? ",Object(c.jsx)("a",{href:"https://developers.rsk.co/wallet/use/",target:"_blank",rel:"noopener noreferrer",children:"Download here"})]})]})})},x=t(4),p=t(33),v=t.n(p),g=function(e){return new v.a(e).net_version()},y=function(e){return new v.a(e).accounts()},N=function(e){return Promise.all([y(e).then((function(e){return e[0]})),g(e).then((function(e){return parseInt(e)}))])},w=function(e,n,t){var c=new v.a(e),r=setInterval((function(){return c.getTransactionReceipt(n).then((function(e){if(e)return clearInterval(r),t({result:e.transactionHash,error:1!==parseInt(e.status)?"Transaction Recepit Failed":null})})).catch((function(e){return t({error:e.message})}))}),2e3)},C=t(308),k=t.n(C),D=t(309),A=t.n(D),I=t(310),S=t(311),T=t(312),V=t(313);!function(e){e.ETHR_DID_CONTRACT="ethrDid",e.RPC_URL="rpcUrl",e.TOKENS="tokens",e.DATAVAULT="dataVault"}(b||(b={}));var F=function(e,n){switch(e){case 1:return I[n];case 30:return S[n];case 31:return T[n];case 5777:return V[n];default:throw new Error("No setting for chainId ".concat(e))}},E=function(e){return F(e,b.ETHR_DID_CONTRACT)},K=function(e){return F(e,b.RPC_URL)},R=new k.a({cachedProvider:!1,providerOptions:{walletconnect:{package:A.a,options:{rpc:{1:K(1),30:K(30),31:K(31),5777:K(5777)}}}},supportedChains:[1,30,31,5777]}),L=t(38),P=Object(L.a)({name:"identity",initialState:{address:"",chainId:null},reducers:{changeAccount:function(e,n){var t=n.payload.address;e.address=t},changeChainId:function(e,n){var t=n.payload.chainId;e.chainId=t}}}),U=P.actions,B=U.changeAccount,J=U.changeChainId,M=P.reducer,z=t(113),H=Object(L.a)({name:"ethrdid",initialState:{didDocument:{"@context":"https://w3id.org/did/v1",id:"",publicKey:[],authentication:[]}},reducers:{resolveDid:function(e,n){var t=n.payload.data;e.didDocument=t}}}),_=H.actions.resolveDid,q=H.reducer,Y=t(315),Z=t(316),W=function(e,n,t){switch(n){case 1:return"did:".concat(t?"ethr:":"","mainnet:").concat(e);case 30:return"did:".concat(t?"ethr:":"","rsk:").concat(e);case 31:return"did:".concat(t?"ethr:":"","rsk:testnet:").concat(e);case 5777:return"did:".concat(t?"ethr:":"","development:").concat(e);default:return e}},G=function(e){if(-1===e.lastIndexOf(":"))return"".concat(e.slice(0,6),"...").concat(e.slice(e.length-4));var n=e.lastIndexOf(":");return"".concat(e.slice(0,n)).concat(e.slice(n,n+7),"...").concat(e.slice(e.length-4))},Q={networks:[{name:"mainnet",registry:E(1),rpcUrl:K(1)},{name:"rsk",registry:E(30),rpcUrl:K(30)},{name:"rsk:testnet",registry:E(31),rpcUrl:K(31)},{name:"development",registry:E(5777),rpcUrl:K(5777)}]},X=function(e){return function(n){return new Promise((function(t){N(e).then((function(e){var c=Object(x.a)(e,2),r=c[0],a=c[1],i=new Z.a(Object(Y.getResolver)(Q)),s=W(r,a,!0);i.resolve(s).then((function(e){return t(n(_({data:e})))}))}))}))}},$=t(169),ee=t.n($),ne=t(84),te=t.n(ne),ce=t(317),re={address:"",name:null,symbol:null,balance:0},ae=Object(L.a)({name:"tokens",initialState:{tokens:[]},reducers:{addTokenData:function(e,n){var t=n.payload.data,c=Object(d.a)(Object(d.a)({},t),{},{address:t.address.toLowerCase()});0===e.tokens.filter((function(e){return e.address===c.address})).length?e.tokens.push(Object(d.a)(Object(d.a)({},re),c)):e.tokens=e.tokens.map((function(e){return e.address===c.address?Object(d.a)(Object(d.a)({},e),c):e}))}}}),ie=ae.actions.addTokenData,se=ae.reducer,oe="id-manager-settings",de=function(e,n){var t=localStorage.getItem("".concat(oe,"-").concat(e));return t&&JSON.parse(t)[n]||null},le=function(e,n,t){return function(c){var r=function(e){return F(e,b.TOKENS)}(parseInt(n)),a=de(n,"TOKEN")?de(n,"TOKEN"):[],i=null===r||void 0===r?void 0:r.concat(a);Array.isArray(i)&&i.map((function(n){c(ue(e,n,t))}))}},ue=function(e,n,t,c){return function(r){var a=new v.a(e),i=new ee.a(a)(ce).at(n);a.getCode(n).then((function(e){if("0x0"===e)return c&&c(new Error("The address is not a contract"));i.symbol().then((function(e){return e[0]})).then((function(e){return r(ie({data:{address:n,symbol:e}}))})).catch((function(e){return console.log("symbol",e.message)})),i.name().then((function(e){return e[0]})).then((function(e){return r(ie({data:{address:n,name:e}}))})).catch((function(e){return console.log("name",e.message)})),i.decimals().then((function(e){return e[0]})).then((function(e){i.balanceOf(t).then((function(e){return e[0]})).then((function(n){return n.div(new te.a(10).pow(e)).toNumber()})).then((function(e){0!==e&&r(ie({data:{address:n,balance:e}})),c&&c(!0)})).catch((function(e){return console.log("balanceOf error",e)}))})).catch((function(){return c&&c(new Error("The address is a contract but not ERC20 or ERC721 token."))}))}))}},me=function(e,n,t,c){return function(r){return new Promise((function(a,i){r(ue(e,t,n,(function(e){return e instanceof Error?i(e):a(function(e,n,t){var c=localStorage.getItem("".concat(oe,"-").concat(e)),r=c?JSON.parse(c):{};r[n]||(r[n]=[]),r[n].push(t),localStorage.setItem("".concat(oe,"-").concat(e),JSON.stringify(r))}(c.toString(),"TOKEN",t))})))}))}},je=t(318),be=t.n(je),he={data:{},storage:void 0},fe=Object(L.a)({name:"datavault",initialState:he,reducers:{receiveKeyData:function(e,n){var t=n.payload,c=t.key,r=t.content;e.data[c]=r},addContentToKey:function(e,n){var t=n.payload,c=t.key,r=t.content;e.data[c]?e.data[c].push(r):e.data[c]=[r]},removeContentfromKey:function(e,n){var t=n.payload,c=t.key,r=t.id;e.data[c]=e.data[c].filter((function(e){return e.id!==r}))},swapContentById:function(e,n){var t=n.payload,c=t.key,r=t.id,a=t.content;e.data[c]=e.data[c].map((function(e){return e.id===r?Object(d.a)(Object(d.a)({},e),{},{content:a}):e}))},receiveStorageInformation:function(e,n){var t=n.payload.storage;e.storage=t}}}),Oe=fe.actions,xe=Oe.receiveKeyData,pe=Oe.addContentToKey,ve=Oe.removeContentfromKey,ge=Oe.swapContentById,ye=Oe.receiveStorageInformation,Ne=fe.reducer,we=function(e,n,t){var c=function(e){return F(e,b.DATAVAULT)}(t);return c?new be.a({serviceUrl:c.serviceUrl,serviceDid:c.serviceDid,did:W(n,t,!0),rpcPersonalSign:function(t){return e.request({method:"personal_sign",params:[n,t]})}}):null},Ce=function(e){return function(n){return R.connect().then((function(t){e.setProvider(t),N(t).then((function(c){var r=Object(x.a)(c,2),a=r[0],i=r[1];n(B({address:a})),n(J({chainId:parseInt(i)})),n(X(t)),n(le(t,i,a));var s,o,d=we(t,a,i);e.setDvClient(d),d&&n((s=d,o=W(a,i,!0),function(e){return s.getKeys().then((function(n){return n.forEach((function(n){return s.get({did:o,key:n}).then((function(e){return e})).then((function(t){return e(xe({key:n,content:t}))}))}))}))})),d&&n(function(e){return function(n){return e.getStorageInformation().then((function(e){return n(ye({storage:e}))}))}}(d))}))})).catch((function(e){return console.log("rLogin Error",e)}))}},ke=Object(l.b)(null,(function(e){return{handleLogin:function(n){return e(Ce(n))}}}),(function(e,n,t){return Object(d.a)(Object(d.a)(Object(d.a)(Object(d.a)({},e),n),t),{},{handleLogin:function(){return n.handleLogin(t.context)}})}))(O),De=t.p+"static/media/rif-id-manager-gray.d70174d8.svg";function Ae(){var e=Object(u.a)(['\n  position: relative;\n  margin-left: 8px;\n  padding-left: 3px;\n  &:before {\n    position: absolute;\n    right: 98%;\n    top: 45%;\n    transform: translate(-5px, -50%);\n    content: "";\n    display: block;\n    width: 10px;\n    height: 10px;\n    border-radius: 50%;\n    background: ',";\n  }\n"]);return Ae=function(){return e},e}function Ie(){var e=Object(u.a)(["\n  display: inline-block;\n  border: 1px solid #fff;\n  border-radius: 25px;\n  padding:6px 18px !important;\n  color: #6C6B6C;\n  opacity: 1 !important;\n  border: 1px solid #CCCACD;\n  width: auto;\n"]);return Ie=function(){return e},e}var Se=m.a.span(Ie()),Te=m.a.div(Ae(),(function(e){return e.connected?"#40d512":"#DC3545"})),Ve=function(e){switch(e){case 1:return"Ethereum";case 30:return"RSK Mainnet";case 31:return"RSK Testnet";default:return"Network Id ".concat(e.toString())}},Fe=function(e){var n=e.connected,t=e.name,r=e.chainId;return Object(c.jsx)(Se,{className:n?"connected":"disconnected",children:Object(c.jsx)(Te,{connected:n,children:r?Ve(r):t})})};function Ee(){var e=Object(u.a)(["\n  position: relative;\n  display: inline-block;\n  cursor: help;\n  margin-right: 20px;\n  &:hover + "," {\n    visibility: visible;\n    opacity: 1;\n  }\n"]);return Ee=function(){return e},e}function Ke(){var e=Object(u.a)(["\n  visibility: hidden;\n  position: absolute;\n  background-color: #555;\n  color: #fff;\n  text-align: center;\n  padding: 5px 10px;\n  border-radius: 6px;\n  z-index: 1;\n  opacity: 0;\n  transition: opacity .6s;\n  max-width: 250px;\n  word-break: break-all;\n"]);return Ke=function(){return e},e}var Re,Le=m.a.span(Ke()),Pe=m.a.span(Ee(),Le),Ue=function(e){var n=e.hoverContent,t=e.children,r=e.className;return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(Pe,{className:r,children:t}),Object(c.jsx)(Le,{className:"hover-content",children:n})]})},Be=function(e){var n=e.did,t=e.chainId;return Object(c.jsxs)("header",{className:"container",children:[Object(c.jsxs)("div",{className:"column branding",children:[Object(c.jsx)("div",{className:"logo",children:Object(c.jsx)("img",{src:De,alt:"RIF Id Manager"})}),n&&Object(c.jsx)("h1",{className:"persona",children:Object(c.jsx)(Ue,{hoverContent:n,children:G(n)})})]}),Object(c.jsx)("div",{className:"column network",children:t&&Object(c.jsx)(Fe,{connected:!0,chainId:t})})]})};!function(e){e.DASHBOARD="dashboard",e.DATAVAULT="datavault",e.IDENTITY="identity"}(Re||(Re={}));var Je=function(e){var n=e.selected,t=e.showDataVault,r=e.handleClick;return Object(c.jsx)("div",{className:"container",children:Object(c.jsx)("div",{className:"column",children:Object(c.jsxs)("ul",{className:"navigation",children:[Object(c.jsx)("li",{className:n===Re.DASHBOARD?"active":"",children:Object(c.jsx)("button",{onClick:function(){return r(Re.DASHBOARD)},children:"Dashboard"})}),t&&Object(c.jsx)("li",{className:n===Re.DATAVAULT?"active":"",children:Object(c.jsx)("button",{onClick:function(){return r(Re.DATAVAULT)},children:"Data Vault"})}),Object(c.jsx)("li",{className:n===Re.IDENTITY?"active":"",children:Object(c.jsx)("button",{onClick:function(){return r(Re.IDENTITY)},children:"Manage Identity"})}),Object(c.jsx)("li",{className:"disabled",children:"Request Credentials"}),Object(c.jsx)("li",{className:"disabled",children:"My Dapps"})]})})})};function Me(){var e=Object(u.a)(["\n  color: #47C4E1;\n  font-size: 15px;\n  margin: 50px auto;\n  width: 1em;\n  height: 1em;\n  border-radius: 50%;\n  position: relative;\n  text-indent: -9999em;\n  -webkit-animation: load4 1.3s infinite linear;\n  animation: load4 1.3s infinite linear;\n  -webkit-transform: translateZ(0);\n  -ms-transform: translateZ(0);\n  transform: translateZ(0);\n\n  @-webkit-keyframes load4 {\n    0%,\n    100% {\n      box-shadow: 0 -3em 0 0.2em, 2em -2em 0 0em, 3em 0 0 -1em, 2em 2em 0 -1em, 0 3em 0 -1em, -2em 2em 0 -1em, -3em 0 0 -1em, -2em -2em 0 0;\n    }\n    12.5% {\n      box-shadow: 0 -3em 0 0, 2em -2em 0 0.2em, 3em 0 0 0, 2em 2em 0 -1em, 0 3em 0 -1em, -2em 2em 0 -1em, -3em 0 0 -1em, -2em -2em 0 -1em;\n    }\n    25% {\n      box-shadow: 0 -3em 0 -0.5em, 2em -2em 0 0, 3em 0 0 0.2em, 2em 2em 0 0, 0 3em 0 -1em, -2em 2em 0 -1em, -3em 0 0 -1em, -2em -2em 0 -1em;\n    }\n    37.5% {\n      box-shadow: 0 -3em 0 -1em, 2em -2em 0 -1em, 3em 0em 0 0, 2em 2em 0 0.2em, 0 3em 0 0em, -2em 2em 0 -1em, -3em 0em 0 -1em, -2em -2em 0 -1em;\n    }\n    50% {\n      box-shadow: 0 -3em 0 -1em, 2em -2em 0 -1em, 3em 0 0 -1em, 2em 2em 0 0em, 0 3em 0 0.2em, -2em 2em 0 0, -3em 0em 0 -1em, -2em -2em 0 -1em;\n    }\n    62.5% {\n      box-shadow: 0 -3em 0 -1em, 2em -2em 0 -1em, 3em 0 0 -1em, 2em 2em 0 -1em, 0 3em 0 0, -2em 2em 0 0.2em, -3em 0 0 0, -2em -2em 0 -1em;\n    }\n    75% {\n      box-shadow: 0em -3em 0 -1em, 2em -2em 0 -1em, 3em 0em 0 -1em, 2em 2em 0 -1em, 0 3em 0 -1em, -2em 2em 0 0, -3em 0em 0 0.2em, -2em -2em 0 0;\n    }\n    87.5% {\n      box-shadow: 0em -3em 0 0, 2em -2em 0 -1em, 3em 0 0 -1em, 2em 2em 0 -1em, 0 3em 0 -1em, -2em 2em 0 0, -3em 0em 0 0, -2em -2em 0 0.2em;\n    }\n  }\n  @keyframes load4 {\n    0%,\n    100% {\n      box-shadow: 0 -3em 0 0.2em, 2em -2em 0 0em, 3em 0 0 -1em, 2em 2em 0 -1em, 0 3em 0 -1em, -2em 2em 0 -1em, -3em 0 0 -1em, -2em -2em 0 0;\n    }\n    12.5% {\n      box-shadow: 0 -3em 0 0, 2em -2em 0 0.2em, 3em 0 0 0, 2em 2em 0 -1em, 0 3em 0 -1em, -2em 2em 0 -1em, -3em 0 0 -1em, -2em -2em 0 -1em;\n    }\n    25% {\n      box-shadow: 0 -3em 0 -0.5em, 2em -2em 0 0, 3em 0 0 0.2em, 2em 2em 0 0, 0 3em 0 -1em, -2em 2em 0 -1em, -3em 0 0 -1em, -2em -2em 0 -1em;\n    }\n    37.5% {\n      box-shadow: 0 -3em 0 -1em, 2em -2em 0 -1em, 3em 0em 0 0, 2em 2em 0 0.2em, 0 3em 0 0em, -2em 2em 0 -1em, -3em 0em 0 -1em, -2em -2em 0 -1em;\n    }\n    50% {\n      box-shadow: 0 -3em 0 -1em, 2em -2em 0 -1em, 3em 0 0 -1em, 2em 2em 0 0em, 0 3em 0 0.2em, -2em 2em 0 0, -3em 0em 0 -1em, -2em -2em 0 -1em;\n    }\n    62.5% {\n      box-shadow: 0 -3em 0 -1em, 2em -2em 0 -1em, 3em 0 0 -1em, 2em 2em 0 -1em, 0 3em 0 0, -2em 2em 0 0.2em, -3em 0 0 0, -2em -2em 0 -1em;\n    }\n    75% {\n      box-shadow: 0em -3em 0 -1em, 2em -2em 0 -1em, 3em 0em 0 -1em, 2em 2em 0 -1em, 0 3em 0 -1em, -2em 2em 0 0, -3em 0em 0 0.2em, -2em -2em 0 0;\n    }\n    87.5% {\n      box-shadow: 0em -3em 0 0, 2em -2em 0 -1em, 3em 0 0 -1em, 2em 2em 0 -1em, 0 3em 0 -1em, -2em 2em 0 0, -3em 0em 0 0, -2em -2em 0 0.2em;\n    }\n  }\n"]);return Me=function(){return e},e}var ze=m.a.div(Me());function He(){var e=Object(u.a)(["\n  padding: 25px 50px;\n"]);return He=function(){return e},e}function _e(){var e=Object(u.a)(["\n  float: right;\n"]);return _e=function(){return e},e}function qe(){var e=Object(u.a)(["\n  display: inline-block;\n  font-weight: 600 !important;\n  font-size: 16px;\n  line-height: 19px;\n  color: #50555c;\n  margin: 0;\n  padding: 0;\n"]);return qe=function(){return e},e}function Ye(){var e=Object(u.a)(["\n  padding: 10px 25px 10px 25px;\n  border-bottom: 1px solid #F2F2F2;\n  margin: 0 0 15px 0;\n"]);return Ye=function(){return e},e}function Ze(){var e=Object(u.a)(["\n  background: #FFFFFF;\n  box-shadow: 0px 4px 20px rgba(145, 145, 145, 0.1);\n  border-radius: 20px;\n  padding: 10px 0;\n"]);return Ze=function(){return e},e}var We=m.a.div(Ze()),Ge=m.a.div(Ye()),Qe=m.a.p(qe()),Xe=m.a.div(_e()),$e=m.a.div(He()),en=function(e){var n=e.title,t=e.headerRight,r=e.children,a=e.className;return Object(c.jsxs)(We,{className:"panel ".concat(a),children:[n&&Object(c.jsxs)(Ge,{className:"panel-header",children:[Object(c.jsx)(Qe,{className:"panel-title",children:n}),t&&Object(c.jsx)(Xe,{className:"panel-right",children:t})]}),Object(c.jsx)($e,{className:"panel-content",children:r})]})},nn=function(e){var n=e.did;return n?Object(c.jsx)("div",{className:"container",children:Object(c.jsx)("div",{className:"column",children:Object(c.jsx)(en,{title:"Persona information",className:"identity-information",children:Object(c.jsx)("div",{className:"container",children:Object(c.jsxs)("div",{className:"column",children:[Object(c.jsx)("h2",{children:"Persona Address"}),Object(c.jsx)("p",{className:"value",children:Object(c.jsx)(Ue,{hoverContent:n,children:G(n)})})]})})})})}):Object(c.jsx)(ze,{})};function tn(){var e=Object(u.a)(["\n  background: #ffffff;\n  padding: 0 20px 15px 20px;\n"]);return tn=function(){return e},e}function cn(){var e=Object(u.a)(["\n  position: absolute;\n  top: 0;\n  right: 10px;\n  color: #C4C4C4;\n  font-size: 2em;\n  border: none;\n  background: none;\n  cursor: pointer;\n  font-weight: 300;\n  &:after {\n    content: '\\d7';\n  }\n"],["\n  position: absolute;\n  top: 0;\n  right: 10px;\n  color: #C4C4C4;\n  font-size: 2em;\n  border: none;\n  background: none;\n  cursor: pointer;\n  font-weight: 300;\n  &:after {\n    content: '\\\\d7';\n  }\n"]);return cn=function(){return e},e}function rn(){var e=Object(u.a)(["\n  background: #F2F2F2;\n  font-size: 16px;\n  padding: 15px 0\n"]);return rn=function(){return e},e}function an(){var e=Object(u.a)(["\n  position: relative;\n  width: 100%;\n  max-width: 500px;\n  background: #ffffff;\n  border-radius: 20px;\n  overflow: hidden;\n"]);return an=function(){return e},e}function sn(){var e=Object(u.a)(["\nfont-family: Rubik;\ntransition: opacity 0.1s ease-in-out;\ntext-align: center;\nposition: fixed;\nwidth: 100vw;\nheight: 100vh;\nmargin-left: -50vw;\ntop: 0;\nleft: 50%;\nz-index: 2;\nwill-change: opacity;\nbackground-color: rgba(0, 0, 0, 0.4);\nopacity: 1;\nvisibility: ",";\npointer-events: ",";\ndisplay: flex;\njustify-content: center;\nalign-items: center;\n\n& * {\n  box-sizing: border-box !important;\n}\n"]);return sn=function(){return e},e}var on=m.a.div(sn(),(function(e){return e.show?"visible":"hidden"}),(function(e){return e.show?"auto":"none"})),dn=m.a.div(an()),ln=m.a.div(rn()),un=m.a.button(cn()),mn=m.a.div(tn()),jn=function(e){var n=e.children,t=e.show,r=e.title,a=e.className,i=e.onClose;return t?Object(c.jsx)(on,{show:t,className:a,children:Object(c.jsxs)(dn,{children:[Object(c.jsxs)(ln,{className:"modal-title",children:[r,Object(c.jsx)(un,{className:"close",onClick:i})]}),Object(c.jsx)(mn,{className:"modal-content",children:n})]})}):Object(c.jsx)(c.Fragment,{})},bn=a.a.createContext({provider:null,dvClient:null}),hn=function(e){var n=e.children,t=Object(r.useState)(null),a=Object(x.a)(t,2),i=a[0],s=a[1],o=Object(r.useState)(null),d=Object(x.a)(o,2),l=d[0],u=d[1],m={provider:i,setProvider:function(e){return s(e)},dvClient:l,setDvClient:function(e){return u(e)}};return Object(c.jsx)(bn.Provider,{value:m,children:n})},fn=t(39),On=function(e){if(!e)return e;var n=parseFloat(e.toFixed(8));return n===e?e:Object(c.jsx)(Ue,{hoverContent:e,children:n})},xn=function(e){var n=e.token;return Object(c.jsxs)("div",{className:"token",children:[Object(c.jsx)("div",{className:"heading-symbol",children:n.name||"Custom token: ".concat(G(n.address))}),Object(c.jsxs)("div",{children:[Object(c.jsx)("span",{className:"balance",children:On(n.balance)}),Object(c.jsx)("span",{className:"symbol",children:n.symbol})]})]})},pn=function(e){var n=e.tokens,t=e.addCustomToken,a=Object(r.useState)(!1),i=Object(x.a)(a,2),s=i[0],o=i[1],d=Object(r.useState)(""),l=Object(x.a)(d,2),u=l[0],m=l[1],j=Object(r.useState)(!1),b=Object(x.a)(j,2),f=b[0],O=b[1],p=Object(r.useState)(null),v=Object(x.a)(p,2),g=v[0],y=v[1],N=Object(r.useContext)(bn),w=function(){o(!s),m("")};return Object(c.jsxs)(en,{title:"Identity Balance",className:"identity-balance",headerRight:Object(c.jsx)("button",{onClick:w,className:"circle-plus",children:"+"}),children:[null===n||void 0===n?void 0:n.map((function(e){return Object(c.jsx)(xn,{token:e},e.address)})),Object(c.jsxs)(jn,{show:s,title:"Add token",onClose:w,children:[Object(c.jsx)("p",{children:"Add an ERC20 or ERC721 token to the dashboard."}),Object(c.jsxs)("p",{children:[Object(c.jsx)("strong",{children:"Token to Add:"}),Object(c.jsx)("input",{type:"text",value:u,onChange:function(e){return m(e.target.value)},placeholder:"contract address",className:"line",disabled:f})]}),Object(c.jsx)(h,{onClick:function(){if(O(!0),y(null),!Object(fn.isValidAddress)(u))return O(!1),y("Not a valid address!");t(null===N||void 0===N?void 0:N.provider,u).then((function(){O(!1),o(!1)})).catch((function(e){O(!1),y(e.message)}))},className:"blue",disabled:f,children:"Add Token"}),g&&Object(c.jsx)("p",{children:g})]})]})},vn=t.p+"static/media/data-vault.c8c9253d.svg";function gn(){var e=Object(u.a)(["\n  display: block;\n  height: 100%;\n  border-top-right-radius: 4px;\n  border-bottom-right-radius: 4px;\n  border-top-left-radius: 8px;\n  border-bottom-left-radius: 8px;\n  background-color: #47C4E1;\n  box-shadow:\n    inset 0 2px 9px  rgba(255,255,255,0.3),\n    inset 0 -2px 6px rgba(0,0,0,0.4);\n  position: relative;\n  overflow: hidden;\n  }\n"]);return gn=function(){return e},e}function yn(){var e=Object(u.a)(["\n  height: 20px;\n  position: relative;\n  background: #EAEAEA;\n  -moz-border-radius: 25px;\n  -webkit-border-radius: 25px;\n  border-radius: 12.5px;\n  padding: 10px;\n  box-shadow: inset 0 -1px 1px rgba(255,255,255,0.3);\n"]);return yn=function(){return e},e}var Nn=m.a.div(yn()),wn=m.a.div(gn()),Cn=function(e){var n=e.total,t=e.value,r=t<n?Math.ceil(100*t/n):100;return Object(c.jsx)(Nn,{className:"progress-wrapper",children:Object(c.jsx)(wn,{className:"progress",style:{width:"".concat(r,"%")}})})},kn=function(e){var n=e.storage,t=e.handleButton;return n?Object(c.jsxs)(en,{title:Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("img",{src:vn,alt:"DataVault"})," DataVault Summary"]}),className:"dataVault",children:[Object(c.jsx)("h2",{children:"Storage Usage"}),Object(c.jsxs)("div",{className:"container",children:[Object(c.jsx)("div",{className:"columnDouble",children:Object(c.jsx)(Ue,{className:"tooltip-progress",hoverContent:Object(c.jsxs)("p",{children:[n.used," of ",(n.available+n.used).toLocaleString()," bytes"]}),children:Object(c.jsx)(Cn,{total:n.available+n.used,value:n.used})})}),Object(c.jsx)("div",{className:"column",children:Object(c.jsx)(h,{onClick:t,className:"turquoise panel-button",children:"DataVault"})})]})]}):Object(c.jsx)(c.Fragment,{})},Dn=function(e){var n=e.chainId,t=e.address,r=e.tokens,a=e.addCustomToken,i=e.changeScreen,s=e.storage;return Object(c.jsxs)("div",{className:"content dashboard",children:[Object(c.jsx)(nn,{did:t&&n?W(t,n):void 0}),Object(c.jsxs)("div",{className:"container",children:[Object(c.jsx)("div",{className:"column",children:Object(c.jsx)(pn,{tokens:r,addCustomToken:a})}),Object(c.jsx)("div",{className:"column",children:Object(c.jsx)(kn,{storage:s,handleButton:function(){return i(Re.DATAVAULT)}})})]})]})},An=Object(l.b)((function(e){return{address:e.identity.address,chainId:e.identity.chainId,tokens:e.tokens.tokens,storage:e.datavault.storage}}),(function(e){return{addCustomToken:function(n,t,c,r){return e(me(n,t,c,r))}}}),(function(e,n,t){return Object(d.a)(Object(d.a)(Object(d.a)(Object(d.a)({},e),n),t),{},{addCustomToken:function(t,c){return n.addCustomToken(t,e.address,c,e.chainId)}})}))(Dn),In=t.p+"static/media/declarative-details.0f849d72.svg",Sn=t.p+"static/media/trash.4ceb20aa.svg",Tn=t.p+"static/media/pencil.afa201a1.svg",Vn=function(e){var n=e.show,t=e.title,r=e.disabled,a=e.className,i=e.onConfirm,s=e.onClose,o=e.onDeny,d=e.strings;return Object(c.jsxs)(jn,{show:n,className:a,onClose:s,title:t||"Are you sure?",children:[Object(c.jsx)("p",{children:(null===d||void 0===d?void 0:d.text)||"Are you sure?"}),Object(c.jsxs)("div",{className:"container",children:[Object(c.jsx)("div",{className:"column",children:Object(c.jsx)(h,{onClick:o||s,className:"deny gray full",disabled:r||!1,children:(null===d||void 0===d?void 0:d.deny)||"Deny"})}),Object(c.jsx)("div",{className:"column",children:Object(c.jsx)(h,{onClick:i,className:"confirm gray full",disabled:r||!1,children:(null===d||void 0===d?void 0:d.confirm)||"Confirm"})})]})]})},Fn=function(e){var n=e.show,t=e.className,a=e.onConfirm,i=e.onClose,s=e.disabled,o=e.isLoading,l=e.error,u=e.initValue,m=e.inputType,j=e.strings,b=Object(r.useState)(""),f=Object(x.a)(b,2),O=f[0],p=f[1],v={onChange:function(e){return p(e.target.value)},disabled:s,className:"editable line",placeholder:null===j||void 0===j?void 0:j.placeholder,value:O||""};return Object(r.useEffect)((function(){p(u||"")}),[u]),Object(c.jsxs)(jn,{show:n,className:t,onClose:i,title:(null===j||void 0===j?void 0:j.title)||"Edit Value",children:[Object(c.jsx)("p",{className:"intro-text",children:null===j||void 0===j?void 0:j.intro}),Object(c.jsxs)("p",{children:[Object(c.jsx)("label",{children:(null===j||void 0===j?void 0:j.label)||"Value:"}),"textarea"===m?Object(c.jsx)("textarea",Object(d.a)({},v)):Object(c.jsx)("input",Object(d.a)({type:"text"},v))]}),Object(c.jsx)("p",{children:Object(c.jsx)(h,{onClick:function(){return a(O)},disabled:s,className:"submit",children:(null===j||void 0===j?void 0:j.submit)||"Submit"})}),o&&Object(c.jsx)(ze,{}),l&&Object(c.jsx)("div",{className:"error container",children:Object(c.jsx)("div",{className:"alert error",children:l})})]})},En=function(e){var n=e.details,t=e.deleteValue,a=e.swapValue,i=Object(r.useState)(!1),s=Object(x.a)(i,2),o=s[0],d=s[1],l=Object(r.useState)(null),u=Object(x.a)(l,2),m=u[0],j=u[1],b=Object(r.useState)(null),h=Object(x.a)(b,2),f=h[0],O=h[1],p=Object(r.useState)(null),v=Object(x.a)(p,2),g=v[0],y=v[1];return Object(c.jsxs)(en,{title:Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("img",{src:In})," Declarative Details"]}),className:"display",children:[Object(c.jsxs)("table",{children:[Object(c.jsx)("thead",{children:Object(c.jsxs)("tr",{children:[Object(c.jsx)("th",{className:"type",children:"Type"}),Object(c.jsx)("th",{className:"content",children:"Content"})]})}),Object(c.jsx)("tbody",{children:Object.keys(n).map((function(e){if(0!==n[e].length)return Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{children:e}),Object(c.jsx)("td",{children:n[e].map((function(n){return Object(c.jsxs)("div",{className:"content-row",children:[Object(c.jsx)("div",{className:"content",children:Object(c.jsx)("p",{children:n.content})}),Object(c.jsxs)("div",{className:"options",children:[Object(c.jsx)("button",{disabled:o,className:"icon edit",onClick:function(){j(null),y({key:e,item:n})},children:Object(c.jsx)("img",{src:Tn,alt:"Edit item"})}),Object(c.jsx)("button",{disabled:o,className:"icon delete",onClick:function(){return O({key:e,id:n.id})},children:Object(c.jsx)("img",{src:Sn,alt:"Delete Item"})})]})]},n.id)}))})]},e)}))})]}),Object(c.jsx)(Fn,{show:null!==g,onClose:function(){return y(null)},onConfirm:function(e){return g&&function(e,n){if(e===n.item.content)return j("New value is the same as the old.");d(!0),j(null),a(n.key,e,n.item.id).then((function(){d(!1),y(null)})).catch((function(e){return j(e.message)})).finally((function(){return d(!1)}))}(e,g)},disabled:o,strings:{title:"Edit value in the DataVault",label:"New value",submit:"Update"},className:"edit-modal",initValue:g?g.item.content:"",inputType:"textarea",error:m}),Object(c.jsx)(Vn,{show:null!==f,onClose:function(){return O(null)},onConfirm:function(){return f&&(e=f,d(!0),j(null),void t(e.key,e.id).then((function(){return O(null)})).catch((function(e){return j(e.message)})).finally((function(){return d(!1)})));var e},disabled:o,strings:{text:"Do you want to delete this item from the data vault?",confirm:"Yes",deny:"No"},className:"delete-modal"})]})},Kn=t.p+"static/media/upload.f7f9ea67.svg",Rn=function(e){var n=e.addDeclarativeDetail,t=Object(r.useState)(""),a=Object(x.a)(t,2),i=a[0],s=a[1],o=Object(r.useState)(""),d=Object(x.a)(o,2),l=d[0],u=d[1],m=Object(r.useState)(!1),j=Object(x.a)(m,2),b=j[0],f=j[1],O=Object(r.useState)(null),p=Object(x.a)(O,2),v=p[0],g=p[1],y=Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("img",{src:Kn})," Add New Declarative Details"]});return Object(c.jsxs)(en,{title:y,className:"add-declarative",children:[Object(c.jsxs)("div",{className:"container",children:[Object(c.jsxs)("div",{className:"column",children:[Object(c.jsx)("p",{className:"title",children:"Type"}),Object(c.jsx)("input",{type:"text",className:"line type",value:i,onChange:function(e){return s(e.target.value)},disabled:b,placeholder:"Content type"})]}),Object(c.jsxs)("div",{className:"columnDouble",children:[Object(c.jsx)("p",{className:"title",children:"Content"}),Object(c.jsx)("textarea",{className:"line content",value:l,onChange:function(e){return u(e.target.value)},disabled:b,placeholder:"Content"})]}),Object(c.jsx)("div",{className:"column submitColumn",children:Object(c.jsx)(h,{className:"submit turquoise",onClick:function(){if(f(!0),g(null),""===i||""===l)return f(!1),g("Type and Content cannot be empty.");n(i,l).then((function(){f(!1),u(""),s("")})).catch((function(e){f(!1),g(e.message)}))},disabled:b,children:"Add Data"})})]}),v&&Object(c.jsx)("div",{className:"error container",children:Object(c.jsx)("div",{className:"alert error",children:v})}),b&&Object(c.jsx)(ze,{})]})},Ln=function(e){var n=e.addDeclarativeDetail,t=e.declarativeDetails,a=e.deleteValue,i=e.swapValue,s=Object(r.useContext)(bn);return Object(c.jsxs)("div",{className:"content data-vault",children:[Object(c.jsx)("div",{className:"container",children:Object(c.jsx)("div",{className:"column",children:Object(c.jsx)(Rn,{addDeclarativeDetail:function(e,t){return s.dvClient&&n(s.dvClient,e,t)}})})}),Object(c.jsx)("div",{className:"container",children:Object(c.jsx)("div",{className:"column",children:Object(c.jsx)(En,{details:t,deleteValue:function(e,n){return s.dvClient&&a(s.dvClient,e,n)},swapValue:function(e,n,t){return s.dvClient&&i(s.dvClient,e,n,t)}})})})]})},Pn=Object(l.b)((function(e){return{declarativeDetails:e.datavault.data}}),(function(e){return{addDeclarativeDetail:function(n,t,c){return e(function(e,n,t){return function(c){return e.create({key:n,content:t}).then((function(e){return e.id})).then((function(e){return c(pe({key:n,content:{id:e,content:t}}))}))}}(n,t,c))},deleteValue:function(n,t,c){return e(function(e,n,t){return function(c){return e.delete({key:n,id:t}).then((function(){return c(ve({key:n,id:t}))}))}}(n,t,c))},swapValue:function(n,t,c,r){return e(function(e,n,t,c){return function(r){return e.swap({key:n,content:t,id:c}).then((function(){return r(ge({key:n,id:c,content:t}))}))}}(n,t,c,r))}}}))(Ln),Un=t.p+"static/media/delegate.618299c9.svg",Bn=function(e){var n=e.delegates,t=e.chainId,a=e.addDelegate,i=e.isOwner,s=Object(r.useState)(!1),o=Object(x.a)(s,2),d=o[0],l=o[1],u=Object(r.useState)(!1),m=Object(x.a)(u,2),j=m[0],b=m[1],h=Object(r.useState)(null),f=Object(x.a)(h,2),O=f[0],p=f[1],v=function(){p(null),b(!1)};return Object(c.jsxs)(en,{title:Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("img",{src:Un})," Delegate Identity"]}),headerRight:i&&Object(c.jsx)("button",{onClick:function(){return l(!0)},children:"Add Delegate"}),children:[Object(c.jsx)("h2",{children:"Delegates"}),Object(c.jsxs)("ul",{className:"value",children:[0===(null===n||void 0===n?void 0:n.length)&&Object(c.jsx)("li",{children:Object(c.jsx)("em",{children:"No delegates for this persona."})}),null===n||void 0===n?void 0:n.map((function(e){if(!e.ethereumAddress||!t)return Object(c.jsx)(c.Fragment,{});var n=W(e.ethereumAddress,t);return Object(c.jsx)("li",{children:Object(c.jsx)(Ue,{hoverContent:n,children:G(n)})},n)}))]}),Object(c.jsx)(Fn,{show:d,onClose:function(){j||(l(!1),v())},className:"delegate-identity",onConfirm:function(e){return v(),Object(fn.isValidAddress)(e)?e===e.toLowerCase()||Object(fn.isValidChecksumAddress)(e,t)?0!==(null===n||void 0===n?void 0:n.filter((function(n){var t;return-1!==(null===(t=n.ethereumAddress)||void 0===t?void 0:t.indexOf(e.toLowerCase()))})).length)?(v(),p("This address is already a delegate.")):(b(!0),void a(e).then((function(){l(!1),v()})).catch((function(e){v(),p(e.message)}))):(v(),p("Checksum is incorrect.")):(v(),p("Invalid Address"))},disabled:j,error:O,initValue:"",isLoading:j,strings:{title:"Delegate Identity",intro:"Controllers can manage the identity but they are not the owners. Only the owners can transfer identities.",label:"Delegate to",submit:"Add delegate",placeholder:"Address"}})]})},Jn=t.p+"static/media/persona.f3d51fc5.svg",Mn=function(e){var n=e.owner,t=e.isOwner,a=e.chainId,i=e.changeOwner,s=Object(r.useState)(!1),o=Object(x.a)(s,2),d=o[0],l=o[1],u=Object(r.useState)(!1),m=Object(x.a)(u,2),j=m[0],b=m[1],h=Object(r.useState)(null),f=Object(x.a)(h,2),O=f[0],p=f[1],v=function(){p(null),b(!1)},g=n&&a&&W(n,a,!0);return Object(c.jsxs)(en,{title:Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("img",{src:Jn})," Persona owner"]}),headerRight:t&&Object(c.jsx)("button",{onClick:function(){return l(!0)},children:"Transfer"}),children:[Object(c.jsx)("h2",{children:"Owner"}),Object(c.jsx)("p",{className:"value",children:g&&Object(c.jsx)(Ue,{hoverContent:g,children:G(g)})}),Object(c.jsx)(Fn,{show:d,className:"change-owner",onConfirm:function(e){return v(),Object(fn.isValidAddress)(e)?e===e.toLowerCase()||Object(fn.isValidChecksumAddress)(e,a)?(b(!0),void i(e).then((function(){l(!1),v()})).catch((function(e){v(),p(e.message)}))):(v(),p("Checksum is incorrect.")):(v(),p("Invalid Address"))},onClose:function(){j||(l(!1),v())},disabled:j,isLoading:j,error:O,initValue:"",strings:{title:"Transfer Persona Owner",intro:"Be aware that once you transfer the identity, you will lose ownership and can no longer manage the identity.",label:"Transfer to",placeholder:"address",submit:"Transfer"}})]})},zn=t(61),Hn=t.p+"static/media/key.6bad30f3.svg",_n=function(e){var n=e.publicKeys,t=e.addKey,a=e.isOwner,i=Object(r.useState)(!1),s=Object(x.a)(i,2),o=s[0],l=s[1],u=Object(r.useState)(!1),m=Object(x.a)(u,2),j=m[0],b=m[1],f=Object(r.useState)(null),O=Object(x.a)(f,2),p=O[0],v=O[1],g={algorithm:"secp256k1",purpose:"veriKey",encoding:"hex",validity:"86400",value:""},y=Object(r.useState)(g),N=Object(x.a)(y,2),w=N[0],C=N[1],k=function(e){return{id:e,className:"line",onChange:function(e){return C(Object(d.a)(Object(d.a)({},w),{},Object(zn.a)({},e.target.id,e.target.value)))}}};return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsxs)(en,{title:Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("img",{src:Hn})," Public Keys"]}),headerRight:a&&Object(c.jsx)("button",{onClick:function(){return l(!0)},children:"Add Public Key"}),children:[Object(c.jsx)("h2",{children:"Public Keys"}),Object(c.jsxs)("ul",{children:[(!n||0===n.length)&&Object(c.jsx)("li",{children:Object(c.jsx)("em",{children:"No public keys"})}),null===n||void 0===n?void 0:n.map((function(e){return Object(c.jsxs)("li",{children:[Object(c.jsx)("strong",{children:e.type}),Object(c.jsx)("br",{})," ",e.publicKeyBase64||e.publicKeyHex]},e.id)}))]})]}),Object(c.jsx)(jn,{title:"Add Public Key",show:o,onClose:function(){return l(!1)},children:Object(c.jsxs)("fieldset",{children:[Object(c.jsxs)("p",{children:[Object(c.jsx)("label",{children:"Key Algorithm"}),Object(c.jsxs)("select",Object(d.a)(Object(d.a)({},k("algorithm")),{},{value:w.algorithm,children:[Object(c.jsx)("option",{value:"secp256k1",children:"secp256k1"}),Object(c.jsx)("option",{value:"rsa",children:"RSA"}),Object(c.jsx)("option",{value:"Ed25519",children:"Ed25519"})]}))]}),Object(c.jsxs)("p",{children:[Object(c.jsx)("label",{htmlFor:"purpose",children:"Key Purpose"}),Object(c.jsxs)("select",Object(d.a)(Object(d.a)({},k("purpose")),{},{value:w.purpose,children:[Object(c.jsx)("option",{value:"veriKey",children:"veriKey"}),Object(c.jsx)("option",{value:"sigAuth",children:"sigAuth"})]}))]}),Object(c.jsxs)("p",{children:[Object(c.jsx)("label",{htmlFor:"encoding",children:"Encoding"}),Object(c.jsxs)("select",Object(d.a)(Object(d.a)({},k("encoding")),{},{value:w.encoding,children:[Object(c.jsx)("option",{value:"hex",children:"hex"}),Object(c.jsx)("option",{value:"base64",children:"base64"})]}))]}),Object(c.jsxs)("p",{children:[Object(c.jsxs)("label",{htmlFor:"validity",children:["Validity ",Object(c.jsx)("span",{children:"(in seconds)"})]}),Object(c.jsx)("input",Object(d.a)(Object(d.a)({},k("validity")),{},{type:"text",value:w.validity}))]}),Object(c.jsxs)("p",{children:[Object(c.jsx)("label",{children:"Key"}),Object(c.jsx)("textarea",Object(d.a)({},k("value")))]}),Object(c.jsx)(h,{className:"submit",disabled:j,onClick:function(){if(""===w.value)return v("Value can not be empty");b(!0),v(null),t("did/pub/".concat(w.algorithm,"/").concat(w.purpose,"/").concat(w.encoding),w.value,parseInt(w.validity)).then((function(){b(!1),l(!1),C(g)})).catch((function(e){b(!1),v(e.message)}))},children:"Add Public Key"}),p&&Object(c.jsx)("div",{className:"alert error",children:p}),j&&Object(c.jsx)(ze,{})]})})]})},qn=t.p+"static/media/computer.de8f038b.svg",Yn=function(e){var n=e.endpoints,t=e.addEndpoint,a=e.isOwner,i=Object(r.useState)(!1),s=Object(x.a)(i,2),o=s[0],l=s[1],u=Object(r.useState)(!1),m=Object(x.a)(u,2),j=m[0],b=m[1],f=Object(r.useState)(null),O=Object(x.a)(f,2),p=O[0],v=O[1],g={name:"",url:"",validity:"86400"},y=Object(r.useState)(g),N=Object(x.a)(y,2),w=N[0],C=N[1],k=function(e){return{type:"text",className:"line",id:e,onChange:function(e){return C(Object(d.a)(Object(d.a)({},w),{},Object(zn.a)({},e.target.id,e.target.value)))},disabled:j,placeholder:e}};return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsxs)(en,{title:Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("img",{src:qn})," Service Endpoints"]}),headerRight:a&&Object(c.jsx)("button",{onClick:function(){return l(!0)},children:"Add Endpoint"}),children:[Object(c.jsx)("h2",{children:"Active Endpoints"}),Object(c.jsxs)("ul",{children:[(!n||0===(null===n||void 0===n?void 0:n.length))&&Object(c.jsx)("li",{children:Object(c.jsx)("em",{children:"No service endpoints setup."})}),null===n||void 0===n?void 0:n.map((function(e){return Object(c.jsxs)("li",{className:"endpoint",children:[Object(c.jsx)("strong",{children:e.type})," - ",e.serviceEndpoint]},e.id||e.type)}))]})]}),Object(c.jsxs)(jn,{show:o,title:"Add Service Endpoint",onClose:function(){return l(!1)},children:[Object(c.jsxs)("fieldset",{children:[Object(c.jsxs)("p",{children:[Object(c.jsx)("label",{htmlFor:"name",children:"Name"}),Object(c.jsx)("input",Object(d.a)(Object(d.a)({},k("name")),{},{value:w.name}))]}),Object(c.jsxs)("p",{children:[Object(c.jsx)("label",{htmlFor:"url",children:"URL"}),Object(c.jsx)("input",Object(d.a)(Object(d.a)({},k("url")),{},{value:w.url}))]}),Object(c.jsxs)("p",{children:[Object(c.jsxs)("label",{htmlFor:"validity",children:["Validity ",Object(c.jsx)("span",{children:"(in seconds)"})]}),Object(c.jsx)("input",Object(d.a)(Object(d.a)({},k("validity")),{},{value:w.validity}))]})]}),Object(c.jsx)(h,{className:"submit",disabled:j,onClick:function(){return b(!0),v(null),""===w.name||""===w.url?(b(!1),v("Name and URL are required fields.")):-1!==w.name.indexOf(" ")?(b(!1),v("Name should not contain spaces.")):void t("did/svc/".concat(w.name),w.url,parseInt(w.validity)).then((function(){b(!1),l(!1),C(g)})).catch((function(e){b(!1),v(e.message)}))},children:"Add Endpoint"}),p&&Object(c.jsx)("div",{className:"alert error",children:p}),j&&Object(c.jsx)(ze,{})]})]})},Zn=function(e){var n=e.owner,t=e.address,a=e.chainId,i=e.delegates,s=e.service,o=e.publicKeys,d=e.changeOwner,l=e.addDelegate,u=e.addAttribute,m=(null===t||void 0===t?void 0:t.toLowerCase())===(null===n||void 0===n?void 0:n.toLowerCase()),j=Object(r.useContext)(bn),b=function(e,n,t){return u(null===j||void 0===j?void 0:j.provider,e,n,t)};return Object(c.jsxs)("div",{className:"content identity",children:[Object(c.jsxs)("div",{className:"container",children:[Object(c.jsx)("div",{className:"column",children:Object(c.jsx)(Mn,{owner:n,chainId:a,isOwner:m,changeOwner:function(e){return d(null===j||void 0===j?void 0:j.provider,e)}})}),Object(c.jsx)("div",{className:"column",children:Object(c.jsx)(Bn,{delegates:i,chainId:a,addDelegate:function(e){return l(null===j||void 0===j?void 0:j.provider,e)},isOwner:m})})]}),Object(c.jsxs)("div",{className:"container",children:[Object(c.jsx)("div",{className:"column",children:Object(c.jsx)(_n,{publicKeys:o,addKey:b,isOwner:m})}),Object(c.jsx)("div",{className:"column",children:Object(c.jsx)(Yn,{endpoints:s,addEndpoint:b,isOwner:m})})]})]})},Wn=function(e){var n=e.publicKey.filter((function(e){return e.id.endsWith("#controller")}))[0];return"undefined"===typeof n?null:n.ethereumAddress},Gn=Object(l.b)((function(e){var n,t;return{address:e.identity.address,chainId:e.identity.chainId,owner:Wn(e.ethrdid.didDocument),delegates:null===(n=e.ethrdid.didDocument.publicKey)||void 0===n?void 0:n.filter((function(e){return!e.id.endsWith("controller")})),service:e.ethrdid.didDocument.service,publicKeys:null===(t=e.ethrdid.didDocument.publicKey)||void 0===t?void 0:t.filter((function(e){return e.publicKeyBase64||e.publicKeyHex}))}}),(function(e){return{changeOwner:function(n,t){return e(function(e,n){return function(t){return new Promise((function(c,r){var a=function(n){return n.error?r(n.error):c(t(X(e)))};N(e).then((function(t){var c=Object(x.a)(t,2),i=c[0],s=c[1];return new z.a({address:i,provider:e,registry:E(parseInt(s))}).changeOwner(n.toLowerCase()).then((function(n){return w(e,n,a)})).catch((function(e){return r(e)}))}))}))}}(n,t))},addDelegate:function(n,t){return e(function(e,n){return function(t){return new Promise((function(c,r){var a=function(n){return n.error?r(n.error):c(t(X(e)))};N(e).then((function(t){var c=Object(x.a)(t,2),i=c[0],s=c[1];return new z.a({address:i,provider:e,registry:E(parseInt(s))}).addDelegate(n,{delegateType:"0x73696741757468"}).then((function(n){return w(e,n,a)})).catch((function(e){return r(e)}))}))}))}}(n,t))},addAttribute:function(n,t,c,r){return e(function(e,n,t,c){return function(r){return new Promise((function(a,i){var s=function(n){return n.error?i(n.error):a(r(X(e)))};N(e).then((function(r){var a=Object(x.a)(r,2),o=a[0],d=a[1];return new z.a({address:o,provider:e,registry:E(parseInt(d))}).setAttribute(n,t,c).then((function(n){return w(e,n,s)})).catch((function(e){return i(e)}))}))}))}}(n,t,c,r))}}}))(Zn),Qn=function(e){var n=e.chainId,t=e.address,a=Object(r.useState)(Re.DASHBOARD),i=Object(x.a)(a,2),s=i[0],o=i[1],d=Object(r.useContext)(bn),l=function(e){return o(e)};return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(Be,{chainId:n,did:t}),Object(c.jsx)(Je,{selected:s,handleClick:l,showDataVault:!!d.dvClient}),s===Re.DASHBOARD&&Object(c.jsx)(An,{changeScreen:l}),s===Re.DATAVAULT&&Object(c.jsx)(Pn,{}),s===Re.IDENTITY&&Object(c.jsx)(Gn,{})]})},Xn=Object(l.b)((function(e){return{address:e.identity.address,chainId:e.identity.chainId}}))(Qn),$n=t.p+"static/media/powered-by-iov.a0397e40.svg",et=t.p+"static/media/powered-by-iov-gray.e25db553.svg",nt=function(e){var n=e.isLoggedIn,t=e.version;return Object(c.jsxs)("footer",{className:"app-footer",children:[Object(c.jsx)("img",{src:n?et:$n,alt:"Powered By IOV"}),Object(c.jsx)("p",{children:"Copyright \xa9 2020 IOV Labs. All rights reserved."}),Object(c.jsxs)("p",{children:["Version ",t]})]})},tt=function(){var e=Object(r.useContext)(bn),n=null===e||void 0===e?void 0:e.provider;return Object(c.jsxs)("div",{className:n?"app loggedin":"app login",children:[n?Object(c.jsx)(Xn,{}):Object(c.jsx)(ke,{context:e}),Object(c.jsx)(nt,{isLoggedIn:n,version:o.a})]})},ct=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,738)).then((function(n){var t=n.getCLS,c=n.getFID,r=n.getFCP,a=n.getLCP,i=n.getTTFB;t(e),c(e),r(e),a(e),i(e)}))},rt=t(17),at=t(85),it=t(319),st=[at.a,Object(it.createLogger)()],ot=Object(rt.c)({identity:M,ethrdid:q,tokens:se,datavault:Ne}),dt=function(e){return Object(rt.e)(ot,e,rt.a.apply(void 0,st))};s.a.render(Object(c.jsx)(a.a.StrictMode,{children:Object(c.jsx)(l.a,{store:dt(),children:Object(c.jsx)(hn,{children:Object(c.jsx)(tt,{})})})}),document.getElementById("root")),ct()}},[[736,1,2]]]);
//# sourceMappingURL=main.8728576a.chunk.js.map