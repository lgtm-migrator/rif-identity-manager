(this["webpackJsonprif-identity-manager"]=this["webpackJsonprif-identity-manager"]||[]).push([[0],{183:function(e){e.exports=JSON.parse('[{"constant":true,"inputs":[],"name":"symbol","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"name","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"decimals","outputs":[{"name":"","type":"uint8"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"internalType":"address","name":"account","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"}]')},184:function(e){e.exports=JSON.parse('{"issuerServerUrl":"http://localhost:5108","dataVaultUrl":"https://data-vault.identity.rifos.org"}')},320:function(e){e.exports=JSON.parse('{"a":"1.0.1"}')},328:function(e){e.exports=JSON.parse('{"dataVaultUrl":"https://data-vault.identity.rifos.org"}')},329:function(e){e.exports=JSON.parse('{"ethrDid":"0xdca7ef03e98e0dc2b855be647c39abe984fcf21b","rpcUrl":"https://mainnet.infura.io/v3/8043bb2cf99347b1bfadfb233c5325c0","balanceName":"ETH","coinGeckoIds":"ethereum"}')},330:function(e){e.exports=JSON.parse('{"ethrDid":"0xdca7ef03e98e0dc2b855be647c39abe984fcf21b","rpcUrl":"https://ropsten.infura.io/v3/8043bb2cf99347b1bfadfb233c5325c0","balanceName":"ETH","coinGeckoIds":"ethereum"}')},331:function(e){e.exports=JSON.parse('{"ethrDid":"0xdca7ef03e98e0dc2b855be647c39abe984fcf21b","rpcUrl":"https://did.rsk.co:4444","balanceName":"RBTC","coinGeckoIds":"bitcoin,rif-token"}')},332:function(e){e.exports=JSON.parse('{"ethrDid":"0xdca7ef03e98e0dc2b855be647c39abe984fcf21b","rpcUrl":"https://did.testnet.rsk.co:4444","balanceName":"TRBTC","coinGeckoIds":"rif-token,bitcoin"}')},333:function(e){e.exports=JSON.parse('{"ethrDid":"0xdca7ef03e98e0dc2b855be647c39abe984fcf21b","rpcUrl":"https://kovan.infura.io/v3/8043bb2cf99347b1bfadfb233c5325c0","balanceName":"KETH","coinGeckoIds":"ethereum"}')},334:function(e){e.exports=JSON.parse('{"ethrDid":"0xdca7ef03e98e0dc2b855be647c39abe984fcf21b","rpcUrl":"https://rinkeby.infura.io/v3/8043bb2cf99347b1bfadfb233c5325c0","balanceName":"ETH","coinGeckoIds":"ethereum"}')},335:function(e){e.exports=JSON.parse('{"ethrDid":"0xdca7ef03e98e0dc2b855be647c39abe984fcf21b","rpcUrl":"https://goerli.infura.io/v3/8043bb2cf99347b1bfadfb233c5325c0","balanceName":"G\xf6ETH","coinGeckoIds":"ethereum"}')},336:function(e){e.exports=JSON.parse('{"ethrDid":"","rpcUrl":"http://127.0.0.1:7545","balanceName":"RBTC","coinGeckoIds":null}')},351:function(e,t,n){},381:function(e,t){},427:function(e,t){},429:function(e,t){},438:function(e,t){},440:function(e,t){},465:function(e,t){},467:function(e,t){},468:function(e,t){},473:function(e,t){},475:function(e,t){},481:function(e,t){},483:function(e,t){},496:function(e,t){},508:function(e,t){},511:function(e,t){},580:function(e,t){},583:function(e,t){},654:function(e,t){},660:function(e,t){},673:function(e,t){},685:function(e,t){},799:function(e,t,n){"use strict";n.r(t);var c,a,r=n(1),i=n.n(r),s=n(115),o=n.n(s),l=(n(351),n(320)),d=n(4),u=n(20),j=n(15),b=n(16),m=b.a.button(c||(c=Object(j.a)(["\n  border-radius: 5px;\n  padding: 10px 50px;\n  font-size: 18px;\n  border: none;\n  box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.1);\n  cursor: pointer;\n"]))),h=n.p+"static/media/rif-id-manager.7afc1cbb.svg",O=n(0),f=function(e){var t=e.handleLogin;return Object(r.useEffect)((function(){localStorage.getItem("WEB3_CONNECT_CACHED_PROVIDER")&&t()}),[]),Object(O.jsx)("div",{className:"container login-screen",children:Object(O.jsxs)("div",{className:"column",children:[Object(O.jsx)("img",{src:h,alt:"RIF identity Manager"}),Object(O.jsx)("h1",{children:"Sign in"}),Object(O.jsx)(m,{className:"blue",onClick:t,children:"Connect your wallet"}),Object(O.jsxs)("p",{children:["Don't have a wallet? ",Object(O.jsx)("a",{href:"https://developers.rsk.co/wallet/use/",target:"_blank",rel:"noopener noreferrer",children:"Download here"})]})]})})},p=n(3),x=n(28),v=n.n(x),g=function(e){return new v.a(e).net_version()},y=function(e){return new v.a(e).accounts()},N=function(e){return Promise.all([y(e).then((function(e){return e[0]})),g(e).then((function(e){return parseInt(e)}))])},C=function(e,t,n){var c=new v.a(e),a=setInterval((function(){return c.getTransactionReceipt(t).then((function(e){if(e)return clearInterval(a),n({result:e.transactionHash,error:1!==parseInt(e.status)?"Transaction Recepit Failed":null})})).catch((function(e){return n({error:e.message})}))}),2e3)};!function(e){e.METAMASK="METAMASK",e.NIFTY="NIFTY",e.WALLET_CONNECT="WALLET_CONNECT"}(a||(a={}));var D,w=function(e){return e.isNiftyWallet?a.NIFTY:e.isMetaMask?a.METAMASK:e.wc?a.WALLET_CONNECT:void 0},k=n(325),E=n.n(k),S=n(326),I=n.n(S),A=n(327),T=n.n(A),F=n(328),R=n(329),P=n(330),V=n(331),_=n(332),L=n(333),K=n(334),B=n(335),M=n(336);!function(e){e.ETHR_DID_CONTRACT="ethrDid",e.RPC_URL="rpcUrl",e.BALANCE_NAME="balanceName",e.COIN_GECKO_IDS="coinGeckoIds"}(D||(D={}));var U,H,G,W,J,q,Y,z,Z,$,Q,X=function(e,t){switch(e){case 1:return R[t];case 3:return P[t];case 4:return K[t];case 5:return B[t];case 30:return V[t];case 31:return _[t];case 42:return L[t];default:return M[t]}},ee=function(e){return X(e,D.ETHR_DID_CONTRACT)},te=function(e){return X(e,D.RPC_URL)},ne=function(e){return X(e,D.BALANCE_NAME)},ce=new E.a({cacheProvider:!0,providerOptions:{walletconnect:{package:I.a,options:{rpc:{1:te(1),3:te(3),4:te(4),5:te(5),30:te(30),31:te(31),42:te(42),5777:te(5777)}}},portis:{package:T.a,options:{id:"26ef5a8d-0226-4e3d-ae69-05707c9a453a",network:{nodeUrl:te(31),chainId:31}}}},supportedChains:[1,3,4,5,30,31,42,5777]}),ae=n(44),re={address:"",chainId:null},ie=Object(ae.a)({name:"identity",initialState:re,reducers:{changeAccount:function(e,t){var n=t.payload.address;e.address=n},changeChainId:function(e,t){var n=t.payload.chainId;e.chainId=n},reset:function(e){return re}}}),se=ie.actions,oe=se.changeAccount,le=se.changeChainId,de=se.reset,ue=ie.reducer,je=n(120),be={didDocument:{"@context":"https://w3id.org/did/v1",id:"",publicKey:[],authentication:[]}},me=Object(ae.a)({name:"ethrdid",initialState:be,reducers:{resolveDid:function(e,t){var n=t.payload.data;e.didDocument=n},reset:function(e){return be}}}),he=me.actions,Oe=he.resolveDid,fe=he.reset,pe=me.reducer,xe=n(338),ve=n(339),ge=function(e,t){switch(t){case 1:return"did:ethr:".concat(e);case 3:return"did:ethr:ropsten:".concat(e);case 4:return"did:ethr:rinkeby:".concat(e);case 5:return"did:ethr:goerli:".concat(e);case 30:return"did:ethr:rsk:".concat(e);case 31:return"did:ethr:rsk:testnet:".concat(e);case 42:return"did:ethr:kovan:".concat(e);case 5777:return"did:ethr:development:".concat(e);default:return e}},ye=function(e){if(-1===e.lastIndexOf(":"))return"".concat(e.slice(0,6),"...").concat(e.slice(e.length-4));var t=e.lastIndexOf(":");return"".concat(e.slice(0,t)).concat(e.slice(t,t+7),"...").concat(e.slice(e.length-4))},Ne=function(e,t){return{name:e,registry:ee(t),rpcUrl:te(t)}},Ce={networks:[Ne("mainnet",1),Ne("ropsten",3),Ne("rinkeby",4),Ne("goerli",5),Ne("rsk",30),Ne("rsk:testnet",31),Ne("kovan",31),Ne("development",5777)]},De=function(e){return function(t){return new Promise((function(n){N(e).then((function(e){var c=Object(p.a)(e,2),a=c[0],r=c[1],i=new ve.a(Object(xe.getResolver)(Ce)),s=ge(a,r);i.resolve(s).then((function(e){return n(t(Oe({data:e})))}))}))}))}},we=n(118),ke=n.n(we),Ee=n(23),Se=n.n(Ee),Ie=n(183),Ae={address:"",name:null,symbol:null,balance:0,conversion:void 0},Te={tokens:[],balance:null,conversion:null},Fe=Object(ae.a)({name:"tokens",initialState:Te,reducers:{addTokenData:function(e,t){var n=t.payload.data,c=Object(d.a)(Object(d.a)({},n),{},{address:n.address.toLowerCase()});0===e.tokens.filter((function(e){return e.address===c.address})).length?e.tokens.push(Object(d.a)(Object(d.a)({},Ae),c)):e.tokens=e.tokens.map((function(e){return e.address===c.address?Object(d.a)(Object(d.a)({},e),c):e}))},receiveBalance:function(e,t){var n=t.payload.balance;e.balance=n},receiveConversionBalance:function(e,t){var n=t.payload.usd;e.conversion=n},reset:function(e){return Te}}}),Re=Fe.actions,Pe=Re.addTokenData,Ve=Re.receiveBalance,_e=Re.receiveConversionBalance,Le=Re.reset,Ke=Fe.reducer,Be=n(340),Me=n.n(Be),Ue=n(341),He=n.n(Ue),Ge=function(e,t){switch(e){case"ethereum":case"bitcoin":return"defaultBalance";case"rif-token":return 30===t?"0x2aCc95758f8b5F583470bA265Eb685a8f45fC9D5":"0x19f64674D8a5b4e652319F5e239EFd3bc969a1FE";default:return null}},We=function(e){switch(e){case 30:return He.a;case 31:return Me.a;default:return null}},Je="id-manager-settings",qe=function(e,t){var n=localStorage.getItem("".concat(Je,"-").concat(e));return n&&JSON.parse(n)[t]||null},Ye=n(89),ze=n.n(Ye),Ze=function(e,t,n){return function(c){var a=We(n);if(a){var r=new v.a(e),i=new ke.a(r),s=function(e){var n=a[e];n.erc20&&i(Ie).at(e).balanceOf(t).then((function(e){return e[0]})).then((function(e){return e.div(new Se.a(10).pow(new Se.a(n.decimals))).toNumber()})).then((function(t){0!==t&&c(Pe({data:{address:e,balance:t,name:n.name,symbol:n.symbol}}))})).catch((function(e){return console.log("balanceOf error",e)}))};for(var o in a)s(o)}}},$e=function(e,t,n,c){return function(a){var r=t.toLowerCase().trim(),i=new v.a(e),s=new ke.a(i)(Ie).at(r);i.getCode(r).then((function(e){if("0x0"===e)return c&&c(new Error("The address is not a contract"));s.symbol().then((function(e){return e[0]})).then((function(e){return a(Pe({data:{address:r,symbol:e}}))})).catch((function(e){return console.log("symbol",e.message)})),s.name().then((function(e){return e[0]})).then((function(e){return a(Pe({data:{address:r,name:e}}))})).catch((function(e){return console.log("name",e.message)})),s.decimals().then((function(e){return e[0]})).then((function(e){s.balanceOf(n).then((function(e){return e[0]})).then((function(t){return t.div(new Se.a(10).pow(e)).toNumber()})).then((function(e){0!==e&&a(Pe({data:{address:r,balance:e}})),c&&c(!0)})).catch((function(e){return console.log("balanceOf error",e)}))})).catch((function(){return c&&c(new Error("The address is a contract but not ERC20 or ERC721 token."))}))}))}},Qe=function(e,t,n,c){return function(a){return new Promise((function(r,i){a($e(e,n,t,(function(e){return e instanceof Error?i(e):r(function(e,t,n){var c=localStorage.getItem("".concat(Je,"-").concat(e)),a=c?JSON.parse(c):{};a[t]||(a[t]=[]),a[t].push(n),localStorage.setItem("".concat(Je,"-").concat(e),JSON.stringify(a))}(c.toString(),"TOKEN",n))})))}))}},Xe=function(e){return function(t){var n=function(e){return X(e,D.COIN_GECKO_IDS)}(e);n&&ze.a.get("https://api.coingecko.com/api/v3/simple/price?ids=".concat(n,"&vs_currencies=usd")).then((function(e){return e.data})).then((function(n){for(var c in n){var a=Ge(c,e);"defaultBalance"===a?t(_e(n[c])):a&&t(Pe({data:{address:a,conversion:n[c].usd}}))}}))}},et=n(10),tt=n.n(et),nt=n(342),ct=n(91),at=n.n(ct),rt={declarativeDetails:{},credentials:{},storage:void 0},it=function(e){return e.endsWith("Credential")?"credentials":"declarativeDetails"},st=Object(ae.a)({name:"datavault",initialState:rt,reducers:{receiveKeyData:function(e,t){var n=t.payload,c=n.key,a=n.content;e[it(c)][c]=a},addContentToKey:function(e,t){var n=t.payload,c=n.key,a=n.content,r=c.endsWith("Credential")?"credentials":"declarativeDetails";e[r][c]?e[r][c].push(a):e[r][c]=[a]},removeContentfromKey:function(e,t){var n=t.payload,c=n.key,a=n.id,r=it(c);e[r][c]=e[r][c].filter((function(e){return e.id!==a})),0===e[r][c].length&&delete e[r][c]},swapContentById:function(e,t){var n=t.payload,c=n.key,a=n.id,r=n.content;e.declarativeDetails[c]=e.declarativeDetails[c].map((function(e){return e.id===a?Object(d.a)(Object(d.a)({},e),{},{content:r}):e}))},receiveStorageInformation:function(e,t){var n=t.payload.storage;e.storage=n},receiveKeys:function(e,t){t.payload.keys.forEach((function(t){t.endsWith("Credential")?e.credentials[t]=[]:e.declarativeDetails[t]=[]}))},reset:function(e){return rt}}}),ot=st.actions,lt=ot.receiveKeyData,dt=ot.addContentToKey,ut=ot.removeContentfromKey,jt=ot.swapContentById,bt=ot.receiveStorageInformation,mt=ot.receiveKeys,ht=ot.reset,Ot=st.reducer,ft=function(){var e=Object(nt.a)(tt.a.mark((function e(t){return tt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(w(t)!==a.METAMASK){e.next=6;break}return e.next=3,ct.AsymmetricEncryptionManager.fromWeb3Provider(t);case 3:e.t0=e.sent,e.next=9;break;case 6:return e.next=8,ct.SignerEncryptionManager.fromWeb3Provider(t);case 8:e.t0=e.sent;case 9:return e.abrupt("return",e.t0);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),pt=function(e,t,n){var c=F.dataVaultUrl,a=ge(t,n).toLowerCase(),r=new ct.AuthManager({did:a,serviceUrl:c,personalSign:function(n){return e.request({method:"personal_sign",params:[n,t]})}});return ft(e).then((function(e){return new at.a({serviceUrl:c,authManager:r,encryptionManager:e})}))},xt=function(e,t){return function(n){return e.get({key:t}).then((function(e){return e})).then((function(e){return n(lt({key:t,content:e}))}))}},vt=function(e,t,n){return function(c){return e.create({key:t,content:n}).then((function(e){return e.id})).then((function(e){return c(dt({key:t,content:{id:e,content:n}}))}))}},gt=function(e,t,n){return function(c){return e.delete({key:t,id:n}).then((function(){return c(ut({key:t,id:n}))}))}},yt=function(e,t,n,c){return function(a){return e.swap({key:t,content:n,id:c}).then((function(){return a(jt({key:t,id:c,content:n}))}))}},Nt=function(e,t,n,c){return function(r){pt(e,t,n).then((function(t){return t.getStorageInformation().then((function(n){r(bt({storage:n})),w(e)===a.METAMASK?r(function(e){return function(t){return e.getKeys().then((function(e){return t(mt({keys:e}))}))}}(t)):r(function(e){return function(t){return e.getKeys().then((function(n){n.forEach((function(n){return t(xt(e,n))}))}))}}(t)),c(t)})).catch((function(e){return c(null,e)}))}))}},Ct=function(e){return function(t){return ce.connect().then((function(n){var c=n.provider,a=n.disconnect;e.setProvider(c),e.setDisconnect(a),N(c).then((function(n){var a=Object(p.a)(n,2),r=a[0],i=a[1];t(oe({address:r})),t(le({chainId:parseInt(i)})),t(De(c)),t(function(e,t,n){return function(c){c(Ze(e,n,t)),c(Xe(t)),(qe(t.toString(),"TOKEN")?qe(t.toString(),"TOKEN"):[]).map((function(t){c($e(e,t,n))}))}}(c,parseInt(i),r)),t(function(e,t){return function(n){return new v.a(e).getBalance(t).then((function(e){return parseInt(e.toString())})).then((function(e){return e/Math.pow(10,18)})).then((function(e){return n(Ve({balance:e}))}))}}(c,r));t(Nt(c,r,i,(function(t,n){return e.setDvClient(t)})))}))})).catch((function(e){return console.log("rLogin Error",e)}))}},Dt=function(){return function(e){e(ht()),e(Le()),e(fe()),e(de())}},wt=function(){return function(e){ce.clearCachedProvider(),localStorage.removeItem("RLOGIN_ACCESS_TOKEN"),localStorage.removeItem("RLOGIN_REFRESH_TOKEN"),localStorage.removeItem("WEB3_CONNECT_CACHED_PROVIDER"),localStorage.removeItem("walletconnect"),Object.keys(localStorage).map((function(e){(e.startsWith("DV_ACCESS_TOKEN")||e.startsWith("DV_REFRESH_TOKEN"))&&localStorage.removeItem(e)})),e(Dt())}},kt=Object(u.b)(null,(function(e){return{handleLogin:function(t){return e(Ct(t))}}}),(function(e,t,n){return Object(d.a)(Object(d.a)(Object(d.a)(Object(d.a)({},e),t),n),{},{handleLogin:function(){return t.handleLogin(n.context)}})}))(f),Et=n.p+"static/media/rif-id-manager-gray.d70174d8.svg",St=b.a.span(U||(U=Object(j.a)(["\n  display: inline-block;\n  border: 1px solid #fff;\n  border-radius: 25px;\n  padding:6px 18px !important;\n  color: #6C6B6C;\n  opacity: 1 !important;\n  border: 1px solid #CCCACD;\n  width: auto;\n"]))),It=b.a.div(H||(H=Object(j.a)(['\n  position: relative;\n  margin-left: 8px;\n  padding-left: 3px;\n  &:before {\n    position: absolute;\n    right: 98%;\n    top: 45%;\n    transform: translate(-5px, -50%);\n    content: "";\n    display: block;\n    width: 10px;\n    height: 10px;\n    border-radius: 50%;\n    background: ',";\n  }\n"])),(function(e){return e.connected?"#40d512":"#DC3545"})),At=function(e){switch(e){case 1:return"Ethereum";case 3:return"Ropsten Testnet";case 4:return"Rinkeby Testnet";case 5:return"G\xf6rli Testnet";case 30:return"RSK Mainnet";case 31:return"RSK Testnet";case 42:return"Kovan Testnet";default:return"Network Id ".concat(e.toString())}},Tt=function(e){var t=e.connected,n=e.name,c=e.chainId;return Object(O.jsx)(St,{className:t?"connected":"disconnected",children:Object(O.jsx)(It,{connected:t,children:c?At(c):n})})},Ft=b.a.span(G||(G=Object(j.a)(["\n  opacity: 0;\n  position: absolute;\n  background-color: #555;\n  color: #fff;\n  text-align: center;\n  padding: 5px 10px;\n  border-radius: 6px;\n  z-index: 1;\n  margin-top:25px;\n  top: 0px;\n  transition: opacity .6s;\n  display: block;\n  min-width: 250px;\n  word-break: break-all;\n"]))),Rt=b.a.span(W||(W=Object(j.a)(["\n  position: relative;\n  display: inline-block;\n  cursor: help;\n  margin-right: 20px;\n  &:hover {\n    "," {\n      visibility: visible;\n      opacity: 1;\n    }\n  }\n"])),Ft),Pt=function(e){var t=e.hoverContent,n=e.children,c=e.className;return Object(O.jsxs)(Rt,{className:c,children:[n,Object(O.jsx)(Ft,{className:"hover-content",children:t})]})},Vt=n(343),_t=n.n(Vt),Lt=function(e){var t=e.value,n=e.size,c={display:"inline-block",background:"#FFFFFF",border:"2px solid #919191",padding:"2px",margin:"0",height:"".concat(n||50,"px"),width:"".concat(n||50,"px"),borderRadius:"50%"};return Object(O.jsx)("img",{src:"data:image/svg+xml;base64,".concat(new _t.a(t,{format:"svg",background:[71,196,225,255],margin:".22",saturation:".8"}).toString()),alt:t,className:"user-icon",style:c})},Kt=n(43),Bt=b.a.div(J||(J=Object(j.a)(["\nfont-family: Rubik;\ntransition: opacity 0.1s ease-in-out;\ntext-align: center;\nposition: fixed;\nwidth: 100vw;\nheight: 100vh;\nmargin-left: -50vw;\ntop: 0;\nleft: 50%;\nz-index: 2;\nwill-change: opacity;\nbackground-color: rgba(0, 0, 0, 0.4);\nopacity: 1;\nvisibility: ",";\npointer-events: ",";\ndisplay: flex;\njustify-content: center;\nalign-items: center;\n\n& * {\n  box-sizing: border-box !important;\n}\n"])),(function(e){return e.show?"visible":"hidden"}),(function(e){return e.show?"auto":"none"})),Mt=b.a.div(q||(q=Object(j.a)(["\n  position: relative;\n  width: 100%;\n  max-width: 500px;\n  background: #ffffff;\n  border-radius: 20px;\n  overflow: hidden;\n"]))),Ut=b.a.div(Y||(Y=Object(j.a)(["\n  background: #F2F2F2;\n  font-size: 16px;\n  padding: 15px 0\n"]))),Ht=b.a.button(z||(z=Object(j.a)(["\n  position: absolute;\n  top: 0;\n  right: 10px;\n  color: #C4C4C4;\n  font-size: 2em;\n  border: none;\n  background: none;\n  cursor: pointer;\n  font-weight: 300;\n  &:after {\n    content: '\\d7';\n  }\n"],["\n  position: absolute;\n  top: 0;\n  right: 10px;\n  color: #C4C4C4;\n  font-size: 2em;\n  border: none;\n  background: none;\n  cursor: pointer;\n  font-weight: 300;\n  &:after {\n    content: '\\\\d7';\n  }\n"]))),Gt=b.a.div(Z||(Z=Object(j.a)(["\n  background: #ffffff;\n  padding: 0 20px 15px 20px;\n"]))),Wt=function(e){var t=e.children,n=e.show,c=e.title,a=e.className,r=e.onClose;return n?Object(O.jsx)(Bt,{show:n,className:a,children:Object(O.jsxs)(Mt,{children:[Object(O.jsxs)(Ut,{className:"modal-title",children:[c,Object(O.jsx)(Ht,{className:"close",onClick:r})]}),Object(O.jsx)(Gt,{className:"modal-content",children:t})]})}):Object(O.jsx)(O.Fragment,{})},Jt=n.p+"static/media/persona.f3d51fc5.svg",qt=n.p+"static/media/pencil.afa201a1.svg",Yt=b.a.div($||($=Object(j.a)(["\n  color: #47C4E1;\n  font-size: 15px;\n  margin: 50px auto;\n  width: 1em;\n  height: 1em;\n  border-radius: 50%;\n  position: relative;\n  text-indent: -9999em;\n  -webkit-animation: load4 1.3s infinite linear;\n  animation: load4 1.3s infinite linear;\n  -webkit-transform: translateZ(0);\n  -ms-transform: translateZ(0);\n  transform: translateZ(0);\n\n  @-webkit-keyframes load4 {\n    0%,\n    100% {\n      box-shadow: 0 -3em 0 0.2em, 2em -2em 0 0em, 3em 0 0 -1em, 2em 2em 0 -1em, 0 3em 0 -1em, -2em 2em 0 -1em, -3em 0 0 -1em, -2em -2em 0 0;\n    }\n    12.5% {\n      box-shadow: 0 -3em 0 0, 2em -2em 0 0.2em, 3em 0 0 0, 2em 2em 0 -1em, 0 3em 0 -1em, -2em 2em 0 -1em, -3em 0 0 -1em, -2em -2em 0 -1em;\n    }\n    25% {\n      box-shadow: 0 -3em 0 -0.5em, 2em -2em 0 0, 3em 0 0 0.2em, 2em 2em 0 0, 0 3em 0 -1em, -2em 2em 0 -1em, -3em 0 0 -1em, -2em -2em 0 -1em;\n    }\n    37.5% {\n      box-shadow: 0 -3em 0 -1em, 2em -2em 0 -1em, 3em 0em 0 0, 2em 2em 0 0.2em, 0 3em 0 0em, -2em 2em 0 -1em, -3em 0em 0 -1em, -2em -2em 0 -1em;\n    }\n    50% {\n      box-shadow: 0 -3em 0 -1em, 2em -2em 0 -1em, 3em 0 0 -1em, 2em 2em 0 0em, 0 3em 0 0.2em, -2em 2em 0 0, -3em 0em 0 -1em, -2em -2em 0 -1em;\n    }\n    62.5% {\n      box-shadow: 0 -3em 0 -1em, 2em -2em 0 -1em, 3em 0 0 -1em, 2em 2em 0 -1em, 0 3em 0 0, -2em 2em 0 0.2em, -3em 0 0 0, -2em -2em 0 -1em;\n    }\n    75% {\n      box-shadow: 0em -3em 0 -1em, 2em -2em 0 -1em, 3em 0em 0 -1em, 2em 2em 0 -1em, 0 3em 0 -1em, -2em 2em 0 0, -3em 0em 0 0.2em, -2em -2em 0 0;\n    }\n    87.5% {\n      box-shadow: 0em -3em 0 0, 2em -2em 0 -1em, 3em 0 0 -1em, 2em 2em 0 -1em, 0 3em 0 -1em, -2em 2em 0 0, -3em 0em 0 0, -2em -2em 0 0.2em;\n    }\n  }\n  @keyframes load4 {\n    0%,\n    100% {\n      box-shadow: 0 -3em 0 0.2em, 2em -2em 0 0em, 3em 0 0 -1em, 2em 2em 0 -1em, 0 3em 0 -1em, -2em 2em 0 -1em, -3em 0 0 -1em, -2em -2em 0 0;\n    }\n    12.5% {\n      box-shadow: 0 -3em 0 0, 2em -2em 0 0.2em, 3em 0 0 0, 2em 2em 0 -1em, 0 3em 0 -1em, -2em 2em 0 -1em, -3em 0 0 -1em, -2em -2em 0 -1em;\n    }\n    25% {\n      box-shadow: 0 -3em 0 -0.5em, 2em -2em 0 0, 3em 0 0 0.2em, 2em 2em 0 0, 0 3em 0 -1em, -2em 2em 0 -1em, -3em 0 0 -1em, -2em -2em 0 -1em;\n    }\n    37.5% {\n      box-shadow: 0 -3em 0 -1em, 2em -2em 0 -1em, 3em 0em 0 0, 2em 2em 0 0.2em, 0 3em 0 0em, -2em 2em 0 -1em, -3em 0em 0 -1em, -2em -2em 0 -1em;\n    }\n    50% {\n      box-shadow: 0 -3em 0 -1em, 2em -2em 0 -1em, 3em 0 0 -1em, 2em 2em 0 0em, 0 3em 0 0.2em, -2em 2em 0 0, -3em 0em 0 -1em, -2em -2em 0 -1em;\n    }\n    62.5% {\n      box-shadow: 0 -3em 0 -1em, 2em -2em 0 -1em, 3em 0 0 -1em, 2em 2em 0 -1em, 0 3em 0 0, -2em 2em 0 0.2em, -3em 0 0 0, -2em -2em 0 -1em;\n    }\n    75% {\n      box-shadow: 0em -3em 0 -1em, 2em -2em 0 -1em, 3em 0em 0 -1em, 2em 2em 0 -1em, 0 3em 0 -1em, -2em 2em 0 0, -3em 0em 0 0.2em, -2em -2em 0 0;\n    }\n    87.5% {\n      box-shadow: 0em -3em 0 0, 2em -2em 0 -1em, 3em 0 0 -1em, 2em 2em 0 -1em, 0 3em 0 -1em, -2em 2em 0 0, -3em 0em 0 0, -2em -2em 0 0.2em;\n    }\n  }\n"]))),zt="ENCRYPTED",Zt=function(e){var t=e.did,n=e.initValue,c=e.updatePersona,a=e.decryptPersona;if(!t)return Object(O.jsx)(O.Fragment,{});var i=Object(r.useState)(!1),s=Object(p.a)(i,2),o=s[0],l=s[1],u=Object(r.useState)(!1),j=Object(p.a)(u,2),b=j[0],h=j[1],f=Object(r.useState)(null),x=Object(p.a)(f,2),v=x[0],g=x[1],y=Object(r.useState)({name:"",email:"",address:"",idnumber:"",phone:"",birthdate:""}),N=Object(p.a)(y,2),C=N[0],D=N[1],w=Object(r.useState)([]),k=Object(p.a)(w,2),E=k[0],S=k[1];Object(r.useEffect)((function(){var e=[];Object.keys(n).map((function(t){n[t][0].content===zt&&e.push(t)})),S(e),D({name:n.DD_NAME[0].content,email:n.DD_EMAIL[0].content,address:n.DD_ADDRESS[0].content,idnumber:n.DD_IDNUMBER[0].content,phone:n.DD_PHONE[0].content,birthdate:n.DD_BIRTHDATE[0].content}),0===e.length&&h(!1)}),[n]);var I=function(e){return D(Object(d.a)(Object(d.a)({},C),{},Object(Kt.a)({},e.target.id,e.target.value)))},A=function(e){return{placeholder:"Persona ".concat(e),id:e,type:"text",className:"line",onChange:I,disabled:b}};return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("button",{className:"edit icon",onClick:function(){g(null),h(!1),l(!0)},children:Object(O.jsx)("img",{src:qt,alt:"Edit Persona"})}),Object(O.jsxs)(Wt,{show:o,onClose:function(){return l(!1)},title:Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("img",{src:Jt,alt:"pesona"})," Edit persona"]}),className:"edit-personal-modal",children:[0!==E.length&&Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("h2",{children:"Your persona is encrypted"}),Object(O.jsx)("p",{children:"You first need to decrypt the following items. Click the button below and then decrypt them in your wallet."}),Object(O.jsx)("p",{children:E.map((function(e){return"".concat(e.replace("DD_",""),", ")}))}),Object(O.jsx)(m,{className:"blue decrypt",onClick:function(){h(!0),a(E)},disabled:b,children:"Decrypt"}),b&&Object(O.jsx)(Yt,{})]}),0===E.length&&Object(O.jsxs)("div",{children:[Object(O.jsx)("h2",{children:"Edit Persona"}),ye(t),Object(O.jsx)("p",{children:"You can edit your personal that be saved in your data vault."}),Object(O.jsx)("p",{children:Object(O.jsxs)("label",{children:["Name: ",Object(O.jsx)("input",Object(d.a)({value:C.name},A("name")))]})}),Object(O.jsx)("p",{children:Object(O.jsxs)("label",{children:["Email: ",Object(O.jsx)("input",Object(d.a)({value:C.email},A("email")))]})}),Object(O.jsx)("p",{children:Object(O.jsxs)("label",{children:["Address: ",Object(O.jsx)("input",Object(d.a)({value:C.address},A("address")))]})}),Object(O.jsx)("p",{children:Object(O.jsxs)("label",{children:["Id Number: ",Object(O.jsx)("input",Object(d.a)({value:C.idnumber},A("idnumber")))]})}),Object(O.jsx)("p",{children:Object(O.jsxs)("label",{children:["Phone Number: ",Object(O.jsx)("input",Object(d.a)({value:C.phone},A("phone")))]})}),Object(O.jsx)("p",{children:Object(O.jsxs)("label",{children:["Birthdate: ",Object(O.jsx)("input",Object(d.a)({value:C.birthdate},A("birthdate")))]})}),Object(O.jsx)("p",{children:Object(O.jsx)(m,{className:"save blue",onClick:function(){h(!0),g(null);var e=function(e,t){return n[e][0].content!==t?[Object(d.a)(Object(d.a)({},n[e][0]),{},{content:t})]:[]},t={DD_NAME:e("DD_NAME",C.name),DD_EMAIL:e("DD_EMAIL",C.email),DD_ADDRESS:e("DD_ADDRESS",C.address),DD_IDNUMBER:e("DD_IDNUMBER",C.idnumber),DD_PHONE:e("DD_PHONE",C.phone),DD_BIRTHDATE:e("DD_BIRTHDATE",C.birthdate)};c(t).then((function(){h(!1),l(!1)})).catch((function(e){h(!1),g(e.message)}))},disabled:b,children:"Save"})}),v&&Object(O.jsx)("div",{className:"alert error",children:v}),b&&Object(O.jsx)(Yt,{})]})]})]})},$t=function(e){var t=e.did,n=e.chainId,c=e.persona,a=e.hasDataVault,r=e.updatePersona,i=e.decryptPersona;return Object(O.jsxs)("header",{className:"container",children:[Object(O.jsxs)("div",{className:"columnDouble branding",children:[Object(O.jsx)("div",{className:"logo",children:Object(O.jsx)("img",{src:Et,alt:"RIF Id Manager"})}),Object(O.jsx)("h1",{className:"persona",children:t&&Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(Lt,{value:t,size:40}),""!==c.DD_NAME[0].content&&c.DD_NAME[0].content!==zt?Object(O.jsx)("div",{children:c.DD_NAME[0].content}):Object(O.jsx)(Pt,{hoverContent:t,children:Object(O.jsx)("div",{children:ye(t)})})]})}),a&&Object(O.jsx)(Zt,{did:t,initValue:c,updatePersona:r,decryptPersona:i})]}),Object(O.jsx)("div",{className:"column network",children:n&&Object(O.jsx)(Tt,{connected:!0,chainId:n})})]})};!function(e){e.DASHBOARD="dashboard",e.DATAVAULT="datavault",e.IDENTITY="identity",e.DEFI="defi"}(Q||(Q={}));var Qt,Xt,en,tn,nn,cn,an,rn,sn=function(e){var t=e.selected,n=e.showDataVault,c=e.handleClick,a=e.logout;return Object(O.jsx)("div",{className:"container",children:Object(O.jsx)("div",{className:"column",children:Object(O.jsxs)("ul",{className:"navigation",children:[Object(O.jsx)("li",{className:t===Q.DASHBOARD?"dashboard active":"dashboard",children:Object(O.jsx)("button",{onClick:function(){return c(Q.DASHBOARD)},children:"Dashboard"})}),Object(O.jsx)("li",{className:t===Q.DEFI?"defi active":"defi",children:Object(O.jsx)("button",{onClick:function(){return c(Q.DEFI)},children:"DeFi Assets"})}),n&&Object(O.jsx)("li",{className:t===Q.DATAVAULT?"datavault active":"datavault",children:Object(O.jsx)("button",{onClick:function(){return c(Q.DATAVAULT)},children:"Data Vault"})}),Object(O.jsx)("li",{className:t===Q.IDENTITY?"active":"",children:Object(O.jsx)("button",{onClick:function(){return c(Q.IDENTITY)},children:"Manage Identity"})}),Object(O.jsx)("li",{className:"disabled",children:"My Dapps"}),Object(O.jsx)("li",{className:"logout",children:Object(O.jsx)("button",{onClick:a,children:"Logout"})})]})})})},on=n.p+"static/media/copy.713b200d.svg",ln=function(e){var t=e.value,n=Object(r.useState)(!1),c=Object(p.a)(n,2),a=c[0],i=c[1],s=Object(r.useRef)(null);return Object(O.jsxs)("span",{className:"copyButton",children:[Object(O.jsx)("button",{type:"button",onClick:function(){i(!0),s.current&&s.current.select(),document.execCommand("copy"),setTimeout((function(){i(!1)}),1e3)},className:"icon",children:Object(O.jsx)("img",{src:on,alt:"Copy text"})}),a&&Object(O.jsx)("span",{className:"response",children:"Copied to clipboard."}),Object(O.jsx)("input",{type:"text",className:"copyText",defaultValue:t,ref:s,style:{position:"absolute",left:"-10000px"}})]})},dn=b.a.div(Qt||(Qt=Object(j.a)(["\n  background: #FFFFFF;\n  box-shadow: 0px 4px 20px rgba(145, 145, 145, 0.1);\n  border-radius: 20px;\n  padding: 10px 0;\n"]))),un=b.a.div(Xt||(Xt=Object(j.a)(["\n  padding: 10px 25px 10px 25px;\n  border-bottom: 1px solid #F2F2F2;\n  margin: 0 0 15px 0;\n"]))),jn=b.a.p(en||(en=Object(j.a)(["\n  display: inline-block;\n  font-weight: 600 !important;\n  font-size: 16px;\n  line-height: 19px;\n  color: #50555c;\n  margin: 0;\n  padding: 0;\n"]))),bn=b.a.div(tn||(tn=Object(j.a)(["\n  float: right;\n"]))),mn=b.a.div(nn||(nn=Object(j.a)(["\n  padding: 25px 50px;\n"]))),hn=function(e){var t=e.title,n=e.headerRight,c=e.children,a=e.className;return Object(O.jsxs)(dn,{className:"panel ".concat(a),children:[t&&Object(O.jsxs)(un,{className:"panel-header",children:[Object(O.jsx)(jn,{className:"panel-title",children:t}),n&&Object(O.jsx)(bn,{className:"panel-right",children:n})]}),Object(O.jsx)(mn,{className:"panel-content",children:c})]})},On=function(e){var t=e.address,n=e.chainId,c=ge(t,n);return Object(O.jsx)("div",{className:"container",children:Object(O.jsx)("div",{className:"column",children:Object(O.jsx)(hn,{title:"Persona information",className:"identity-information",children:Object(O.jsxs)("div",{className:"container",children:[Object(O.jsxs)("div",{className:"column",children:[Object(O.jsx)("h2",{children:"Persona DID"}),Object(O.jsxs)("p",{className:"value",children:[Object(O.jsx)(Pt,{hoverContent:c,children:ye(c)}),Object(O.jsx)(ln,{value:c})]})]}),Object(O.jsxs)("div",{className:"column",children:[Object(O.jsx)("h2",{children:"Persona Address"}),Object(O.jsxs)("p",{className:"value",children:[t,Object(O.jsx)(ln,{value:t})]})]})]})})})})},fn=n.p+"static/media/data-vault.c8c9253d.svg",pn=b.a.div(cn||(cn=Object(j.a)(["\n  height: 20px;\n  position: relative;\n  background: #EAEAEA;\n  -moz-border-radius: 25px;\n  -webkit-border-radius: 25px;\n  border-radius: 12.5px;\n  padding: 10px;\n  box-shadow: inset 0 -1px 1px rgba(255,255,255,0.3);\n"]))),xn=b.a.div(an||(an=Object(j.a)(["\n  display: block;\n  height: 100%;\n  border-top-right-radius: 4px;\n  border-bottom-right-radius: 4px;\n  border-top-left-radius: 8px;\n  border-bottom-left-radius: 8px;\n  background-color: #47C4E1;\n  box-shadow:\n    inset 0 2px 9px  rgba(255,255,255,0.3),\n    inset 0 -2px 6px rgba(0,0,0,0.4);\n  position: relative;\n  overflow: hidden;\n  }\n"]))),vn=function(e){var t=e.total,n=e.value,c=n<t?Math.ceil(100*n/t):100;return Object(O.jsx)(pn,{className:"progress-wrapper",children:Object(O.jsx)(xn,{className:"progress",style:{width:"".concat(c,"%")}})})},gn=function(e){var t=e.storage,n=e.handleButton;return t?Object(O.jsxs)(hn,{title:Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("img",{src:fn,alt:"DataVault"})," DataVault Summary"]}),className:"dataVault",children:[Object(O.jsx)("h2",{children:"Storage Usage"}),Object(O.jsxs)("div",{className:"container",children:[Object(O.jsx)("div",{className:"columnDouble",children:Object(O.jsx)(Pt,{className:"tooltip-progress",hoverContent:Object(O.jsxs)("p",{children:[t.used," of ",(t.available+t.used).toLocaleString()," bytes"]}),children:Object(O.jsx)(vn,{total:t.available+t.used,value:t.used})})}),Object(O.jsx)("div",{className:"column",children:Object(O.jsx)("button",{className:"link",style:{marginTop:-10},onClick:n,children:"View your DataVault"})})]})]}):Object(O.jsx)(O.Fragment,{})},yn=function(e){var t=e.name,n=e.balance,c=e.symbol,a=e.className,r=e.conversion;return c?Object(O.jsxs)("div",{className:a?"balance-row ".concat(a):"balance-row",children:[Object(O.jsx)("h2",{children:t}),Object(O.jsxs)("div",{children:[Object(O.jsx)("span",{className:"balance",children:function(e){if(!e)return e;var t=parseFloat(e.toFixed(6));return t===e?e:t}(n)}),Object(O.jsx)("span",{className:"symbol",children:c}),r&&!!n&&Object(O.jsxs)("span",{className:"conversion",children:["$",Math.round(r*n*100)/100," USD"]})]})]}):Object(O.jsx)(O.Fragment,{})},Nn=function(e){var t=e.balance,n=e.chainId,c=e.featuredToken,a=e.converstion,r=e.handleButton;return null!==t&&n?Object(O.jsxs)(hn,{title:Object(O.jsx)(O.Fragment,{children:"DeFi Summary"}),className:"defi",children:[Object(O.jsx)("div",{className:"container balance",children:Object(O.jsxs)("div",{className:"columnDobule",children:[Object(O.jsx)(yn,{name:"Balance",balance:t,symbol:ne(n),conversion:a||void 0}),c&&Object(O.jsx)(yn,{name:c.name,balance:c.balance,symbol:c.symbol,conversion:c.conversion||void 0})]})}),Object(O.jsx)(m,{onClick:r,className:"turquoise",children:"More Defi"})]}):Object(O.jsx)(O.Fragment,{})},Cn=function(e){var t=e.chainId,n=e.address,c=e.storage,a=e.balance,r=e.featuredTokens,i=e.converstion,s=e.changeScreen;return Object(O.jsxs)("div",{className:"content dashboard",children:[n&&t&&Object(O.jsx)(On,{address:n,chainId:t}),Object(O.jsxs)("div",{className:"container",children:[Object(O.jsx)("div",{className:"column",children:Object(O.jsx)(Nn,{balance:a,converstion:i,chainId:t,featuredToken:r?r[0]:void 0,handleButton:function(){return s(Q.DEFI)}})}),Object(O.jsx)("div",{className:"column",children:Object(O.jsx)(gn,{storage:c,handleButton:function(){return s(Q.DATAVAULT)}})})]})]})},Dn=Object(u.b)((function(e){return{address:e.identity.address,chainId:e.identity.chainId,tokens:e.defi.tokens,balance:e.defi.balance,converstion:e.defi.conversion,featuredTokens:e.defi.tokens.filter((function(e){return"RIF"===e.symbol||"tRIF"===e.symbol})),storage:e.datavault.storage}}),(function(e){return{addCustomToken:function(t,n,c,a){return e(Qe(t,n,c,a))}}}),(function(e,t,n){return Object(d.a)(Object(d.a)(Object(d.a)({},e),t),n)}))(Cn),wn=n(119),kn=n.p+"static/media/declarative-details.0f849d72.svg",En=function(e){var t=e.show,n=e.className,c=e.onConfirm,a=e.onClose,i=e.disabled,s=e.isLoading,o=e.error,l=e.initValue,u=e.inputType,j=e.strings,b=Object(r.useState)(""),h=Object(p.a)(b,2),f=h[0],x=h[1],v={onChange:function(e){return x(e.target.value)},disabled:i,className:"editable line",placeholder:null===j||void 0===j?void 0:j.placeholder,value:f||""};return Object(r.useEffect)((function(){x(l||"")}),[l]),Object(O.jsxs)(Wt,{show:t,className:n,onClose:a,title:(null===j||void 0===j?void 0:j.title)||"Edit Value",children:[Object(O.jsx)("p",{className:"intro-text",children:null===j||void 0===j?void 0:j.intro}),Object(O.jsxs)("p",{children:[Object(O.jsx)("label",{children:(null===j||void 0===j?void 0:j.label)||"Value:"}),"textarea"===u?Object(O.jsx)("textarea",Object(d.a)({},v)):Object(O.jsx)("input",Object(d.a)({type:"text"},v))]}),Object(O.jsx)("p",{children:Object(O.jsx)(m,{onClick:function(){return c(f)},disabled:i,className:"submit",children:(null===j||void 0===j?void 0:j.submit)||"Submit"})}),s&&Object(O.jsx)(Yt,{}),o&&Object(O.jsx)("div",{className:"error container",children:Object(O.jsx)("div",{className:"alert error",children:o})})]})},Sn=n.p+"static/media/trash.4ceb20aa.svg",In=function(e){var t=e.show,n=e.title,c=e.disabled,a=e.className,r=e.error,i=e.onConfirm,s=e.onClose,o=e.onDeny,l=e.strings;return Object(O.jsxs)(Wt,{show:t,className:a,onClose:s,title:n||"Are you sure?",children:[Object(O.jsx)("p",{children:(null===l||void 0===l?void 0:l.text)||"Are you sure?"}),Object(O.jsxs)("div",{className:"container",children:[Object(O.jsx)("div",{className:"column",children:Object(O.jsx)(m,{onClick:o||s,className:"deny gray full",disabled:c||!1,children:(null===l||void 0===l?void 0:l.deny)||"Deny"})}),Object(O.jsx)("div",{className:"column",children:Object(O.jsx)(m,{onClick:i,className:"confirm gray full",disabled:c||!1,children:(null===l||void 0===l?void 0:l.confirm)||"Confirm"})})]}),r&&Object(O.jsx)("div",{className:"alert error",children:r})]})},An=function(e){var t=e.itemKey,n=e.item,c=e.deleteValue,a=Object(r.useState)(!1),i=Object(p.a)(a,2),s=i[0],o=i[1],l=Object(r.useState)(null),d=Object(p.a)(l,2),u=d[0],j=d[1],b=Object(r.useState)(!1),m=Object(p.a)(b,2),h=m[0],f=m[1];return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("button",{disabled:s,className:"icon delete",onClick:function(){return f(!0)},children:Object(O.jsx)("img",{src:Sn,alt:"Delete Item"})}),Object(O.jsx)(In,{show:h,onClose:function(){return f(!1)},onConfirm:function(){o(!0),j(null),c(t,n.id).then((function(){return f(!1)})).catch((function(e){return j(e.message)})).finally((function(){return o(!1)}))},disabled:s,strings:{text:"Do you want to delete this item from the data vault?",confirm:"Yes",deny:"No"},className:"delete-modal",error:u})]})},Tn=function(e){var t=e.handleGetContent,n=e.disabled;return Object(O.jsx)("div",{className:"decrypt",children:Object(O.jsx)(m,{className:"gray small",onClick:t,disabled:n,children:"Download"})})},Fn=function(e){var t=e.keyError;return Object(O.jsxs)("p",{className:"alert error",children:["This content is encrypted, and your wallet is unable to decrypt the key ",Object(O.jsx)("em",{children:t}),"."]})},Rn=function(e){var t=e.details,n=e.deleteValue,c=e.swapValue,a=e.getKeyContent,i=Object(r.useState)(!1),s=Object(p.a)(i,2),o=s[0],l=s[1],d=Object(r.useState)(null),u=Object(p.a)(d,2),j=u[0],b=u[1],m=Object(r.useState)(null),h=Object(p.a)(m,2),f=h[0],x=h[1],v=Object(r.useState)(null),g=Object(p.a)(v,2),y=g[0],N=g[1],C=Object(r.useState)([]),D=Object(p.a)(C,2),w=D[0],k=D[1];return Object(O.jsxs)(hn,{title:Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("img",{src:kn})," Declarative Details"]}),className:"display",children:[function(){if(0===Object.keys(t).length)return!1;var e=!1;for(var n in t)0===t[n].length&&(e=!0);return e}()&&Object(O.jsx)("p",{className:"intro",children:"Click on the download button to decrypt the content. Your wallet will request to decrypt each piece of content."}),f&&Object(O.jsx)(Fn,{keyError:f}),Object(O.jsxs)("table",{children:[Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{className:"type",children:"Type"}),Object(O.jsx)("th",{className:"content",children:"Content"})]})}),Object(O.jsx)("tbody",{children:Object.keys(t).map((function(e){return Object(O.jsxs)("tr",{children:[Object(O.jsx)("td",{children:e.replace("DD_","")}),Object(O.jsxs)("td",{children:[0===t[e].length&&Object(O.jsx)(Tn,{handleGetContent:function(){return function(e){x(null),k([].concat(Object(wn.a)(w),[e])),a(e).catch((function(){return x(e)})).finally((function(){k(w.filter((function(t){return t!==e})))}))}(e)},disabled:w.includes(e)}),t[e].map((function(t){return Object(O.jsxs)("div",{className:"content-row",children:[Object(O.jsx)("div",{className:"content break-all",children:Object(O.jsx)("p",{children:t.content})}),Object(O.jsxs)("div",{className:"options",children:[Object(O.jsx)("button",{disabled:o,className:"icon edit",onClick:function(){b(null),N({key:e,item:t})},children:Object(O.jsx)("img",{src:qt,alt:"Edit item"})}),Object(O.jsx)(An,{itemKey:e,item:t,deleteValue:n})]})]},t.id)}))]})]},e)}))})]}),Object(O.jsx)(En,{show:null!==y,onClose:function(){return N(null)},onConfirm:function(e){return y&&function(e,t){if(e===t.item.content)return b("New value is the same as the old.");l(!0),b(null),c(t.key,e,t.item.id).then((function(){l(!1),N(null)})).catch((function(e){return b(e.message)})).finally((function(){return l(!1)}))}(e,y)},disabled:o,strings:{title:"Edit value in the DataVault",label:"New value",submit:"Update"},className:"edit-modal",initValue:y?y.item.content:"",inputType:"textarea",error:j})]})},Pn=n.p+"static/media/upload.f7f9ea67.svg",Vn=function(e){var t=e.addDeclarativeDetail,n=Object(r.useState)(""),c=Object(p.a)(n,2),a=c[0],i=c[1],s=Object(r.useState)(""),o=Object(p.a)(s,2),l=o[0],d=o[1],u=Object(r.useState)(!1),j=Object(p.a)(u,2),b=j[0],h=j[1],f=Object(r.useState)(null),x=Object(p.a)(f,2),v=x[0],g=x[1],y=Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("img",{src:Pn})," Add New Declarative Details"]});return Object(O.jsxs)(hn,{title:y,className:"add-declarative",children:[Object(O.jsxs)("div",{className:"container",children:[Object(O.jsxs)("div",{className:"column",children:[Object(O.jsx)("p",{className:"title",children:"Type"}),Object(O.jsx)("input",{type:"text",className:"line type",value:a,onChange:function(e){return i(e.target.value)},disabled:b,placeholder:"Content type"})]}),Object(O.jsxs)("div",{className:"columnDouble",children:[Object(O.jsx)("p",{className:"title",children:"Content"}),Object(O.jsx)("textarea",{className:"line content",value:l,onChange:function(e){return d(e.target.value)},disabled:b,placeholder:"Content"})]}),Object(O.jsx)("div",{className:"column submitColumn",children:Object(O.jsx)(m,{className:"submit turquoise",onClick:function(){if(h(!0),g(null),""===a||""===l)return h(!1),g("Type and Content cannot be empty.");t("DD_".concat(a.toUpperCase()),l).then((function(){h(!1),d(""),i("")})).catch((function(e){h(!1),g(e.message)}))},disabled:b,children:"Add Data"})})]}),v&&Object(O.jsx)("div",{className:"alert error",children:Object(O.jsx)("p",{children:v})}),b&&Object(O.jsx)(Yt,{})]})},_n=i.a.createContext({provider:null,dvClient:null,reset:function(){}}),Ln=function(e){var t=e.children,n=Object(r.useState)(null),c=Object(p.a)(n,2),a=c[0],i=c[1],s=Object(r.useState)(null),o=Object(p.a)(s,2),l=o[0],d=o[1],u=Object(r.useState)(null),j=Object(p.a)(u,2),b=j[0],m=j[1],h={provider:a,setProvider:function(e){return i(e)},dvClient:l,setDvClient:function(e){return d(e)},setDisconnect:function(e){return m((function(){return e}))},reset:function(){i(null),d(null),b&&b().catch(console.log)}};return Object(O.jsx)(_n.Provider,{value:h,children:t})},Kn=function(e){e.address,e.chainId;var t=e.addVerifiedCredentials,n=e.requestVerification,c=e.verifyCode,a=Object(r.useState)("Email"),i=Object(p.a)(a,2),s=i[0],o=i[1],l=Object(r.useState)(""),d=Object(p.a)(l,2),u=d[0],j=d[1],b=Object(r.useState)(null),h=Object(p.a)(b,2),f=h[0],x=h[1],v=Object(r.useState)(!1),g=Object(p.a)(v,2),y=g[0],N=g[1],C=Object(r.useState)(null),D=Object(p.a)(C,2),w=D[0],k=D[1],E=Object(r.useState)(),S=Object(p.a)(E,2),I=S[0],A=S[1],T=function(e){return k(e?e.message:"Unhandled error")},F=function(){o("Email"),j(""),x(null),N(!1),k(null),A(null)};return Object(O.jsxs)(hn,{title:Object(O.jsx)(O.Fragment,{children:"Get a Credential"}),headerRight:Object(O.jsx)("button",{onClick:F,children:"Start Over"}),className:"add-credential",children:[!y&&Object(O.jsxs)("div",{className:"container",children:[Object(O.jsxs)("div",{className:"column",children:[Object(O.jsx)("p",{className:"title",children:"Type"}),Object(O.jsxs)("select",{id:"credentialType",value:s,onChange:function(e){return o(e.target.value)},disabled:y,children:[Object(O.jsx)("option",{value:"Email",children:"Email"}),Object(O.jsx)("option",{value:"Phone",children:"Phone"})]})]}),Object(O.jsxs)("div",{className:"columnDouble",children:[Object(O.jsx)("p",{className:"title",children:"Email"===s?Object(O.jsx)(O.Fragment,{children:"Email Address"}):Object(O.jsx)(O.Fragment,{children:"Phone Number"})}),Object(O.jsx)("input",{type:"text",id:"value",className:"line type fullWidth",onChange:function(e){return j(e.target.value)},disabled:y,value:u,placeholder:s})]}),Object(O.jsx)("div",{className:"column submitColumn",children:Object(O.jsx)(m,{className:"submit turquoise",onClick:function(){k(""),n(s,u).then((function(e){return 200===e.status?N(!0):k("The request could not be sent")})).catch(T)},disabled:y,children:"Send Code"})})]}),y&&!I&&Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("div",{className:"alert info",children:"A verification code has been sent."}),Object(O.jsxs)("div",{className:"container",children:[Object(O.jsxs)("div",{className:"column",children:[Object(O.jsx)("p",{className:"title",children:"Verification code"}),Object(O.jsx)("input",{type:"text",className:"line type fullWidth",onChange:function(e){return x(e.target.value)},disabled:!y,value:f||"",placeholder:"Enter code"})]}),Object(O.jsx)("div",{className:"column",children:Object(O.jsx)(m,{className:"submit turquoise",onClick:function(){k(""),f&&c(f,s).then((function(e){return 200===e.status?A(e.data.jwt):k("Credential could not be Issued")})).catch(T)},children:"Verify"})})]})]}),I&&Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("div",{className:"alert info",children:"A credential has been issued!"}),Object(O.jsx)("p",{children:"Here is the RAW version of the credential:"}),Object(O.jsx)("textarea",{className:"jwt",defaultValue:I}),Object(O.jsx)("p",{children:Object(O.jsx)("a",{href:"https://verifier.identity.rifos.org/?jwt=".concat(I),target:"_blank",rel:"no-follow noreferrer",children:"Verifiy your new credential"})}),Object(O.jsx)("p",{children:Object(O.jsx)(m,{className:"submit turquoise",onClick:function(){return I&&t("".concat(s,"VerifiableCredential"),I).then((function(){return F()})).catch(T)},children:"Save in Datavault"})})]}),w&&Object(O.jsx)("div",{className:"alert error",children:Object(O.jsx)("p",{children:w})})]})},Bn=n(344),Mn=function(e){var t=e.jwt,n=e.options,c=Object(r.useState)(!1),a=Object(p.a)(c,2),i=a[0],s=a[1],o=Object(r.useState)(null),l=Object(p.a)(o,2),d=l[0],u=l[1],j=Object(r.useState)(""),b=Object(p.a)(j,2),m=b[0],h=b[1];return Object(r.useEffect)((function(){try{h(JSON.stringify(Object(Bn.a)(t),null,2))}catch(e){u(e.message),s(!0)}}),[t]),Object(O.jsxs)("div",{className:"content-row",children:[Object(O.jsxs)("div",{className:"content",children:[m&&Object(O.jsx)("div",{className:"break-all",children:Object(O.jsx)("textarea",{defaultValue:m,disabled:!0})}),d&&Object(O.jsxs)("div",{className:"alert error",children:[Object(O.jsx)("strong",{children:"Could not decode credential!"}),Object(O.jsx)("br",{}),Object(O.jsx)("em",{children:"The raw data is displayed below."})]}),i&&Object(O.jsx)("div",{className:"raw break-all",children:t})]}),!d&&Object(O.jsxs)("div",{className:"options",children:[Object(O.jsxs)("button",{className:"icon raw",onClick:function(){return s(!i)},children:[i?"Hide":"View"," Raw"]}),n]})]})},Un=n.p+"static/media/credential.436c18a7.svg",Hn=function(e){var t=e.jwt,n=e.createPresentation,c={status:"NONE",message:""},a=Object(r.useState)(c),i=Object(p.a)(a,2),s=i[0],o=i[1],l=function(){o({status:"LOADING",message:""}),n(t).then((function(e){return o({status:"DONE",message:e})})).catch((function(e){return o({status:"ERROR",message:e.message})}))},d="DONE"===s.status?"https://rsksmart.github.io/rif-credential-verifier/?jwt=".concat(s.message):"";return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("button",{className:"icon",onClick:l,children:"Present"}),Object(O.jsxs)(Wt,{show:"NONE"!==s.status,onClose:function(){return o(c)},title:"Present Credential",children:["LOADING"===s.status&&Object(O.jsx)(Yt,{}),"DONE"===s.status&&Object(O.jsxs)("div",{children:[Object(O.jsx)("h2",{children:"Sharable link:"}),Object(O.jsx)("textarea",{defaultValue:d,className:"sharableLink"}),Object(O.jsx)("p",{children:Object(O.jsx)(ln,{value:d})}),Object(O.jsx)("p",{children:Object(O.jsx)("a",{href:d,target:"_blank",rel:"noreferrer",children:"Open in new window"})})]}),"ERROR"===s.status&&Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("p",{className:"alert error",children:s.message}),Object(O.jsx)("p",{children:Object(O.jsx)(m,{onClick:l,children:"Try Again"})})]})]})]})},Gn=function(e){var t=e.credentials,n=e.getKeyContent,c=e.deleteValue,a=e.createPresentation,i=Object(r.useState)([]),s=Object(p.a)(i,2),o=s[0],l=s[1],d=Object(r.useState)(null),u=Object(p.a)(d,2),j=u[0],b=u[1];return Object(O.jsxs)(hn,{title:Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("img",{src:Un})," Credentials"]}),className:"display credentials",children:[j&&Object(O.jsx)(Fn,{keyError:j}),Object(O.jsxs)("table",{children:[Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{className:"type",children:"Type"}),Object(O.jsx)("th",{className:"content",children:"Content"})]})}),Object(O.jsx)("tbody",{children:Object.keys(t).map((function(e){return Object(O.jsxs)("tr",{children:[Object(O.jsx)("td",{children:e}),Object(O.jsxs)("td",{children:[Object(O.jsx)("ul",{children:t[e].map((function(t){return Object(O.jsx)("li",{children:Object(O.jsx)(Mn,{jwt:t.content,options:Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("div",{children:Object(O.jsx)(Hn,{jwt:t.content,createPresentation:a})}),Object(O.jsx)("div",{children:Object(O.jsx)(An,{item:t,itemKey:e,deleteValue:c})})]})})},t.id)}))}),0===t[e].length&&Object(O.jsx)(Tn,{handleGetContent:function(){return function(e){l([].concat(Object(wn.a)(o),[e])),b(null),n(e).catch((function(){return b(e)})).finally((function(){return l(o.filter((function(t){return t!==e})))}))}(e)},disabled:o.includes(e)})]})]},e)}))})]})]})},Wn=n.p+"static/media/download.b2edd61f.svg",Jn=function(e){var t=e.handleDownload,n={isLoading:!1,isError:null},c=Object(r.useState)({isLoading:!1,isError:null}),a=Object(p.a)(c,2),i=a[0],s=a[1];return Object(O.jsxs)(hn,{title:Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("img",{src:Wn})," Download Backup"]}),children:[Object(O.jsx)("p",{children:"Download a backup file of all the keys and IPFS hashes that are stored in the DataVault."}),Object(O.jsx)("p",{children:Object(O.jsx)(m,{onClick:function(){s(Object(d.a)(Object(d.a)({},n),{},{isLoading:!0})),t().then((function(){return s(n)})).catch((function(e){return s(Object(d.a)(Object(d.a)({},n),{},{isError:e.message}))}))},disabled:i.isLoading,className:"small",children:"Download Backup"})}),i.isLoading&&Object(O.jsx)(Yt,{}),i.isError&&Object(O.jsx)("div",{className:"alert error",children:i.isError})]})},qn=n(345),Yn=n(346),zn=n(184),Zn=function(e){var t=e.addDataVaultContent,n=e.declarativeDetails,c=e.credentials,a=e.address,i=e.chainId,s=e.deleteValue,o=e.swapValue,l=e.downloadBackup,d=e.getKeyContent,u=Object(r.useContext)(_n),j=u.dvClient;if(!j)return Object(O.jsxs)("div",{className:"content data-vault",children:[Object(O.jsx)("h2",{children:"Could not connect to the DataVault"}),Object(O.jsx)("p",{children:"Your wallet may be asking for permission."})]});var b=function(e,n){return t(j,e,n)},m=function(e,t){return s(j,e,t)},h=function(e){return d(j,e)};return Object(O.jsxs)("div",{className:"content data-vault",children:[Object(O.jsx)("div",{className:"container",children:Object(O.jsx)("div",{className:"column",children:Object(O.jsx)(Vn,{addDeclarativeDetail:b})})}),Object(O.jsx)("div",{className:"container",children:Object(O.jsx)("div",{className:"column",children:Object(O.jsx)(Rn,{details:n,deleteValue:m,swapValue:function(e,t,n){return o(j,e,t,n)},getKeyContent:h})})}),Object(O.jsx)("div",{className:"container",children:Object(O.jsx)("div",{className:"column",children:Object(O.jsx)(Kn,{address:a,chainId:i,addVerifiedCredentials:b,requestVerification:function(e,t){return function(e,t,n){return ze.a.post("".concat(zn.issuerServerUrl,"/").concat(t,"/requestVerification/").concat(e),{subject:n})}(ge(a,i),e,t)},verifyCode:function(e,t){return function(e,t,n,c,a){return e.request({method:"personal_sign",params:["Verification code: ".concat(t),n]}).then((function(e){return ze.a.post("".concat(zn.issuerServerUrl,"/").concat(a,"/verify/").concat(c),{sig:e})}))}(u.provider,e,a,ge(a,i),t)}})})}),Object(O.jsx)("div",{className:"container",children:Object(O.jsx)("div",{className:"column",children:Object(O.jsx)(Gn,{credentials:c,deleteValue:m,getKeyContent:h,createPresentation:function(e){return function(e,t){return N(e).then((function(n){var c=Object(p.a)(n,2),a=c[0],r=c[1],i=ge(a,r),s={vp:{"@context":["https://www.w3.org/2018/credentials/v1"],type:["VerifiablePresentation"],verifiableCredential:[t],nbf:Math.floor((new Date).getTime()/1e3),exp:Math.floor((new Date).getTime()/1e3)+3600}};return Object(qn.createJWT)(s,{alg:"ES256K",issuer:i,signer:function(t){return e.request({method:"personal_sign",params:[t,a]}).then(Yn.fromRpcSig).then((function(e){var t=e.v,n=e.r,c=e.s;return{r:n.toString("hex"),s:c.toString("hex"),recoveryParam:t}}))}})}))}(u.provider,e)}})})}),Object(O.jsxs)("div",{className:"container",children:[Object(O.jsx)("div",{className:"column",children:Object(O.jsx)(Jn,{handleDownload:function(){return u.dvClient&&l(j)}})}),Object(O.jsx)("div",{className:"column"})]})]})},$n=Object(u.b)((function(e){return{declarativeDetails:e.datavault.declarativeDetails,credentials:e.datavault.credentials,address:e.identity.address,chainId:e.identity.chainId}}),(function(e){return{addDataVaultContent:function(t,n,c){return e(vt(t,n,c))},deleteValue:function(t,n,c){return e(gt(t,n,c))},swapValue:function(t,n,c,a){return e(yt(t,n,c,a))},downloadBackup:function(e){return function(e){return e.getBackup().then((function(e){return JSON.stringify(e)})).then((function(e){var t=document.createElement("a");t.href=URL.createObjectURL(new Blob([e],{type:"text/plain;charset=utf-8"})),t.download="dataVaultBackup.txt",document.body.appendChild(t),t.click(),t.remove()}))}(e)},getKeyContent:function(t,n){return e(xt(t,n))}}}),(function(e,t,n){return Object(d.a)(Object(d.a)(Object(d.a)({},e),t),n)}))(Zn),Qn=n(45),Xn=n.p+"static/media/delegate.618299c9.svg",ec=function(e){var t=e.delegates,n=e.chainId,c=e.addDelegate,a=e.isOwner,i=Object(r.useState)(!1),s=Object(p.a)(i,2),o=s[0],l=s[1],d=Object(r.useState)(!1),u=Object(p.a)(d,2),j=u[0],b=u[1],m=Object(r.useState)(null),h=Object(p.a)(m,2),f=h[0],x=h[1],v=function(){x(null),b(!1)};return Object(O.jsxs)(hn,{title:Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("img",{src:Xn})," Delegate Identity"]}),headerRight:a&&Object(O.jsx)("button",{onClick:function(){return l(!0)},children:"Add Delegate"}),children:[Object(O.jsx)("h2",{children:"Delegates"}),Object(O.jsxs)("ul",{className:"value",children:[0===(null===t||void 0===t?void 0:t.length)&&Object(O.jsx)("li",{children:Object(O.jsx)("em",{children:"No delegates for this persona."})}),null===t||void 0===t?void 0:t.map((function(e){if(!e.ethereumAddress||!n)return Object(O.jsx)(O.Fragment,{});var t=ge(e.ethereumAddress,n);return Object(O.jsx)("li",{children:Object(O.jsx)(Pt,{hoverContent:t,children:ye(t)})},t)}))]}),Object(O.jsx)(En,{show:o,onClose:function(){j||(l(!1),v())},className:"delegate-identity",onConfirm:function(e){return v(),Object(Qn.isValidAddress)(e)?e===e.toLowerCase()||Object(Qn.isValidChecksumAddress)(e,n)?0!==(null===t||void 0===t?void 0:t.filter((function(t){var n;return-1!==(null===(n=t.ethereumAddress)||void 0===n?void 0:n.indexOf(e.toLowerCase()))})).length)?(v(),x("This address is already a delegate.")):(b(!0),void c(e).then((function(){l(!1),v()})).catch((function(e){v(),x(e.message)}))):(v(),x("Checksum is incorrect.")):(v(),x("Invalid Address"))},disabled:j,error:f,initValue:"",isLoading:j,strings:{title:"Delegate Identity",intro:"Controllers can manage the identity but they are not the owners. Only the owners can transfer identities.",label:"Delegate to",submit:"Add delegate",placeholder:"Address"}})]})},tc=function(e){var t=e.owner,n=e.isOwner,c=e.chainId,a=e.changeOwner,i=Object(r.useState)(!1),s=Object(p.a)(i,2),o=s[0],l=s[1],d=Object(r.useState)(!1),u=Object(p.a)(d,2),j=u[0],b=u[1],m=Object(r.useState)(null),h=Object(p.a)(m,2),f=h[0],x=h[1],v=function(){x(null),b(!1)},g=t&&c&&ge(t,c);return Object(O.jsxs)(hn,{title:Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("img",{src:Jt})," Persona owner"]}),headerRight:n&&Object(O.jsx)("button",{onClick:function(){return l(!0)},children:"Transfer"}),children:[Object(O.jsx)("h2",{children:"Owner"}),Object(O.jsx)("p",{className:"value",children:g&&Object(O.jsx)(Pt,{hoverContent:g,children:ye(g)})}),Object(O.jsx)(En,{show:o,className:"change-owner",onConfirm:function(e){return v(),Object(Qn.isValidAddress)(e)?e===e.toLowerCase()||Object(Qn.isValidChecksumAddress)(e,c)?(b(!0),void a(e).then((function(){l(!1),v()})).catch((function(e){v(),x(e.message)}))):(v(),x("Checksum is incorrect.")):(v(),x("Invalid Address"))},onClose:function(){j||(l(!1),v())},disabled:j,isLoading:j,error:f,initValue:"",strings:{title:"Transfer Persona Owner",intro:"Be aware that once you transfer the identity, you will lose ownership and can no longer manage the identity.",label:"Transfer to",placeholder:"address",submit:"Transfer"}})]})},nc=n.p+"static/media/key.6bad30f3.svg",cc=function(e){var t=e.publicKeys,n=e.addKey,c=e.isOwner,a=Object(r.useState)(!1),i=Object(p.a)(a,2),s=i[0],o=i[1],l=Object(r.useState)(!1),u=Object(p.a)(l,2),j=u[0],b=u[1],h=Object(r.useState)(null),f=Object(p.a)(h,2),x=f[0],v=f[1],g={algorithm:"secp256k1",purpose:"veriKey",encoding:"hex",validity:"86400",value:""},y=Object(r.useState)(g),N=Object(p.a)(y,2),C=N[0],D=N[1],w=function(e){return{id:e,className:"line",onChange:function(e){return D(Object(d.a)(Object(d.a)({},C),{},Object(Kt.a)({},e.target.id,e.target.value)))}}};return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)(hn,{title:Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("img",{src:nc})," Public Keys"]}),headerRight:c&&Object(O.jsx)("button",{onClick:function(){return o(!0)},children:"Add Public Key"}),children:[Object(O.jsx)("h2",{children:"Public Keys"}),Object(O.jsxs)("ul",{children:[(!t||0===t.length)&&Object(O.jsx)("li",{children:Object(O.jsx)("em",{children:"No public keys"})}),null===t||void 0===t?void 0:t.map((function(e){return Object(O.jsxs)("li",{children:[Object(O.jsx)("strong",{children:e.type}),Object(O.jsx)("br",{})," ",e.publicKeyBase64||e.publicKeyHex]},e.id)}))]})]}),Object(O.jsx)(Wt,{title:"Add Public Key",show:s,onClose:function(){return o(!1)},children:Object(O.jsxs)("fieldset",{children:[Object(O.jsxs)("p",{children:[Object(O.jsx)("label",{children:"Key Algorithm"}),Object(O.jsxs)("select",Object(d.a)(Object(d.a)({},w("algorithm")),{},{value:C.algorithm,children:[Object(O.jsx)("option",{value:"secp256k1",children:"secp256k1"}),Object(O.jsx)("option",{value:"rsa",children:"RSA"}),Object(O.jsx)("option",{value:"Ed25519",children:"Ed25519"})]}))]}),Object(O.jsxs)("p",{children:[Object(O.jsx)("label",{htmlFor:"purpose",children:"Key Purpose"}),Object(O.jsxs)("select",Object(d.a)(Object(d.a)({},w("purpose")),{},{value:C.purpose,children:[Object(O.jsx)("option",{value:"veriKey",children:"veriKey"}),Object(O.jsx)("option",{value:"sigAuth",children:"sigAuth"})]}))]}),Object(O.jsxs)("p",{children:[Object(O.jsx)("label",{htmlFor:"encoding",children:"Encoding"}),Object(O.jsxs)("select",Object(d.a)(Object(d.a)({},w("encoding")),{},{value:C.encoding,children:[Object(O.jsx)("option",{value:"hex",children:"hex"}),Object(O.jsx)("option",{value:"base64",children:"base64"})]}))]}),Object(O.jsxs)("p",{children:[Object(O.jsxs)("label",{htmlFor:"validity",children:["Validity ",Object(O.jsx)("span",{children:"(in seconds)"})]}),Object(O.jsx)("input",Object(d.a)(Object(d.a)({},w("validity")),{},{type:"text",value:C.validity}))]}),Object(O.jsxs)("p",{children:[Object(O.jsx)("label",{children:"Key"}),Object(O.jsx)("textarea",Object(d.a)({},w("value")))]}),Object(O.jsx)(m,{className:"submit",disabled:j,onClick:function(){if(""===C.value)return v("Value can not be empty");b(!0),v(null),n("did/pub/".concat(C.algorithm,"/").concat(C.purpose,"/").concat(C.encoding),C.value,parseInt(C.validity)).then((function(){b(!1),o(!1),D(g)})).catch((function(e){b(!1),v(e.message)}))},children:"Add Public Key"}),x&&Object(O.jsx)("div",{className:"alert error",children:x}),j&&Object(O.jsx)(Yt,{})]})})]})},ac=n.p+"static/media/computer.de8f038b.svg",rc=function(e){var t=e.endpoints,n=e.addEndpoint,c=e.isOwner,a=Object(r.useState)(!1),i=Object(p.a)(a,2),s=i[0],o=i[1],l=Object(r.useState)(!1),u=Object(p.a)(l,2),j=u[0],b=u[1],h=Object(r.useState)(null),f=Object(p.a)(h,2),x=f[0],v=f[1],g={name:"",url:"",validity:"86400"},y=Object(r.useState)(g),N=Object(p.a)(y,2),C=N[0],D=N[1],w=function(e){return{type:"text",className:"line",id:e,onChange:function(e){return D(Object(d.a)(Object(d.a)({},C),{},Object(Kt.a)({},e.target.id,e.target.value)))},disabled:j,placeholder:e}};return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)(hn,{title:Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("img",{src:ac})," Service Endpoints"]}),headerRight:c&&Object(O.jsx)("button",{onClick:function(){return o(!0)},children:"Add Endpoint"}),children:[Object(O.jsx)("h2",{children:"Active Endpoints"}),Object(O.jsxs)("ul",{children:[(!t||0===(null===t||void 0===t?void 0:t.length))&&Object(O.jsx)("li",{children:Object(O.jsx)("em",{children:"No service endpoints setup."})}),null===t||void 0===t?void 0:t.map((function(e){return Object(O.jsxs)("li",{className:"endpoint",children:[Object(O.jsx)("strong",{children:e.type})," - ",e.serviceEndpoint]},e.id||e.type)}))]})]}),Object(O.jsxs)(Wt,{show:s,title:"Add Service Endpoint",onClose:function(){return o(!1)},children:[Object(O.jsxs)("fieldset",{children:[Object(O.jsxs)("p",{children:[Object(O.jsx)("label",{htmlFor:"name",children:"Name"}),Object(O.jsx)("input",Object(d.a)(Object(d.a)({},w("name")),{},{value:C.name}))]}),Object(O.jsxs)("p",{children:[Object(O.jsx)("label",{htmlFor:"url",children:"URL"}),Object(O.jsx)("input",Object(d.a)(Object(d.a)({},w("url")),{},{value:C.url}))]}),Object(O.jsxs)("p",{children:[Object(O.jsxs)("label",{htmlFor:"validity",children:["Validity ",Object(O.jsx)("span",{children:"(in seconds)"})]}),Object(O.jsx)("input",Object(d.a)(Object(d.a)({},w("validity")),{},{value:C.validity}))]})]}),Object(O.jsx)(m,{className:"submit",disabled:j,onClick:function(){return b(!0),v(null),""===C.name||""===C.url?(b(!1),v("Name and URL are required fields.")):-1!==C.name.indexOf(" ")?(b(!1),v("Name should not contain spaces.")):void n("did/svc/".concat(C.name),C.url,parseInt(C.validity)).then((function(){b(!1),o(!1),D(g)})).catch((function(e){b(!1),v(e.message)}))},children:"Add Endpoint"}),x&&Object(O.jsx)("div",{className:"alert error",children:x}),j&&Object(O.jsx)(Yt,{})]})]})},ic=function(e){var t=e.owner,n=e.address,c=e.chainId,a=e.delegates,i=e.service,s=e.publicKeys,o=e.changeOwner,l=e.addDelegate,d=e.addAttribute,u=(null===n||void 0===n?void 0:n.toLowerCase())===(null===t||void 0===t?void 0:t.toLowerCase()),j=Object(r.useContext)(_n),b=function(e,t,n){return d(null===j||void 0===j?void 0:j.provider,e,t,n)};return(null===j||void 0===j?void 0:j.provider)&&(null===j||void 0===j?void 0:j.provider.isPortis)?Object(O.jsx)("div",{className:"container",children:Object(O.jsx)("p",{className:"alert warning",children:"Sorry, you can not modify your identity using Portis. Please use a different wallet such as Metmask, Nifty, or Wallet Connect."})}):Object(O.jsxs)("div",{className:"content identity",children:[Object(O.jsxs)("div",{className:"container",children:[Object(O.jsx)("div",{className:"column",children:Object(O.jsx)(tc,{owner:t,chainId:c,isOwner:u,changeOwner:function(e){return o(null===j||void 0===j?void 0:j.provider,e)}})}),Object(O.jsx)("div",{className:"column",children:Object(O.jsx)(ec,{delegates:a,chainId:c,addDelegate:function(e){return l(null===j||void 0===j?void 0:j.provider,e)},isOwner:u})})]}),Object(O.jsxs)("div",{className:"container",children:[Object(O.jsx)("div",{className:"column",children:Object(O.jsx)(cc,{publicKeys:s,addKey:b,isOwner:u})}),Object(O.jsx)("div",{className:"column",children:Object(O.jsx)(rc,{endpoints:i,addEndpoint:b,isOwner:u})})]})]})},sc=function(e){var t=e.publicKey.filter((function(e){return e.id.endsWith("#controller")}))[0];return"undefined"===typeof t?null:t.ethereumAddress},oc=Object(u.b)((function(e){var t,n;return{address:e.identity.address,chainId:e.identity.chainId,owner:sc(e.ethrdid.didDocument),delegates:null===(t=e.ethrdid.didDocument.publicKey)||void 0===t?void 0:t.filter((function(e){return!e.id.endsWith("controller")})),service:e.ethrdid.didDocument.service,publicKeys:null===(n=e.ethrdid.didDocument.publicKey)||void 0===n?void 0:n.filter((function(e){return e.publicKeyBase64||e.publicKeyHex}))}}),(function(e){return{changeOwner:function(t,n){return e(function(e,t){return function(n){return new Promise((function(c,a){var r=function(t){return t.error?a(t.error):c(n(De(e)))};N(e).then((function(n){var c=Object(p.a)(n,2),i=c[0],s=c[1];return new je.a({address:i,provider:e,registry:ee(parseInt(s))}).changeOwner(t.toLowerCase()).then((function(t){return C(e,t,r)})).catch((function(e){return a(e)}))}))}))}}(t,n))},addDelegate:function(t,n){return e(function(e,t){return function(n){return new Promise((function(c,a){var r=function(t){return t.error?a(t.error):c(n(De(e)))};N(e).then((function(n){var c=Object(p.a)(n,2),i=c[0],s=c[1];return new je.a({address:i,provider:e,registry:ee(parseInt(s))}).addDelegate(t,{delegateType:"0x73696741757468"}).then((function(t){return C(e,t,r)})).catch((function(e){return a(e)}))}))}))}}(t,n))},addAttribute:function(t,n,c,a){return e(function(e,t,n,c){return function(a){return new Promise((function(r,i){var s=function(t){return t.error?i(t.error):r(a(De(e)))};N(e).then((function(a){var r=Object(p.a)(a,2),o=r[0],l=r[1];return new je.a({address:o,provider:e,registry:ee(parseInt(l))}).setAttribute(t,n,c).then((function(t){return C(e,t,s)})).catch((function(e){return i(e)}))}))}))}}(t,n,c,a))}}}))(ic),lc=function(e){var t=e.tokens,n=e.chainId,c=e.balance,a=e.conversion,i=e.addCustomToken,s=Object(r.useState)(!1),o=Object(p.a)(s,2),l=o[0],d=o[1],u=Object(r.useState)(!1),j=Object(p.a)(u,2),b=j[0],m=j[1],h=Object(r.useState)(null),f=Object(p.a)(h,2),x=f[0],v=f[1],g=Object(r.useContext)(_n),y=function(){d(!l),v(null)};return Object(O.jsxs)(hn,{title:"Assets",className:"identity-balance",headerRight:Object(O.jsx)("button",{onClick:y,children:"Watch Asset"}),children:[null!==c&&Object(O.jsx)(yn,{name:"Balance",className:"defaultBalance",balance:c,symbol:ne(n),conversion:a||void 0}),null===t||void 0===t?void 0:t.map((function(e){return Object(O.jsx)(yn,{name:e.name||"Custom token: ".concat(ye(e.address)),balance:e.balance,symbol:e.symbol,conversion:e.conversion},e.address)})),Object(O.jsx)(En,{show:l,onClose:y,disabled:b,error:x,strings:{title:"Add Token",intro:"Add an ERC20 or ERC721 token to the dashboard",label:"Token to add:",placeholder:"contract address",submit:"Add Token"},onConfirm:function(e){if(m(!0),v(null),!Object(Qn.isValidAddress)(e))return m(!1),v("Not a valid address!");i(null===g||void 0===g?void 0:g.provider,e).then((function(){m(!1),d(!1)})).catch((function(e){m(!1),v(e.message)}))}})]})},dc=function(e){var t=e.tokens,n=e.chainId,c=e.balance,a=e.conversion,r=e.addCustomToken;return Object(O.jsx)("div",{className:"content defi",children:Object(O.jsx)("div",{className:"container",children:Object(O.jsx)("div",{className:"column",children:Object(O.jsx)(lc,{tokens:t,addCustomToken:r,chainId:n,balance:c,conversion:a})})})})},uc=Object(u.b)((function(e){return{address:e.identity.address,tokens:e.defi.tokens,chainId:e.identity.chainId,balance:e.defi.balance,conversion:e.defi.conversion}}),(function(e){return{addCustomToken:function(t,n,c,a){return e(Qe(t,n,c,a))}}}),(function(e,t,n){return Object(d.a)(Object(d.a)(Object(d.a)(Object(d.a)({},e),t),n),{},{addCustomToken:function(n,c){return t.addCustomToken(n,e.address,c,e.chainId)}})}))(dc),jc=function(e){var t=e.chainId,n=e.address,c=e.persona,a=e.modifyMultipleItems,i=e.logoutOrSwitchAccounts,s=e.decryptPersona,o=Object(r.useState)(Q.DASHBOARD),l=Object(p.a)(o,2),d=l[0],u=l[1],j=Object(r.useContext)(_n),b=function(e){return u(e)},m=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];j.provider.removeAllListeners(),j.reset(),i(e)};return Object(r.useEffect)((function(){j.provider.on("accountsChanged",(function(){return m()})),j.provider.on("chainChanged",(function(){return m()})),j.provider.on("disconnect",(function(){return m()}))}),[]),Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)($t,{chainId:t||void 0,did:n&&t?ge(n,t):void 0,persona:c,hasDataVault:!!j.dvClient,updatePersona:function(e){return j.dvClient&&a(j.dvClient,e)},decryptPersona:function(e){return s(j.dvClient,e)}}),Object(O.jsx)(sn,{selected:d,handleClick:b,showDataVault:!!j.dvClient,logout:function(){return m(!0)}}),d===Q.DASHBOARD&&Object(O.jsx)(Dn,{changeScreen:b}),d===Q.DATAVAULT&&Object(O.jsx)($n,{}),d===Q.IDENTITY&&Object(O.jsx)(oc,{}),d===Q.DEFI&&Object(O.jsx)(uc,{})]})},bc=function(e){var t={};return["DD_NAME","DD_EMAIL","DD_ADDRESS","DD_IDNUMBER","DD_PHONE","DD_BIRTHDATE"].forEach((function(n){t[n]=function(t){return e[t]&&e[t][0]?e[t]:e[t]&&!e[t][0]?[{id:"",content:zt}]:[{id:"",content:""}]}(n)})),t},mc=Object(u.b)((function(e){return{address:e.identity.address,chainId:e.identity.chainId,persona:bc(e.datavault.declarativeDetails)}}),(function(e){return{modifyMultipleItems:function(t,n){return e(function(e,t){return function(n){var c=[];return Object.keys(t).map((function(a){return t[a].map((function(t){var r;""===t.id&&""!==t.content?r=function(){return n(vt(e,a,t.content))}:""!==t.id&&""!==t.content?r=function(){return n(yt(e,a,t.content,t.id))}:""!==t.id&&""===t.content&&(r=function(){return n(gt(e,a,t.id))}),c.push(new Promise((function(e){e(r())})))}))})),Promise.all(c)}}(t,n))},decryptPersona:function(t,n){return t&&e(function(e,t){return function(n){return t.map((function(t){return n(xt(e,t))}))}}(t,n))},logoutOrSwitchAccounts:function(t){return e(t?wt():Dt())}}}))(jc),hc=n.p+"static/media/powered-by-iov.a0397e40.svg",Oc=n.p+"static/media/powered-by-iov-gray.e25db553.svg",fc=function(e){var t=e.isLoggedIn,n=e.version;return Object(O.jsxs)("footer",{className:"app-footer",children:[Object(O.jsx)("img",{src:t?Oc:hc,alt:"Powered By IOV"}),Object(O.jsx)("p",{children:"Copyright \xa9 2021 IOV Labs. All rights reserved."}),Object(O.jsxs)("p",{children:["Version ",n]})]})};!function(e){e.DENIED="DENIED",e.GRANTED="GRANTED",e.DEFAULT="DEFAULT"}(rn||(rn={}));var pc="ID_MANAGER",xc=function(e){var t=e.domain,n=Object(r.useState)(!1),c=Object(p.a)(n,2),a=c[0],i=c[1],s={target:"_blank",rel:"noopener"};Object(r.useEffect)((function(){var e=localStorage.getItem("PLAUSIBLE_".concat(pc))||rn.DEFAULT;i(e===rn.DEFAULT),e===rn.GRANTED&&l()}),[]);var o=function(e){var t="accept"===e.currentTarget.id?rn.GRANTED:rn.DENIED;localStorage.setItem("PLAUSIBLE_".concat(pc),t),i(!1),t===rn.GRANTED&&l()},l=function(){var e=document.createElement("script");e.setAttribute("src","https://plausible.io/js/plausible.js"),e.setAttribute("async","true"),e.setAttribute("data-domain",t),document.head.appendChild(e)};return a?Object(O.jsxs)("div",{id:"analytics",children:[Object(O.jsxs)("p",{children:["In order to improve the user's experience, this site uses Plausible, an open source and privacy-friendly tool, which does not use cookies and is compliant with GDPR, CCPA and PECR. We analyse your activity and our traffic. We strive to collect only the data that we need. We do not share your information with third parties; we want to better understand your behaviour in order to improve our website. Please take a moment to familiarize yourself with ",Object(O.jsx)("a",Object(d.a)(Object(d.a)({href:"https://plausible.io/data-policy"},s),{},{children:"Plausible\u2019s"}))," and ",Object(O.jsx)("a",Object(d.a)(Object(d.a)({href:"https://www.rsk.co/privacy-policy"},s),{},{children:"our policies"})),"."]}),Object(O.jsx)("p",{children:"If you accept Plausible\u2019s and ours policy, please click Accept."}),Object(O.jsx)("p",{children:"If you do not accept Plausible\u2019s and ours policy, we provide you with the means to disable our tracking system, please click Reject."}),Object(O.jsx)("p",{children:"Certain features of the site may not be available if the tracking system is disabled.*"}),Object(O.jsxs)("p",{children:[Object(O.jsx)("button",{onClick:o,id:"accept",children:"Accept"}),Object(O.jsx)("button",{onClick:o,id:"reject",children:"Reject"})]})]}):Object(O.jsx)(O.Fragment,{})},vc=function(){var e=Object(r.useContext)(_n),t=null===e||void 0===e?void 0:e.provider;return Object(O.jsxs)("div",{className:t?"app loggedin":"app login",children:[t?Object(O.jsx)(mc,{}):Object(O.jsx)(kt,{context:e}),Object(O.jsx)(fc,{isLoggedIn:t,version:l.a}),Object(O.jsx)(xc,{domain:"identity.rifos.org"})]})},gc=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,802)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),c(e),a(e),r(e),i(e)}))},yc=n(19),Nc=n(88),Cc=(n(798),[Nc.a]);var Dc=Object(yc.c)({identity:ue,ethrdid:pe,defi:Ke,datavault:Ot}),wc=function(e){return Object(yc.e)(Dc,e,yc.a.apply(void 0,Cc))};o.a.render(Object(O.jsx)(i.a.StrictMode,{children:Object(O.jsx)(u.a,{store:wc(),children:Object(O.jsx)(Ln,{children:Object(O.jsx)(vc,{})})})}),document.getElementById("root")),gc()}},[[799,1,2]]]);
//# sourceMappingURL=main.529b87f5.chunk.js.map