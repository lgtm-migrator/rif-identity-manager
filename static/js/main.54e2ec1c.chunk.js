(this["webpackJsonprif-identity-manager"]=this["webpackJsonprif-identity-manager"]||[]).push([[0],{172:function(e){e.exports=JSON.parse('[{"constant":true,"inputs":[],"name":"symbol","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"name","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"decimals","outputs":[{"name":"","type":"uint8"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"internalType":"address","name":"account","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"}]')},298:function(e){e.exports=JSON.parse('{"a":"0.0.1"}')},305:function(e){e.exports=JSON.parse('{"dataVaultUrl":"https://identity.staging.rifcomputing.net/v2"}')},306:function(e){e.exports=JSON.parse('{"ethrDid":"0xdca7ef03e98e0dc2b855be647c39abe984fcf21b","rpcUrl":"https://mainnet.infura.io/v3/8043bb2cf99347b1bfadfb233c5325c0","balanceName":"ETH","coinGeckoIds":"ethereum"}')},307:function(e){e.exports=JSON.parse('{"ethrDid":"0xdca7ef03e98e0dc2b855be647c39abe984fcf21b","rpcUrl":"https://ropsten.infura.io/v3/8043bb2cf99347b1bfadfb233c5325c0","balanceName":"ETH","coinGeckoIds":"ethereum"}')},308:function(e){e.exports=JSON.parse('{"ethrDid":"0xdca7ef03e98e0dc2b855be647c39abe984fcf21b","rpcUrl":"https://did.rsk.co:4444","balanceName":"RBTC","coinGeckoIds":"bitcoin,rif-token"}')},309:function(e){e.exports=JSON.parse('{"ethrDid":"0xdca7ef03e98e0dc2b855be647c39abe984fcf21b","rpcUrl":"https://did.testnet.rsk.co:4444","balanceName":"TRBTC","coinGeckoIds":"rif-token,bitcoin"}')},310:function(e){e.exports=JSON.parse('{"ethrDid":"0xdca7ef03e98e0dc2b855be647c39abe984fcf21b","rpcUrl":"https://kovan.infura.io/v3/8043bb2cf99347b1bfadfb233c5325c0","balanceName":"KETH","coinGeckoIds":"ethereum"}')},311:function(e){e.exports=JSON.parse('{"ethrDid":"0xdca7ef03e98e0dc2b855be647c39abe984fcf21b","rpcUrl":"https://rinkeby.infura.io/v3/8043bb2cf99347b1bfadfb233c5325c0","balanceName":"ETH","coinGeckoIds":"ethereum"}')},312:function(e){e.exports=JSON.parse('{"ethrDid":"0xdca7ef03e98e0dc2b855be647c39abe984fcf21b","rpcUrl":"https://goerli.infura.io/v3/8043bb2cf99347b1bfadfb233c5325c0","balanceName":"G\xf6ETH","coinGeckoIds":"ethereum"}')},313:function(e){e.exports=JSON.parse('{"ethrDid":"","rpcUrl":"http://127.0.0.1:7545","balanceName":"RBTC","coinGeckoIds":null}')},329:function(e,n,t){},356:function(e,n){},394:function(e,n){},396:function(e,n){},405:function(e,n){},407:function(e,n){},432:function(e,n){},434:function(e,n){},435:function(e,n){},440:function(e,n){},442:function(e,n){},448:function(e,n){},450:function(e,n){},463:function(e,n){},475:function(e,n){},478:function(e,n){},547:function(e,n){},550:function(e,n){},614:function(e,n){},635:function(e,n){},747:function(e,n,t){"use strict";t.r(n);var c=t(0),a=t(1),r=t.n(a),i=t(107),s=t.n(i),o=(t(329),t(298)),l=t(4),d=t(18),u=t(10),b=t(11);function j(){var e=Object(u.a)(["\n  border-radius: 5px;\n  padding: 10px 50px;\n  font-size: 18px;\n  border: none;\n  box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.1);\n  cursor: pointer;\n"]);return j=function(){return e},e}var m,h=b.a.button(j()),O=t.p+"static/media/rif-id-manager.7afc1cbb.svg",f=function(e){var n=e.handleLogin;return Object(c.jsx)("div",{className:"container login-screen",children:Object(c.jsxs)("div",{className:"column",children:[Object(c.jsx)("img",{src:O,alt:"RIF identity Manager"}),Object(c.jsx)("h1",{children:"Sign in"}),Object(c.jsx)(h,{className:"blue",onClick:n,children:"Connect your wallet"}),Object(c.jsxs)("p",{children:["Don't have a wallet? ",Object(c.jsx)("a",{href:"https://developers.rsk.co/wallet/use/",target:"_blank",rel:"noopener noreferrer",children:"Download here"})]})]})})},x=t(2),p=t(25),v=t.n(p),g=function(e){return new v.a(e).net_version()},y=function(e){return new v.a(e).accounts()},N=function(e){return Promise.all([y(e).then((function(e){return e[0]})),g(e).then((function(e){return parseInt(e)}))])},w=function(e,n,t){var c=new v.a(e),a=setInterval((function(){return c.getTransactionReceipt(n).then((function(e){if(e)return clearInterval(a),t({result:e.transactionHash,error:1!==parseInt(e.status)?"Transaction Recepit Failed":null})})).catch((function(e){return t({error:e.message})}))}),2e3)};!function(e){e.METAMASK="METAMASK",e.NIFTY="NIFTY",e.WALLET_CONNECT="WALLET_CONNECT"}(m||(m={}));var D,C=function(e){return e.isNiftyWallet?m.NIFTY:e.isMetaMask?m.METAMASK:e.wc?m.WALLET_CONNECT:void 0},k=t(303),E=t.n(k),I=t(304),S=t.n(I),A=t(305),T=t(306),F=t(307),R=t(308),K=t(309),V=t(310),_=t(311),L=t(312),P=t(313);!function(e){e.ETHR_DID_CONTRACT="ethrDid",e.RPC_URL="rpcUrl",e.BALANCE_NAME="balanceName",e.COIN_GECKO_IDS="coinGeckoIds"}(D||(D={}));var M=function(e,n){switch(e){case 1:return T[n];case 3:return F[n];case 4:return _[n];case 5:return L[n];case 30:return R[n];case 31:return K[n];case 42:return V[n];default:return P[n]}},B=function(e){return M(e,D.ETHR_DID_CONTRACT)},U=function(e){return M(e,D.RPC_URL)},H=function(e){return M(e,D.BALANCE_NAME)},G=new E.a({cachedProvider:!1,providerOptions:{walletconnect:{package:S.a,options:{rpc:{1:U(1),3:U(3),4:U(4),5:U(5),30:U(30),31:U(31),42:U(42),5777:U(5777)}}}},supportedChains:[1,3,4,5,30,31,42,5777]}),J=t(37),W={address:"",chainId:null},z=Object(J.a)({name:"identity",initialState:W,reducers:{changeAccount:function(e,n){var t=n.payload.address;e.address=t},changeChainId:function(e,n){var t=n.payload.chainId;e.chainId=t},reset:function(e){return W}}}),Y=z.actions,q=Y.changeAccount,Z=Y.changeChainId,$=Y.reset,Q=z.reducer,X=t(112),ee={didDocument:{"@context":"https://w3id.org/did/v1",id:"",publicKey:[],authentication:[]}},ne=Object(J.a)({name:"ethrdid",initialState:ee,reducers:{resolveDid:function(e,n){var t=n.payload.data;e.didDocument=t},reset:function(e){return ee}}}),te=ne.actions,ce=te.resolveDid,ae=te.reset,re=ne.reducer,ie=t(315),se=t(316),oe=function(e,n){switch(n){case 1:return"did:ethr:".concat(e);case 3:return"did:ethr:ropsten:".concat(e);case 4:return"did:ethr:rinkeby:".concat(e);case 5:return"did:ethr:goerli:".concat(e);case 30:return"did:ethr:rsk:".concat(e);case 31:return"did:ethr:rsk:testnet:".concat(e);case 42:return"did:ethr:kovan:".concat(e);case 5777:return"did:ethr:development:".concat(e);default:return e}},le=function(e){if(-1===e.lastIndexOf(":"))return"".concat(e.slice(0,6),"...").concat(e.slice(e.length-4));var n=e.lastIndexOf(":");return"".concat(e.slice(0,n)).concat(e.slice(n,n+7),"...").concat(e.slice(e.length-4))},de=function(e,n){return{name:e,registry:B(n),rpcUrl:U(n)}},ue={networks:[de("mainnet",1),de("ropsten",3),de("rinkeby",4),de("goerli",5),de("rsk",30),de("rsk:testnet",31),de("kovan",31),de("development",5777)]},be=function(e){return function(n){return new Promise((function(t){N(e).then((function(e){var c=Object(x.a)(e,2),a=c[0],r=c[1],i=new se.a(Object(ie.getResolver)(ue)),s=oe(a,r);i.resolve(s).then((function(e){return t(n(ce({data:e})))}))}))}))}},je=t(110),me=t.n(je),he=t(51),Oe=t.n(he),fe=t(172),xe={address:"",name:null,symbol:null,balance:0,conversion:void 0},pe={tokens:[],balance:null,conversion:null},ve=Object(J.a)({name:"tokens",initialState:pe,reducers:{addTokenData:function(e,n){var t=n.payload.data,c=Object(l.a)(Object(l.a)({},t),{},{address:t.address.toLowerCase()});0===e.tokens.filter((function(e){return e.address===c.address})).length?e.tokens.push(Object(l.a)(Object(l.a)({},xe),c)):e.tokens=e.tokens.map((function(e){return e.address===c.address?Object(l.a)(Object(l.a)({},e),c):e}))},receiveBalance:function(e,n){var t=n.payload.balance;e.balance=t},receiveConversionBalance:function(e,n){var t=n.payload.usd;e.conversion=t},reset:function(e){return pe}}}),ge=ve.actions,ye=ge.addTokenData,Ne=ge.receiveBalance,we=ge.receiveConversionBalance,De=ge.reset,Ce=ve.reducer,ke=t(317),Ee=t.n(ke),Ie=t(318),Se=t.n(Ie),Ae=function(e,n){switch(e){case"ethereum":case"bitcoin":return"defaultBalance";case"rif-token":return 30===n?"0x2aCc95758f8b5F583470bA265Eb685a8f45fC9D5":"0x19f64674D8a5b4e652319F5e239EFd3bc969a1FE";default:return null}},Te=function(e){switch(e){case 30:return Se.a;case 31:return Ee.a;default:return null}},Fe="id-manager-settings",Re=function(e,n){var t=localStorage.getItem("".concat(Fe,"-").concat(e));return t&&JSON.parse(t)[n]||null},Ke=t(319),Ve=t.n(Ke),_e=function(e,n,t){return function(c){var a=Te(t);if(a){var r=new v.a(e),i=new me.a(r),s=function(e){var t=a[e];t.erc20&&i(fe).at(e).balanceOf(n).then((function(e){return e[0]})).then((function(e){return e.div(new Oe.a(10).pow(new Oe.a(t.decimals))).toNumber()})).then((function(n){0!==n&&c(ye({data:{address:e,balance:n,name:t.name,symbol:t.symbol}}))})).catch((function(e){return console.log("balanceOf error",e)}))};for(var o in a)s(o)}}},Le=function(e,n,t,c){return function(a){var r=new v.a(e),i=new me.a(r)(fe).at(n);r.getCode(n).then((function(e){if("0x0"===e)return c&&c(new Error("The address is not a contract"));i.symbol().then((function(e){return e[0]})).then((function(e){return a(ye({data:{address:n,symbol:e}}))})).catch((function(e){return console.log("symbol",e.message)})),i.name().then((function(e){return e[0]})).then((function(e){return a(ye({data:{address:n,name:e}}))})).catch((function(e){return console.log("name",e.message)})),i.decimals().then((function(e){return e[0]})).then((function(e){i.balanceOf(t).then((function(e){return e[0]})).then((function(n){return n.div(new Oe.a(10).pow(e)).toNumber()})).then((function(e){0!==e&&a(ye({data:{address:n,balance:e}})),c&&c(!0)})).catch((function(e){return console.log("balanceOf error",e)}))})).catch((function(){return c&&c(new Error("The address is a contract but not ERC20 or ERC721 token."))}))}))}},Pe=function(e,n,t,c){return function(a){return new Promise((function(r,i){a(Le(e,t,n,(function(e){return e instanceof Error?i(e):r(function(e,n,t){var c=localStorage.getItem("".concat(Fe,"-").concat(e)),a=c?JSON.parse(c):{};a[n]||(a[n]=[]),a[n].push(t),localStorage.setItem("".concat(Fe,"-").concat(e),JSON.stringify(a))}(c.toString(),"TOKEN",t))})))}))}},Me=function(e){return function(n){var t=function(e){return M(e,D.COIN_GECKO_IDS)}(e);t&&Ve.a.get("https://api.coingecko.com/api/v3/simple/price?ids=".concat(t,"&vs_currencies=usd")).then((function(e){return e.data})).then((function(t){for(var c in t){var a=Ae(c,e);"defaultBalance"===a?n(we(t[c])):a&&n(ye({data:{address:a,conversion:t[c].usd}}))}}))}},Be=t(84),Ue=t.n(Be),He={declarativeDetails:{},credentials:{},storage:void 0},Ge=function(e){return e.endsWith("Credential")?"credentials":"declarativeDetails"},Je=Object(J.a)({name:"datavault",initialState:He,reducers:{receiveKeyData:function(e,n){var t=n.payload,c=t.key,a=t.content;e[Ge(c)][c]=a},addContentToKey:function(e,n){var t=n.payload,c=t.key,a=t.content;e.declarativeDetails[c]?e.declarativeDetails[c].push(a):e.declarativeDetails[c]=[a]},removeContentfromKey:function(e,n){var t=n.payload,c=t.key,a=t.id,r=Ge(c);e[r][c]=e[r][c].filter((function(e){return e.id!==a})),0===e[r][c].length&&delete e[r][c]},swapContentById:function(e,n){var t=n.payload,c=t.key,a=t.id,r=t.content;e.declarativeDetails[c]=e.declarativeDetails[c].map((function(e){return e.id===a?Object(l.a)(Object(l.a)({},e),{},{content:r}):e}))},receiveStorageInformation:function(e,n){var t=n.payload.storage;e.storage=t},receiveKeys:function(e,n){n.payload.keys.forEach((function(n){n.endsWith("Credential")?e.credentials[n]=[]:e.declarativeDetails[n]=[]}))},reset:function(e){return He}}}),We=Je.actions,ze=We.receiveKeyData,Ye=We.addContentToKey,qe=We.removeContentfromKey,Ze=We.swapContentById,$e=We.receiveStorageInformation,Qe=We.receiveKeys,Xe=We.reset,en=Je.reducer,nn=function(e,n,t){var c=A.dataVaultUrl,a=oe(n,t).toLowerCase(),r=C(e)===m.METAMASK?new Be.EncryptionManager({getEncryptionPublicKey:function(){return e.request({method:"eth_getEncryptionPublicKey",params:[n]})},decrypt:function(t){return e.request({method:"eth_decrypt",params:[t,n]})}}):new Be.EncryptionManager({getEncryptionPublicKey:void 0,decrypt:function(e){return Promise.reject(new Error("Content could not be decrypted by your wallet."))}});return new Ue.a({serviceUrl:c,authManager:new Be.AuthManager({did:a,serviceUrl:c,personalSign:function(t){return e.request({method:"personal_sign",params:[t,n]})}}),encryptionManager:r})},tn=function(e,n,t){return function(c){return e.create({key:n,content:t}).then((function(e){return e.id})).then((function(e){return c(Ye({key:n,content:{id:e,content:t}}))}))}},cn=function(e,n,t){return function(c){return e.delete({key:n,id:t}).then((function(){return c(qe({key:n,id:t}))}))}},an=function(e,n,t,c){return function(a){return e.swap({key:n,content:t,id:c}).then((function(){return a(Ze({key:n,id:c,content:t}))}))}},rn=function(e,n,t,c){return function(a){var r=nn(e,n,t);r.getStorageInformation().then((function(e){a($e({storage:e})),a(function(e){return function(n){return e.getKeys().then((function(e){return n(Qe({keys:e}))}))}}(r)),c(r)})).catch((function(e){return c(null,e)}))}},sn=function(e){return function(n){return G.connect().then((function(t){e.setProvider(t),N(t).then((function(c){var a=Object(x.a)(c,2),r=a[0],i=a[1];n(q({address:r})),n(Z({chainId:parseInt(i)})),n(be(t)),n(function(e,n,t){return function(c){c(_e(e,t,n)),c(Me(n)),(Re(n.toString(),"TOKEN")?Re(n.toString(),"TOKEN"):[]).map((function(n){c(Le(e,n,t))}))}}(t,parseInt(i),r)),n(function(e,n){return function(t){return new v.a(e).getBalance(n).then((function(e){return parseInt(e.toString())})).then((function(e){return e/Math.pow(10,18)})).then((function(e){return t(Ne({balance:e}))}))}}(t,r));n(rn(t,r,i,(function(n,t){return e.setDvClient(n)})))}))})).catch((function(e){return console.log("rLogin Error",e)}))}},on=function(){return function(e){localStorage.removeItem("RLOGIN_ACCESS_TOKEN"),localStorage.removeItem("RLOGIN_REFRESH_TOKEN"),localStorage.removeItem("walletconnect"),Object.keys(localStorage).map((function(e){(e.startsWith("DV_ACCESS_TOKEN")||e.startsWith("DV_REFRESH_TOKEN"))&&localStorage.removeItem(e)})),e(Xe()),e(De()),e(ae()),e($())}},ln=Object(d.b)(null,(function(e){return{handleLogin:function(n){return e(sn(n))}}}),(function(e,n,t){return Object(l.a)(Object(l.a)(Object(l.a)(Object(l.a)({},e),n),t),{},{handleLogin:function(){return n.handleLogin(t.context)}})}))(f),dn=t.p+"static/media/rif-id-manager-gray.d70174d8.svg";function un(){var e=Object(u.a)(['\n  position: relative;\n  margin-left: 8px;\n  padding-left: 3px;\n  &:before {\n    position: absolute;\n    right: 98%;\n    top: 45%;\n    transform: translate(-5px, -50%);\n    content: "";\n    display: block;\n    width: 10px;\n    height: 10px;\n    border-radius: 50%;\n    background: ',";\n  }\n"]);return un=function(){return e},e}function bn(){var e=Object(u.a)(["\n  display: inline-block;\n  border: 1px solid #fff;\n  border-radius: 25px;\n  padding:6px 18px !important;\n  color: #6C6B6C;\n  opacity: 1 !important;\n  border: 1px solid #CCCACD;\n  width: auto;\n"]);return bn=function(){return e},e}var jn=b.a.span(bn()),mn=b.a.div(un(),(function(e){return e.connected?"#40d512":"#DC3545"})),hn=function(e){switch(e){case 1:return"Ethereum";case 3:return"Ropsten Testnet";case 4:return"Rinkeby Testnet";case 5:return"G\xf6rli Testnet";case 30:return"RSK Mainnet";case 31:return"RSK Testnet";case 42:return"Kovan Testnet";default:return"Network Id ".concat(e.toString())}},On=function(e){var n=e.connected,t=e.name,a=e.chainId;return Object(c.jsx)(jn,{className:n?"connected":"disconnected",children:Object(c.jsx)(mn,{connected:n,children:a?hn(a):t})})};function fn(){var e=Object(u.a)(["\n  position: relative;\n  display: inline-block;\n  cursor: help;\n  margin-right: 20px;\n  &:hover {\n    "," {\n      visibility: visible;\n      opacity: 1;\n    }\n  }\n"]);return fn=function(){return e},e}function xn(){var e=Object(u.a)(["\n  opacity: 0;\n  position: absolute;\n  background-color: #555;\n  color: #fff;\n  text-align: center;\n  padding: 5px 10px;\n  border-radius: 6px;\n  z-index: 1;\n  margin-top:25px;\n  top: 0px;\n  transition: opacity .6s;\n  display: block;\n  min-width: 250px;\n  word-break: break-all;\n"]);return xn=function(){return e},e}var pn=b.a.span(xn()),vn=b.a.span(fn(),pn),gn=function(e){var n=e.hoverContent,t=e.children,a=e.className;return Object(c.jsxs)(vn,{className:a,children:[t,Object(c.jsx)(pn,{className:"hover-content",children:n})]})},yn=t(320),Nn=t.n(yn),wn=function(e){var n=e.value,t=e.size,a={display:"inline-block",background:"#FFFFFF",border:"2px solid #919191",padding:"2px",margin:"0",height:"".concat(t||50,"px"),width:"".concat(t||50,"px"),borderRadius:"50%"};return Object(c.jsx)("img",{src:"data:image/svg+xml;base64,".concat(new Nn.a(n,{format:"svg",background:[71,196,225,255],margin:".22",saturation:".8"}).toString()),alt:n,className:"user-icon",style:a})},Dn=t(36);function Cn(){var e=Object(u.a)(["\n  background: #ffffff;\n  padding: 0 20px 15px 20px;\n"]);return Cn=function(){return e},e}function kn(){var e=Object(u.a)(["\n  position: absolute;\n  top: 0;\n  right: 10px;\n  color: #C4C4C4;\n  font-size: 2em;\n  border: none;\n  background: none;\n  cursor: pointer;\n  font-weight: 300;\n  &:after {\n    content: '\\d7';\n  }\n"],["\n  position: absolute;\n  top: 0;\n  right: 10px;\n  color: #C4C4C4;\n  font-size: 2em;\n  border: none;\n  background: none;\n  cursor: pointer;\n  font-weight: 300;\n  &:after {\n    content: '\\\\d7';\n  }\n"]);return kn=function(){return e},e}function En(){var e=Object(u.a)(["\n  background: #F2F2F2;\n  font-size: 16px;\n  padding: 15px 0\n"]);return En=function(){return e},e}function In(){var e=Object(u.a)(["\n  position: relative;\n  width: 100%;\n  max-width: 500px;\n  background: #ffffff;\n  border-radius: 20px;\n  overflow: hidden;\n"]);return In=function(){return e},e}function Sn(){var e=Object(u.a)(["\nfont-family: Rubik;\ntransition: opacity 0.1s ease-in-out;\ntext-align: center;\nposition: fixed;\nwidth: 100vw;\nheight: 100vh;\nmargin-left: -50vw;\ntop: 0;\nleft: 50%;\nz-index: 2;\nwill-change: opacity;\nbackground-color: rgba(0, 0, 0, 0.4);\nopacity: 1;\nvisibility: ",";\npointer-events: ",";\ndisplay: flex;\njustify-content: center;\nalign-items: center;\n\n& * {\n  box-sizing: border-box !important;\n}\n"]);return Sn=function(){return e},e}var An=b.a.div(Sn(),(function(e){return e.show?"visible":"hidden"}),(function(e){return e.show?"auto":"none"})),Tn=b.a.div(In()),Fn=b.a.div(En()),Rn=b.a.button(kn()),Kn=b.a.div(Cn()),Vn=function(e){var n=e.children,t=e.show,a=e.title,r=e.className,i=e.onClose;return t?Object(c.jsx)(An,{show:t,className:r,children:Object(c.jsxs)(Tn,{children:[Object(c.jsxs)(Fn,{className:"modal-title",children:[a,Object(c.jsx)(Rn,{className:"close",onClick:i})]}),Object(c.jsx)(Kn,{className:"modal-content",children:n})]})}):Object(c.jsx)(c.Fragment,{})},_n=t.p+"static/media/persona.f3d51fc5.svg",Ln=t.p+"static/media/pencil.afa201a1.svg";function Pn(){var e=Object(u.a)(["\n  color: #47C4E1;\n  font-size: 15px;\n  margin: 50px auto;\n  width: 1em;\n  height: 1em;\n  border-radius: 50%;\n  position: relative;\n  text-indent: -9999em;\n  -webkit-animation: load4 1.3s infinite linear;\n  animation: load4 1.3s infinite linear;\n  -webkit-transform: translateZ(0);\n  -ms-transform: translateZ(0);\n  transform: translateZ(0);\n\n  @-webkit-keyframes load4 {\n    0%,\n    100% {\n      box-shadow: 0 -3em 0 0.2em, 2em -2em 0 0em, 3em 0 0 -1em, 2em 2em 0 -1em, 0 3em 0 -1em, -2em 2em 0 -1em, -3em 0 0 -1em, -2em -2em 0 0;\n    }\n    12.5% {\n      box-shadow: 0 -3em 0 0, 2em -2em 0 0.2em, 3em 0 0 0, 2em 2em 0 -1em, 0 3em 0 -1em, -2em 2em 0 -1em, -3em 0 0 -1em, -2em -2em 0 -1em;\n    }\n    25% {\n      box-shadow: 0 -3em 0 -0.5em, 2em -2em 0 0, 3em 0 0 0.2em, 2em 2em 0 0, 0 3em 0 -1em, -2em 2em 0 -1em, -3em 0 0 -1em, -2em -2em 0 -1em;\n    }\n    37.5% {\n      box-shadow: 0 -3em 0 -1em, 2em -2em 0 -1em, 3em 0em 0 0, 2em 2em 0 0.2em, 0 3em 0 0em, -2em 2em 0 -1em, -3em 0em 0 -1em, -2em -2em 0 -1em;\n    }\n    50% {\n      box-shadow: 0 -3em 0 -1em, 2em -2em 0 -1em, 3em 0 0 -1em, 2em 2em 0 0em, 0 3em 0 0.2em, -2em 2em 0 0, -3em 0em 0 -1em, -2em -2em 0 -1em;\n    }\n    62.5% {\n      box-shadow: 0 -3em 0 -1em, 2em -2em 0 -1em, 3em 0 0 -1em, 2em 2em 0 -1em, 0 3em 0 0, -2em 2em 0 0.2em, -3em 0 0 0, -2em -2em 0 -1em;\n    }\n    75% {\n      box-shadow: 0em -3em 0 -1em, 2em -2em 0 -1em, 3em 0em 0 -1em, 2em 2em 0 -1em, 0 3em 0 -1em, -2em 2em 0 0, -3em 0em 0 0.2em, -2em -2em 0 0;\n    }\n    87.5% {\n      box-shadow: 0em -3em 0 0, 2em -2em 0 -1em, 3em 0 0 -1em, 2em 2em 0 -1em, 0 3em 0 -1em, -2em 2em 0 0, -3em 0em 0 0, -2em -2em 0 0.2em;\n    }\n  }\n  @keyframes load4 {\n    0%,\n    100% {\n      box-shadow: 0 -3em 0 0.2em, 2em -2em 0 0em, 3em 0 0 -1em, 2em 2em 0 -1em, 0 3em 0 -1em, -2em 2em 0 -1em, -3em 0 0 -1em, -2em -2em 0 0;\n    }\n    12.5% {\n      box-shadow: 0 -3em 0 0, 2em -2em 0 0.2em, 3em 0 0 0, 2em 2em 0 -1em, 0 3em 0 -1em, -2em 2em 0 -1em, -3em 0 0 -1em, -2em -2em 0 -1em;\n    }\n    25% {\n      box-shadow: 0 -3em 0 -0.5em, 2em -2em 0 0, 3em 0 0 0.2em, 2em 2em 0 0, 0 3em 0 -1em, -2em 2em 0 -1em, -3em 0 0 -1em, -2em -2em 0 -1em;\n    }\n    37.5% {\n      box-shadow: 0 -3em 0 -1em, 2em -2em 0 -1em, 3em 0em 0 0, 2em 2em 0 0.2em, 0 3em 0 0em, -2em 2em 0 -1em, -3em 0em 0 -1em, -2em -2em 0 -1em;\n    }\n    50% {\n      box-shadow: 0 -3em 0 -1em, 2em -2em 0 -1em, 3em 0 0 -1em, 2em 2em 0 0em, 0 3em 0 0.2em, -2em 2em 0 0, -3em 0em 0 -1em, -2em -2em 0 -1em;\n    }\n    62.5% {\n      box-shadow: 0 -3em 0 -1em, 2em -2em 0 -1em, 3em 0 0 -1em, 2em 2em 0 -1em, 0 3em 0 0, -2em 2em 0 0.2em, -3em 0 0 0, -2em -2em 0 -1em;\n    }\n    75% {\n      box-shadow: 0em -3em 0 -1em, 2em -2em 0 -1em, 3em 0em 0 -1em, 2em 2em 0 -1em, 0 3em 0 -1em, -2em 2em 0 0, -3em 0em 0 0.2em, -2em -2em 0 0;\n    }\n    87.5% {\n      box-shadow: 0em -3em 0 0, 2em -2em 0 -1em, 3em 0 0 -1em, 2em 2em 0 -1em, 0 3em 0 -1em, -2em 2em 0 0, -3em 0em 0 0, -2em -2em 0 0.2em;\n    }\n  }\n"]);return Pn=function(){return e},e}var Mn,Bn=b.a.div(Pn()),Un=function(e){var n=e.did,t=e.initValue,r=e.updatePersona;if(!n)return Object(c.jsx)(c.Fragment,{});var i=Object(a.useState)(!1),s=Object(x.a)(i,2),o=s[0],d=s[1],u=Object(a.useState)(!1),b=Object(x.a)(u,2),j=b[0],m=b[1],O=Object(a.useState)(null),f=Object(x.a)(O,2),p=f[0],v=f[1],g=Object(a.useState)({name:"",email:"",address:"",idnumber:"",phone:"",birthdate:""}),y=Object(x.a)(g,2),N=y[0],w=y[1],D=function(e){return w(Object(l.a)(Object(l.a)({},N),{},Object(Dn.a)({},e.target.id,e.target.value)))};Object(a.useEffect)((function(){v(null),m(!1),w({name:t.DD_NAME[0].content,email:t.DD_EMAIL[0].content,address:t.DD_ADDRESS[0].content,idnumber:t.DD_IDNUMBER[0].content,phone:t.DD_PHONE[0].content,birthdate:t.DD_BIRTHDATE[0].content})}),[t]);var C=function(e){return{placeholder:"Persona ".concat(e),id:e,type:"text",className:"line",onChange:D,disabled:j}};return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("button",{className:"edit icon",onClick:function(){return d(!0)},children:Object(c.jsx)("img",{src:Ln,alt:"Edit Persona"})}),Object(c.jsx)(Vn,{show:o,onClose:function(){return d(!1)},title:Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("img",{src:_n,alt:"pesona"})," Edit persona"]}),className:"edit-personal-modal",children:Object(c.jsxs)("div",{children:[Object(c.jsx)("h2",{children:"Edit Persona"}),le(n),Object(c.jsx)("p",{children:"You can edit your personal that be saved in your data vault."}),Object(c.jsx)("p",{children:Object(c.jsxs)("label",{children:["Name: ",Object(c.jsx)("input",Object(l.a)({value:N.name},C("name")))]})}),Object(c.jsx)("p",{children:Object(c.jsxs)("label",{children:["Email: ",Object(c.jsx)("input",Object(l.a)({value:N.email},C("email")))]})}),Object(c.jsx)("p",{children:Object(c.jsxs)("label",{children:["Address: ",Object(c.jsx)("input",Object(l.a)({value:N.address},C("address")))]})}),Object(c.jsx)("p",{children:Object(c.jsxs)("label",{children:["Id Number: ",Object(c.jsx)("input",Object(l.a)({value:N.idnumber},C("idnumber")))]})}),Object(c.jsx)("p",{children:Object(c.jsxs)("label",{children:["Phone Number: ",Object(c.jsx)("input",Object(l.a)({value:N.phone},C("phone")))]})}),Object(c.jsx)("p",{children:Object(c.jsxs)("label",{children:["Birthdate: ",Object(c.jsx)("input",Object(l.a)({value:N.birthdate},C("birthdate")))]})}),Object(c.jsx)("p",{children:Object(c.jsx)(h,{className:"save blue",onClick:function(){m(!0),v(null);var e=function(e,n){return t[e][0].content!==n?[Object(l.a)(Object(l.a)({},t[e][0]),{},{content:n})]:[]},n={DD_NAME:e("DD_NAME",N.name),DD_EMAIL:e("DD_EMAIL",N.email),DD_ADDRESS:e("DD_ADDRESS",N.address),DD_IDNUMBER:e("DD_IDNUMBER",N.idnumber),DD_PHONE:e("DD_PHONE",N.phone),DD_BIRTHDATE:e("DD_BIRTHDATE",N.birthdate)};r(n).then((function(){m(!1),d(!1)})).catch((function(e){m(!1),v(e.message)}))},disabled:j,children:"Save"})}),p&&Object(c.jsx)("div",{className:"alert error",children:p}),j&&Object(c.jsx)(Bn,{})]})})]})},Hn=function(e){var n=e.did,t=e.chainId,a=e.persona,r=e.hasDataVault,i=e.updatePersona;return Object(c.jsxs)("header",{className:"container",children:[Object(c.jsxs)("div",{className:"columnDouble branding",children:[Object(c.jsx)("div",{className:"logo",children:Object(c.jsx)("img",{src:dn,alt:"RIF Id Manager"})}),Object(c.jsx)("h1",{className:"persona",children:n&&Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(wn,{value:n,size:40}),""!==a.DD_NAME[0].content?Object(c.jsx)("div",{children:a.DD_NAME[0].content}):Object(c.jsx)(gn,{hoverContent:n,children:Object(c.jsx)("div",{children:le(n)})})]})}),r&&Object(c.jsx)(Un,{did:n,initValue:a,updatePersona:i})]}),Object(c.jsx)("div",{className:"column network",children:t&&Object(c.jsx)(On,{connected:!0,chainId:t})})]})};!function(e){e.DASHBOARD="dashboard",e.DATAVAULT="datavault",e.IDENTITY="identity",e.DEFI="defi"}(Mn||(Mn={}));var Gn=function(e){var n=e.selected,t=e.showDataVault,a=e.handleClick,r=e.logout;return Object(c.jsx)("div",{className:"container",children:Object(c.jsx)("div",{className:"column",children:Object(c.jsxs)("ul",{className:"navigation",children:[Object(c.jsx)("li",{className:n===Mn.DASHBOARD?"dashboard active":"dashboard",children:Object(c.jsx)("button",{onClick:function(){return a(Mn.DASHBOARD)},children:"Dashboard"})}),Object(c.jsx)("li",{className:n===Mn.DEFI?"defi active":"defi",children:Object(c.jsx)("button",{onClick:function(){return a(Mn.DEFI)},children:"DeFi Assets"})}),t&&Object(c.jsx)("li",{className:n===Mn.DATAVAULT?"datavault active":"datavault",children:Object(c.jsx)("button",{onClick:function(){return a(Mn.DATAVAULT)},children:"Data Vault"})}),Object(c.jsx)("li",{className:n===Mn.IDENTITY?"active":"",children:Object(c.jsx)("button",{onClick:function(){return a(Mn.IDENTITY)},children:"Manage Identity"})}),Object(c.jsx)("li",{className:"disabled",children:"Request Credentials"}),Object(c.jsx)("li",{className:"disabled",children:"My Dapps"}),Object(c.jsx)("li",{className:"logout",children:Object(c.jsx)("button",{onClick:r,children:"Logout"})})]})})})},Jn=t.p+"static/media/copy.713b200d.svg",Wn=function(e){var n=e.value,t=Object(a.useState)(!1),r=Object(x.a)(t,2),i=r[0],s=r[1],o=Object(a.useRef)(null);return Object(c.jsxs)("span",{className:"copyButton",children:[Object(c.jsx)("button",{type:"button",onClick:function(){s(!0),o.current&&o.current.select(),document.execCommand("copy"),setTimeout((function(){s(!1)}),1e3)},className:"icon",children:Object(c.jsx)("img",{src:Jn,alt:"Copy text"})}),i&&Object(c.jsx)("span",{className:"response",children:"Copied to clipboard."}),Object(c.jsx)("input",{type:"text",className:"copyText",defaultValue:n,ref:o,style:{position:"absolute",left:"-10000px"}})]})};function zn(){var e=Object(u.a)(["\n  padding: 25px 50px;\n"]);return zn=function(){return e},e}function Yn(){var e=Object(u.a)(["\n  float: right;\n"]);return Yn=function(){return e},e}function qn(){var e=Object(u.a)(["\n  display: inline-block;\n  font-weight: 600 !important;\n  font-size: 16px;\n  line-height: 19px;\n  color: #50555c;\n  margin: 0;\n  padding: 0;\n"]);return qn=function(){return e},e}function Zn(){var e=Object(u.a)(["\n  padding: 10px 25px 10px 25px;\n  border-bottom: 1px solid #F2F2F2;\n  margin: 0 0 15px 0;\n"]);return Zn=function(){return e},e}function $n(){var e=Object(u.a)(["\n  background: #FFFFFF;\n  box-shadow: 0px 4px 20px rgba(145, 145, 145, 0.1);\n  border-radius: 20px;\n  padding: 10px 0;\n"]);return $n=function(){return e},e}var Qn=b.a.div($n()),Xn=b.a.div(Zn()),et=b.a.p(qn()),nt=b.a.div(Yn()),tt=b.a.div(zn()),ct=function(e){var n=e.title,t=e.headerRight,a=e.children,r=e.className;return Object(c.jsxs)(Qn,{className:"panel ".concat(r),children:[n&&Object(c.jsxs)(Xn,{className:"panel-header",children:[Object(c.jsx)(et,{className:"panel-title",children:n}),t&&Object(c.jsx)(nt,{className:"panel-right",children:t})]}),Object(c.jsx)(tt,{className:"panel-content",children:a})]})},at=function(e){var n=e.address,t=e.chainId,a=oe(n,t);return Object(c.jsx)("div",{className:"container",children:Object(c.jsx)("div",{className:"column",children:Object(c.jsx)(ct,{title:"Persona information",className:"identity-information",children:Object(c.jsxs)("div",{className:"container",children:[Object(c.jsxs)("div",{className:"column",children:[Object(c.jsx)("h2",{children:"Persona DID"}),Object(c.jsxs)("p",{className:"value",children:[Object(c.jsx)(gn,{hoverContent:a,children:le(a)}),Object(c.jsx)(Wn,{value:a})]})]}),Object(c.jsxs)("div",{className:"column",children:[Object(c.jsx)("h2",{children:"Persona Address"}),Object(c.jsxs)("p",{className:"value",children:[n,Object(c.jsx)(Wn,{value:n})]})]})]})})})})},rt=t.p+"static/media/data-vault.c8c9253d.svg";function it(){var e=Object(u.a)(["\n  display: block;\n  height: 100%;\n  border-top-right-radius: 4px;\n  border-bottom-right-radius: 4px;\n  border-top-left-radius: 8px;\n  border-bottom-left-radius: 8px;\n  background-color: #47C4E1;\n  box-shadow:\n    inset 0 2px 9px  rgba(255,255,255,0.3),\n    inset 0 -2px 6px rgba(0,0,0,0.4);\n  position: relative;\n  overflow: hidden;\n  }\n"]);return it=function(){return e},e}function st(){var e=Object(u.a)(["\n  height: 20px;\n  position: relative;\n  background: #EAEAEA;\n  -moz-border-radius: 25px;\n  -webkit-border-radius: 25px;\n  border-radius: 12.5px;\n  padding: 10px;\n  box-shadow: inset 0 -1px 1px rgba(255,255,255,0.3);\n"]);return st=function(){return e},e}var ot=b.a.div(st()),lt=b.a.div(it()),dt=function(e){var n=e.total,t=e.value,a=t<n?Math.ceil(100*t/n):100;return Object(c.jsx)(ot,{className:"progress-wrapper",children:Object(c.jsx)(lt,{className:"progress",style:{width:"".concat(a,"%")}})})},ut=function(e){var n=e.storage,t=e.handleButton;return n?Object(c.jsxs)(ct,{title:Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("img",{src:rt,alt:"DataVault"})," DataVault Summary"]}),className:"dataVault",children:[Object(c.jsx)("h2",{children:"Storage Usage"}),Object(c.jsxs)("div",{className:"container",children:[Object(c.jsx)("div",{className:"columnDouble",children:Object(c.jsx)(gn,{className:"tooltip-progress",hoverContent:Object(c.jsxs)("p",{children:[n.used," of ",(n.available+n.used).toLocaleString()," bytes"]}),children:Object(c.jsx)(dt,{total:n.available+n.used,value:n.used})})}),Object(c.jsx)("div",{className:"column",children:Object(c.jsx)(h,{onClick:t,className:"turquoise panel-button",children:"DataVault"})})]})]}):Object(c.jsx)(c.Fragment,{})},bt=function(e){var n=e.name,t=e.balance,a=e.symbol,r=e.className,i=e.conversion;return Object(c.jsxs)("div",{className:r?"balance-row ".concat(r):"balance-row",children:[Object(c.jsx)("h2",{children:n}),Object(c.jsxs)("div",{children:[Object(c.jsx)("span",{className:"balance",children:function(e){if(!e)return e;var n=parseFloat(e.toFixed(6));return n===e?e:n}(t)}),Object(c.jsx)("span",{className:"symbol",children:a}),i&&t&&Object(c.jsxs)("span",{className:"conversion",children:["$",Math.round(i*t*100)/100," USD"]})]})]})},jt=function(e){var n=e.balance,t=e.chainId,a=e.featuredToken,r=e.converstion,i=e.handleButton;return n&&t?Object(c.jsxs)(ct,{title:Object(c.jsx)(c.Fragment,{children:"DeFi Summary"}),className:"defi",children:[Object(c.jsx)("div",{className:"container balance",children:Object(c.jsxs)("div",{className:"columnDobule",children:[Object(c.jsx)(bt,{name:"Balance",balance:n,symbol:H(t),conversion:r||void 0}),a&&Object(c.jsx)(bt,{name:a.name,balance:a.balance,symbol:a.symbol,conversion:a.conversion||void 0})]})}),Object(c.jsx)(h,{onClick:i,className:"turquoise",children:"More Defi"})]}):Object(c.jsx)(c.Fragment,{})},mt=function(e){var n=e.chainId,t=e.address,a=e.storage,r=e.balance,i=e.featuredTokens,s=e.converstion,o=e.changeScreen;return Object(c.jsxs)("div",{className:"content dashboard",children:[t&&n&&Object(c.jsx)(at,{address:t,chainId:n}),Object(c.jsxs)("div",{className:"container",children:[Object(c.jsx)("div",{className:"column",children:Object(c.jsx)(jt,{balance:r,converstion:s,chainId:n,featuredToken:i?i[0]:void 0,handleButton:function(){return o(Mn.DEFI)}})}),Object(c.jsx)("div",{className:"column",children:Object(c.jsx)(ut,{storage:a,handleButton:function(){return o(Mn.DATAVAULT)}})})]})]})},ht=Object(d.b)((function(e){return{address:e.identity.address,chainId:e.identity.chainId,tokens:e.defi.tokens,balance:e.defi.balance,converstion:e.defi.conversion,featuredTokens:e.defi.tokens.filter((function(e){return"RIF"===e.symbol||"tRIF"===e.symbol})),storage:e.datavault.storage}}),(function(e){return{addCustomToken:function(n,t,c,a){return e(Pe(n,t,c,a))}}}),(function(e,n,t){return Object(l.a)(Object(l.a)(Object(l.a)({},e),n),t)}))(mt),Ot=t(111),ft=t.p+"static/media/declarative-details.0f849d72.svg",xt=function(e){var n=e.show,t=e.className,r=e.onConfirm,i=e.onClose,s=e.disabled,o=e.isLoading,d=e.error,u=e.initValue,b=e.inputType,j=e.strings,m=Object(a.useState)(""),O=Object(x.a)(m,2),f=O[0],p=O[1],v={onChange:function(e){return p(e.target.value)},disabled:s,className:"editable line",placeholder:null===j||void 0===j?void 0:j.placeholder,value:f||""};return Object(a.useEffect)((function(){p(u||"")}),[u]),Object(c.jsxs)(Vn,{show:n,className:t,onClose:i,title:(null===j||void 0===j?void 0:j.title)||"Edit Value",children:[Object(c.jsx)("p",{className:"intro-text",children:null===j||void 0===j?void 0:j.intro}),Object(c.jsxs)("p",{children:[Object(c.jsx)("label",{children:(null===j||void 0===j?void 0:j.label)||"Value:"}),"textarea"===b?Object(c.jsx)("textarea",Object(l.a)({},v)):Object(c.jsx)("input",Object(l.a)({type:"text"},v))]}),Object(c.jsx)("p",{children:Object(c.jsx)(h,{onClick:function(){return r(f)},disabled:s,className:"submit",children:(null===j||void 0===j?void 0:j.submit)||"Submit"})}),o&&Object(c.jsx)(Bn,{}),d&&Object(c.jsx)("div",{className:"error container",children:Object(c.jsx)("div",{className:"alert error",children:d})})]})},pt=t.p+"static/media/trash.4ceb20aa.svg",vt=function(e){var n=e.show,t=e.title,a=e.disabled,r=e.className,i=e.error,s=e.onConfirm,o=e.onClose,l=e.onDeny,d=e.strings;return Object(c.jsxs)(Vn,{show:n,className:r,onClose:o,title:t||"Are you sure?",children:[Object(c.jsx)("p",{children:(null===d||void 0===d?void 0:d.text)||"Are you sure?"}),Object(c.jsxs)("div",{className:"container",children:[Object(c.jsx)("div",{className:"column",children:Object(c.jsx)(h,{onClick:l||o,className:"deny gray full",disabled:a||!1,children:(null===d||void 0===d?void 0:d.deny)||"Deny"})}),Object(c.jsx)("div",{className:"column",children:Object(c.jsx)(h,{onClick:s,className:"confirm gray full",disabled:a||!1,children:(null===d||void 0===d?void 0:d.confirm)||"Confirm"})})]}),i&&Object(c.jsx)("div",{className:"alert error",children:i})]})},gt=function(e){var n=e.itemKey,t=e.item,r=e.deleteValue,i=Object(a.useState)(!1),s=Object(x.a)(i,2),o=s[0],l=s[1],d=Object(a.useState)(null),u=Object(x.a)(d,2),b=u[0],j=u[1],m=Object(a.useState)(!1),h=Object(x.a)(m,2),O=h[0],f=h[1];return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("button",{disabled:o,className:"icon delete",onClick:function(){return f(!0)},children:Object(c.jsx)("img",{src:pt,alt:"Delete Item"})}),Object(c.jsx)(vt,{show:O,onClose:function(){return f(!1)},onConfirm:function(){l(!0),j(null),r(n,t.id).then((function(){return f(!1)})).catch((function(e){return j(e.message)})).finally((function(){return l(!1)}))},disabled:o,strings:{text:"Do you want to delete this item from the data vault?",confirm:"Yes",deny:"No"},className:"delete-modal",error:b})]})},yt=function(e){var n=e.handleGetContent,t=e.disabled;return Object(c.jsx)("div",{className:"decrypt",children:Object(c.jsx)(h,{className:"gray small",onClick:n,disabled:t,children:"Download"})})},Nt=function(e){var n=e.keyError;return Object(c.jsxs)("p",{className:"alert error",children:["This content is encrypted, and your wallet is unable to decrypt the key ",Object(c.jsx)("em",{children:n}),"."]})},wt=function(e){var n=e.details,t=e.deleteValue,r=e.swapValue,i=e.getKeyContent,s=Object(a.useState)(!1),o=Object(x.a)(s,2),l=o[0],d=o[1],u=Object(a.useState)(null),b=Object(x.a)(u,2),j=b[0],m=b[1],h=Object(a.useState)(null),O=Object(x.a)(h,2),f=O[0],p=O[1],v=Object(a.useState)(null),g=Object(x.a)(v,2),y=g[0],N=g[1],w=Object(a.useState)([]),D=Object(x.a)(w,2),C=D[0],k=D[1];return Object(c.jsxs)(ct,{title:Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("img",{src:ft})," Declarative Details"]}),className:"display",children:[function(){if(0===Object.keys(n).length)return!1;var e=!1;for(var t in n)0===n[t].length&&(e=!0);return e}()&&Object(c.jsx)("p",{className:"intro",children:"Click on the download button to decrypt the content. Your wallet will request to decrypt each piece of content."}),f&&Object(c.jsx)(Nt,{keyError:f}),Object(c.jsxs)("table",{children:[Object(c.jsx)("thead",{children:Object(c.jsxs)("tr",{children:[Object(c.jsx)("th",{className:"type",children:"Type"}),Object(c.jsx)("th",{className:"content",children:"Content"})]})}),Object(c.jsx)("tbody",{children:Object.keys(n).map((function(e){return Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{children:e.replace("DD_","")}),Object(c.jsxs)("td",{children:[0===n[e].length&&Object(c.jsx)(yt,{handleGetContent:function(){return function(e){p(null),k([].concat(Object(Ot.a)(C),[e])),i(e).catch((function(){return p(e)})).finally((function(){k(C.filter((function(n){return n!==e})))}))}(e)},disabled:C.includes(e)}),n[e].map((function(n){return Object(c.jsxs)("div",{className:"content-row",children:[Object(c.jsx)("div",{className:"content break-all",children:Object(c.jsx)("p",{children:n.content})}),Object(c.jsxs)("div",{className:"options",children:[Object(c.jsx)("button",{disabled:l,className:"icon edit",onClick:function(){m(null),N({key:e,item:n})},children:Object(c.jsx)("img",{src:Ln,alt:"Edit item"})}),Object(c.jsx)(gt,{itemKey:e,item:n,deleteValue:t})]})]},n.id)}))]})]},e)}))})]}),Object(c.jsx)(xt,{show:null!==y,onClose:function(){return N(null)},onConfirm:function(e){return y&&function(e,n){if(e===n.item.content)return m("New value is the same as the old.");d(!0),m(null),r(n.key,e,n.item.id).then((function(){d(!1),N(null)})).catch((function(e){return m(e.message)})).finally((function(){return d(!1)}))}(e,y)},disabled:l,strings:{title:"Edit value in the DataVault",label:"New value",submit:"Update"},className:"edit-modal",initValue:y?y.item.content:"",inputType:"textarea",error:j})]})},Dt=t.p+"static/media/upload.f7f9ea67.svg",Ct=function(e){var n=e.addDeclarativeDetail,t=e.providerName,r=Object(a.useState)(""),i=Object(x.a)(r,2),s=i[0],o=i[1],l=Object(a.useState)(""),d=Object(x.a)(l,2),u=d[0],b=d[1],j=Object(a.useState)(!1),O=Object(x.a)(j,2),f=O[0],p=O[1],v=Object(a.useState)(null),g=Object(x.a)(v,2),y=g[0],N=g[1],w=Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("img",{src:Dt})," Add New Declarative Details"]});return Object(c.jsxs)(ct,{title:w,className:"add-declarative",children:[t!==m.METAMASK&&Object(c.jsxs)("div",{className:"alert warning",children:[Object(c.jsx)("h2",{children:"Warning!"}),Object(c.jsx)("p",{children:"Your wallet does not support encrypted content in your data vault. You can still add content, but it will be saved as plaintext."})]}),Object(c.jsxs)("div",{className:"container",children:[Object(c.jsxs)("div",{className:"column",children:[Object(c.jsx)("p",{className:"title",children:"Type"}),Object(c.jsx)("input",{type:"text",className:"line type",value:s,onChange:function(e){return o(e.target.value)},disabled:f,placeholder:"Content type"})]}),Object(c.jsxs)("div",{className:"columnDouble",children:[Object(c.jsx)("p",{className:"title",children:"Content"}),Object(c.jsx)("textarea",{className:"line content",value:u,onChange:function(e){return b(e.target.value)},disabled:f,placeholder:"Content"})]}),Object(c.jsx)("div",{className:"column submitColumn",children:Object(c.jsx)(h,{className:"submit turquoise",onClick:function(){if(p(!0),N(null),""===s||""===u)return p(!1),N("Type and Content cannot be empty.");n("DD_".concat(s.toUpperCase()),u).then((function(){p(!1),b(""),o("")})).catch((function(e){p(!1),N(e.message)}))},disabled:f,children:"Add Data"})})]}),y&&Object(c.jsx)("div",{className:"alert error",children:Object(c.jsx)("p",{children:y})}),f&&Object(c.jsx)(Bn,{})]})},kt=r.a.createContext({provider:null,dvClient:null,reset:function(){}}),Et=function(e){var n=e.children,t=Object(a.useState)(null),r=Object(x.a)(t,2),i=r[0],s=r[1],o=Object(a.useState)(null),l=Object(x.a)(o,2),d=l[0],u=l[1],b={provider:i,setProvider:function(e){return s(e)},dvClient:d,setDvClient:function(e){return u(e)},reset:function(){s(null),u(null)}};return Object(c.jsx)(kt.Provider,{value:b,children:n})},It=t(321),St=function(e){var n=e.jwt,t=e.options,r=Object(a.useState)(!1),i=Object(x.a)(r,2),s=i[0],o=i[1],l=Object(a.useState)(null),d=Object(x.a)(l,2),u=d[0],b=d[1],j=Object(a.useState)(""),m=Object(x.a)(j,2),h=m[0],O=m[1];return Object(a.useEffect)((function(){try{O(JSON.stringify(Object(It.a)(n),null,2))}catch(e){b(e.message),o(!0)}}),[n]),Object(c.jsxs)("div",{className:"content-row",children:[Object(c.jsxs)("div",{className:"content",children:[h&&Object(c.jsx)("div",{className:"break-all",children:Object(c.jsx)("textarea",{defaultValue:h,disabled:!0})}),u&&Object(c.jsxs)("div",{className:"alert error",children:[Object(c.jsx)("strong",{children:"Could not decode credential!"}),Object(c.jsx)("br",{}),Object(c.jsx)("em",{children:"The raw data is displayed below."})]}),s&&Object(c.jsx)("div",{className:"raw break-all",children:n})]}),!u&&Object(c.jsxs)("div",{className:"options",children:[Object(c.jsxs)("button",{className:"icon raw",onClick:function(){return o(!s)},children:[s?"Hide":"View"," Raw"]}),t]})]})},At=t.p+"static/media/credential.436c18a7.svg",Tt=function(e){var n=e.jwt,t=e.createPresentation,r={status:"NONE",message:""},i=Object(a.useState)(r),s=Object(x.a)(i,2),o=s[0],l=s[1],d=function(){l({status:"LOADING",message:""}),t(n).then((function(e){return l({status:"DONE",message:e})})).catch((function(e){return l({status:"ERROR",message:e.message})}))};return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("button",{className:"icon",onClick:d,children:"Present"}),Object(c.jsxs)(Vn,{show:"NONE"!==o.status,onClose:function(){return l(r)},title:"Present Credential",children:["LOADING"===o.status&&Object(c.jsx)(Bn,{}),"DONE"===o.status&&Object(c.jsxs)("div",{children:[Object(c.jsx)("h2",{children:"Raw JWT"}),Object(c.jsx)("textarea",{defaultValue:o.message,className:"jwt"}),Object(c.jsx)(Wn,{value:o.message})]}),"ERROR"===o.status&&Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("p",{className:"alert error",children:o.message}),Object(c.jsx)("p",{children:Object(c.jsx)(h,{onClick:d,children:"Try Again"})})]})]})]})},Ft=function(e){var n=e.credentials,t=e.getKeyContent,r=e.deleteValue,i=e.createPresentation,s=Object(a.useState)([]),o=Object(x.a)(s,2),l=o[0],d=o[1],u=Object(a.useState)(null),b=Object(x.a)(u,2),j=b[0],m=b[1];return Object(c.jsxs)(ct,{title:Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("img",{src:At})," Credentials"]}),className:"display credentials",children:[j&&Object(c.jsx)(Nt,{keyError:j}),Object(c.jsxs)("table",{children:[Object(c.jsx)("thead",{children:Object(c.jsxs)("tr",{children:[Object(c.jsx)("th",{className:"type",children:"Type"}),Object(c.jsx)("th",{className:"content",children:"Content"})]})}),Object(c.jsx)("tbody",{children:Object.keys(n).map((function(e){return Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{children:e}),Object(c.jsxs)("td",{children:[Object(c.jsx)("ul",{children:n[e].map((function(n){return Object(c.jsx)("li",{children:Object(c.jsx)(St,{jwt:n.content,options:Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("div",{children:Object(c.jsx)(Tt,{jwt:n.content,createPresentation:i})}),Object(c.jsx)("div",{children:Object(c.jsx)(gt,{item:n,itemKey:e,deleteValue:r})})]})})},n.id)}))}),0===n[e].length&&Object(c.jsx)(yt,{handleGetContent:function(){return function(e){d([].concat(Object(Ot.a)(l),[e])),m(null),t(e).catch((function(){return m(e)})).finally((function(){return d(l.filter((function(n){return n!==e})))}))}(e)},disabled:l.includes(e)})]})]},e)}))})]})]})},Rt=t.p+"static/media/download.b2edd61f.svg",Kt=function(e){var n=e.handleDownload,t={isLoading:!1,isError:null},r=Object(a.useState)({isLoading:!1,isError:null}),i=Object(x.a)(r,2),s=i[0],o=i[1];return Object(c.jsxs)(ct,{title:Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("img",{src:Rt})," Download Backup"]}),children:[Object(c.jsx)("p",{children:"Download a backup file of all the keys and IPFS hashes that are stored in the DataVault."}),Object(c.jsx)("p",{children:Object(c.jsx)(h,{onClick:function(){o(Object(l.a)(Object(l.a)({},t),{},{isLoading:!0})),n().then((function(){return o(t)})).catch((function(e){return o(Object(l.a)(Object(l.a)({},t),{},{isError:e.message}))}))},disabled:s.isLoading,className:"small",children:"Download Backup"})}),s.isLoading&&Object(c.jsx)(Bn,{}),s.isError&&Object(c.jsx)("div",{className:"alert error",children:s.isError})]})},Vt=t(322),_t=function(e){var n=e.addDeclarativeDetail,t=e.declarativeDetails,r=e.credentials,i=e.deleteValue,s=e.swapValue,o=e.downloadBackup,l=e.getKeyContent,d=Object(a.useContext)(kt),u=function(e,n){return d.dvClient&&i(d.dvClient,e,n)},b=function(e){return d.dvClient&&l(d.dvClient,e)};return Object(c.jsxs)("div",{className:"content data-vault",children:[Object(c.jsx)("div",{className:"container",children:Object(c.jsx)("div",{className:"column",children:Object(c.jsx)(Ct,{addDeclarativeDetail:function(e,t){return d.dvClient&&n(d.dvClient,e,t)},providerName:C(d.provider)})})}),Object(c.jsx)("div",{className:"container",children:Object(c.jsx)("div",{className:"column",children:Object(c.jsx)(wt,{details:t,deleteValue:u,swapValue:function(e,n,t){return d.dvClient&&s(d.dvClient,e,n,t)},getKeyContent:b})})}),Object(c.jsx)("div",{className:"container",children:Object(c.jsx)("div",{className:"column",children:Object(c.jsx)(Ft,{credentials:r,deleteValue:u,getKeyContent:b,createPresentation:function(e){return function(e,n){return N(e).then((function(t){var c=Object(x.a)(t,2),a=c[0],r=c[1],i={did:oe(a,r),signer:function(n){return e.request({method:"personal_sign",params:[n,a]})}},s={vp:{"@context":["https://www.w3.org/2018/credentials/v1"],type:["VerifiablePresentation"],verifiableCredential:[n],nbf:Math.floor((new Date).getTime()/1e3),exp:Math.floor((new Date).getTime()/1e3)+3600}};return Object(Vt.createVerifiablePresentationJwt)(s,i)}))}(d.provider,e)}})})}),Object(c.jsxs)("div",{className:"container",children:[Object(c.jsx)("div",{className:"column",children:Object(c.jsx)(Kt,{handleDownload:function(){return d.dvClient&&o(d.dvClient)}})}),Object(c.jsx)("div",{className:"column"})]})]})},Lt=Object(d.b)((function(e){return{declarativeDetails:e.datavault.declarativeDetails,credentials:e.datavault.credentials}}),(function(e){return{addDeclarativeDetail:function(n,t,c){return e(tn(n,t,c))},deleteValue:function(n,t,c){return e(cn(n,t,c))},swapValue:function(n,t,c,a){return e(an(n,t,c,a))},downloadBackup:function(e){return function(e){return e.getBackup().then((function(e){return JSON.stringify(e)})).then((function(e){var n=document.createElement("a");n.href=URL.createObjectURL(new Blob([e],{type:"text/plain;charset=utf-8"})),n.download="dataVaultBackup.txt",document.body.appendChild(n),n.click(),n.remove()}))}(e)},getKeyContent:function(n,t){return e(function(e,n){return function(t){return e.get({key:n}).then((function(e){return e})).then((function(e){return t(ze({key:n,content:e}))}))}}(n,t))}}}))(_t),Pt=t(38),Mt=t.p+"static/media/delegate.618299c9.svg",Bt=function(e){var n=e.delegates,t=e.chainId,r=e.addDelegate,i=e.isOwner,s=Object(a.useState)(!1),o=Object(x.a)(s,2),l=o[0],d=o[1],u=Object(a.useState)(!1),b=Object(x.a)(u,2),j=b[0],m=b[1],h=Object(a.useState)(null),O=Object(x.a)(h,2),f=O[0],p=O[1],v=function(){p(null),m(!1)};return Object(c.jsxs)(ct,{title:Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("img",{src:Mt})," Delegate Identity"]}),headerRight:i&&Object(c.jsx)("button",{onClick:function(){return d(!0)},children:"Add Delegate"}),children:[Object(c.jsx)("h2",{children:"Delegates"}),Object(c.jsxs)("ul",{className:"value",children:[0===(null===n||void 0===n?void 0:n.length)&&Object(c.jsx)("li",{children:Object(c.jsx)("em",{children:"No delegates for this persona."})}),null===n||void 0===n?void 0:n.map((function(e){if(!e.ethereumAddress||!t)return Object(c.jsx)(c.Fragment,{});var n=oe(e.ethereumAddress,t);return Object(c.jsx)("li",{children:Object(c.jsx)(gn,{hoverContent:n,children:le(n)})},n)}))]}),Object(c.jsx)(xt,{show:l,onClose:function(){j||(d(!1),v())},className:"delegate-identity",onConfirm:function(e){return v(),Object(Pt.isValidAddress)(e)?e===e.toLowerCase()||Object(Pt.isValidChecksumAddress)(e,t)?0!==(null===n||void 0===n?void 0:n.filter((function(n){var t;return-1!==(null===(t=n.ethereumAddress)||void 0===t?void 0:t.indexOf(e.toLowerCase()))})).length)?(v(),p("This address is already a delegate.")):(m(!0),void r(e).then((function(){d(!1),v()})).catch((function(e){v(),p(e.message)}))):(v(),p("Checksum is incorrect.")):(v(),p("Invalid Address"))},disabled:j,error:f,initValue:"",isLoading:j,strings:{title:"Delegate Identity",intro:"Controllers can manage the identity but they are not the owners. Only the owners can transfer identities.",label:"Delegate to",submit:"Add delegate",placeholder:"Address"}})]})},Ut=function(e){var n=e.owner,t=e.isOwner,r=e.chainId,i=e.changeOwner,s=Object(a.useState)(!1),o=Object(x.a)(s,2),l=o[0],d=o[1],u=Object(a.useState)(!1),b=Object(x.a)(u,2),j=b[0],m=b[1],h=Object(a.useState)(null),O=Object(x.a)(h,2),f=O[0],p=O[1],v=function(){p(null),m(!1)},g=n&&r&&oe(n,r);return Object(c.jsxs)(ct,{title:Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("img",{src:_n})," Persona owner"]}),headerRight:t&&Object(c.jsx)("button",{onClick:function(){return d(!0)},children:"Transfer"}),children:[Object(c.jsx)("h2",{children:"Owner"}),Object(c.jsx)("p",{className:"value",children:g&&Object(c.jsx)(gn,{hoverContent:g,children:le(g)})}),Object(c.jsx)(xt,{show:l,className:"change-owner",onConfirm:function(e){return v(),Object(Pt.isValidAddress)(e)?e===e.toLowerCase()||Object(Pt.isValidChecksumAddress)(e,r)?(m(!0),void i(e).then((function(){d(!1),v()})).catch((function(e){v(),p(e.message)}))):(v(),p("Checksum is incorrect.")):(v(),p("Invalid Address"))},onClose:function(){j||(d(!1),v())},disabled:j,isLoading:j,error:f,initValue:"",strings:{title:"Transfer Persona Owner",intro:"Be aware that once you transfer the identity, you will lose ownership and can no longer manage the identity.",label:"Transfer to",placeholder:"address",submit:"Transfer"}})]})},Ht=t.p+"static/media/key.6bad30f3.svg",Gt=function(e){var n=e.publicKeys,t=e.addKey,r=e.isOwner,i=Object(a.useState)(!1),s=Object(x.a)(i,2),o=s[0],d=s[1],u=Object(a.useState)(!1),b=Object(x.a)(u,2),j=b[0],m=b[1],O=Object(a.useState)(null),f=Object(x.a)(O,2),p=f[0],v=f[1],g={algorithm:"secp256k1",purpose:"veriKey",encoding:"hex",validity:"86400",value:""},y=Object(a.useState)(g),N=Object(x.a)(y,2),w=N[0],D=N[1],C=function(e){return{id:e,className:"line",onChange:function(e){return D(Object(l.a)(Object(l.a)({},w),{},Object(Dn.a)({},e.target.id,e.target.value)))}}};return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsxs)(ct,{title:Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("img",{src:Ht})," Public Keys"]}),headerRight:r&&Object(c.jsx)("button",{onClick:function(){return d(!0)},children:"Add Public Key"}),children:[Object(c.jsx)("h2",{children:"Public Keys"}),Object(c.jsxs)("ul",{children:[(!n||0===n.length)&&Object(c.jsx)("li",{children:Object(c.jsx)("em",{children:"No public keys"})}),null===n||void 0===n?void 0:n.map((function(e){return Object(c.jsxs)("li",{children:[Object(c.jsx)("strong",{children:e.type}),Object(c.jsx)("br",{})," ",e.publicKeyBase64||e.publicKeyHex]},e.id)}))]})]}),Object(c.jsx)(Vn,{title:"Add Public Key",show:o,onClose:function(){return d(!1)},children:Object(c.jsxs)("fieldset",{children:[Object(c.jsxs)("p",{children:[Object(c.jsx)("label",{children:"Key Algorithm"}),Object(c.jsxs)("select",Object(l.a)(Object(l.a)({},C("algorithm")),{},{value:w.algorithm,children:[Object(c.jsx)("option",{value:"secp256k1",children:"secp256k1"}),Object(c.jsx)("option",{value:"rsa",children:"RSA"}),Object(c.jsx)("option",{value:"Ed25519",children:"Ed25519"})]}))]}),Object(c.jsxs)("p",{children:[Object(c.jsx)("label",{htmlFor:"purpose",children:"Key Purpose"}),Object(c.jsxs)("select",Object(l.a)(Object(l.a)({},C("purpose")),{},{value:w.purpose,children:[Object(c.jsx)("option",{value:"veriKey",children:"veriKey"}),Object(c.jsx)("option",{value:"sigAuth",children:"sigAuth"})]}))]}),Object(c.jsxs)("p",{children:[Object(c.jsx)("label",{htmlFor:"encoding",children:"Encoding"}),Object(c.jsxs)("select",Object(l.a)(Object(l.a)({},C("encoding")),{},{value:w.encoding,children:[Object(c.jsx)("option",{value:"hex",children:"hex"}),Object(c.jsx)("option",{value:"base64",children:"base64"})]}))]}),Object(c.jsxs)("p",{children:[Object(c.jsxs)("label",{htmlFor:"validity",children:["Validity ",Object(c.jsx)("span",{children:"(in seconds)"})]}),Object(c.jsx)("input",Object(l.a)(Object(l.a)({},C("validity")),{},{type:"text",value:w.validity}))]}),Object(c.jsxs)("p",{children:[Object(c.jsx)("label",{children:"Key"}),Object(c.jsx)("textarea",Object(l.a)({},C("value")))]}),Object(c.jsx)(h,{className:"submit",disabled:j,onClick:function(){if(""===w.value)return v("Value can not be empty");m(!0),v(null),t("did/pub/".concat(w.algorithm,"/").concat(w.purpose,"/").concat(w.encoding),w.value,parseInt(w.validity)).then((function(){m(!1),d(!1),D(g)})).catch((function(e){m(!1),v(e.message)}))},children:"Add Public Key"}),p&&Object(c.jsx)("div",{className:"alert error",children:p}),j&&Object(c.jsx)(Bn,{})]})})]})},Jt=t.p+"static/media/computer.de8f038b.svg",Wt=function(e){var n=e.endpoints,t=e.addEndpoint,r=e.isOwner,i=Object(a.useState)(!1),s=Object(x.a)(i,2),o=s[0],d=s[1],u=Object(a.useState)(!1),b=Object(x.a)(u,2),j=b[0],m=b[1],O=Object(a.useState)(null),f=Object(x.a)(O,2),p=f[0],v=f[1],g={name:"",url:"",validity:"86400"},y=Object(a.useState)(g),N=Object(x.a)(y,2),w=N[0],D=N[1],C=function(e){return{type:"text",className:"line",id:e,onChange:function(e){return D(Object(l.a)(Object(l.a)({},w),{},Object(Dn.a)({},e.target.id,e.target.value)))},disabled:j,placeholder:e}};return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsxs)(ct,{title:Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("img",{src:Jt})," Service Endpoints"]}),headerRight:r&&Object(c.jsx)("button",{onClick:function(){return d(!0)},children:"Add Endpoint"}),children:[Object(c.jsx)("h2",{children:"Active Endpoints"}),Object(c.jsxs)("ul",{children:[(!n||0===(null===n||void 0===n?void 0:n.length))&&Object(c.jsx)("li",{children:Object(c.jsx)("em",{children:"No service endpoints setup."})}),null===n||void 0===n?void 0:n.map((function(e){return Object(c.jsxs)("li",{className:"endpoint",children:[Object(c.jsx)("strong",{children:e.type})," - ",e.serviceEndpoint]},e.id||e.type)}))]})]}),Object(c.jsxs)(Vn,{show:o,title:"Add Service Endpoint",onClose:function(){return d(!1)},children:[Object(c.jsxs)("fieldset",{children:[Object(c.jsxs)("p",{children:[Object(c.jsx)("label",{htmlFor:"name",children:"Name"}),Object(c.jsx)("input",Object(l.a)(Object(l.a)({},C("name")),{},{value:w.name}))]}),Object(c.jsxs)("p",{children:[Object(c.jsx)("label",{htmlFor:"url",children:"URL"}),Object(c.jsx)("input",Object(l.a)(Object(l.a)({},C("url")),{},{value:w.url}))]}),Object(c.jsxs)("p",{children:[Object(c.jsxs)("label",{htmlFor:"validity",children:["Validity ",Object(c.jsx)("span",{children:"(in seconds)"})]}),Object(c.jsx)("input",Object(l.a)(Object(l.a)({},C("validity")),{},{value:w.validity}))]})]}),Object(c.jsx)(h,{className:"submit",disabled:j,onClick:function(){return m(!0),v(null),""===w.name||""===w.url?(m(!1),v("Name and URL are required fields.")):-1!==w.name.indexOf(" ")?(m(!1),v("Name should not contain spaces.")):void t("did/svc/".concat(w.name),w.url,parseInt(w.validity)).then((function(){m(!1),d(!1),D(g)})).catch((function(e){m(!1),v(e.message)}))},children:"Add Endpoint"}),p&&Object(c.jsx)("div",{className:"alert error",children:p}),j&&Object(c.jsx)(Bn,{})]})]})},zt=function(e){var n=e.owner,t=e.address,r=e.chainId,i=e.delegates,s=e.service,o=e.publicKeys,l=e.changeOwner,d=e.addDelegate,u=e.addAttribute,b=(null===t||void 0===t?void 0:t.toLowerCase())===(null===n||void 0===n?void 0:n.toLowerCase()),j=Object(a.useContext)(kt),m=function(e,n,t){return u(null===j||void 0===j?void 0:j.provider,e,n,t)};return Object(c.jsxs)("div",{className:"content identity",children:[Object(c.jsxs)("div",{className:"container",children:[Object(c.jsx)("div",{className:"column",children:Object(c.jsx)(Ut,{owner:n,chainId:r,isOwner:b,changeOwner:function(e){return l(null===j||void 0===j?void 0:j.provider,e)}})}),Object(c.jsx)("div",{className:"column",children:Object(c.jsx)(Bt,{delegates:i,chainId:r,addDelegate:function(e){return d(null===j||void 0===j?void 0:j.provider,e)},isOwner:b})})]}),Object(c.jsxs)("div",{className:"container",children:[Object(c.jsx)("div",{className:"column",children:Object(c.jsx)(Gt,{publicKeys:o,addKey:m,isOwner:b})}),Object(c.jsx)("div",{className:"column",children:Object(c.jsx)(Wt,{endpoints:s,addEndpoint:m,isOwner:b})})]})]})},Yt=function(e){var n=e.publicKey.filter((function(e){return e.id.endsWith("#controller")}))[0];return"undefined"===typeof n?null:n.ethereumAddress},qt=Object(d.b)((function(e){var n,t;return{address:e.identity.address,chainId:e.identity.chainId,owner:Yt(e.ethrdid.didDocument),delegates:null===(n=e.ethrdid.didDocument.publicKey)||void 0===n?void 0:n.filter((function(e){return!e.id.endsWith("controller")})),service:e.ethrdid.didDocument.service,publicKeys:null===(t=e.ethrdid.didDocument.publicKey)||void 0===t?void 0:t.filter((function(e){return e.publicKeyBase64||e.publicKeyHex}))}}),(function(e){return{changeOwner:function(n,t){return e(function(e,n){return function(t){return new Promise((function(c,a){var r=function(n){return n.error?a(n.error):c(t(be(e)))};N(e).then((function(t){var c=Object(x.a)(t,2),i=c[0],s=c[1];return new X.a({address:i,provider:e,registry:B(parseInt(s))}).changeOwner(n.toLowerCase()).then((function(n){return w(e,n,r)})).catch((function(e){return a(e)}))}))}))}}(n,t))},addDelegate:function(n,t){return e(function(e,n){return function(t){return new Promise((function(c,a){var r=function(n){return n.error?a(n.error):c(t(be(e)))};N(e).then((function(t){var c=Object(x.a)(t,2),i=c[0],s=c[1];return new X.a({address:i,provider:e,registry:B(parseInt(s))}).addDelegate(n,{delegateType:"0x73696741757468"}).then((function(n){return w(e,n,r)})).catch((function(e){return a(e)}))}))}))}}(n,t))},addAttribute:function(n,t,c,a){return e(function(e,n,t,c){return function(a){return new Promise((function(r,i){var s=function(n){return n.error?i(n.error):r(a(be(e)))};N(e).then((function(a){var r=Object(x.a)(a,2),o=r[0],l=r[1];return new X.a({address:o,provider:e,registry:B(parseInt(l))}).setAttribute(n,t,c).then((function(n){return w(e,n,s)})).catch((function(e){return i(e)}))}))}))}}(n,t,c,a))}}}))(zt),Zt=function(e){var n=e.tokens,t=e.chainId,r=e.balance,i=e.conversion,s=e.addCustomToken,o=Object(a.useState)(!1),l=Object(x.a)(o,2),d=l[0],u=l[1],b=Object(a.useState)(""),j=Object(x.a)(b,2),m=j[0],h=j[1],O=Object(a.useState)(!1),f=Object(x.a)(O,2),p=f[0],v=f[1],g=Object(a.useState)(null),y=Object(x.a)(g,2),N=y[0],w=y[1],D=Object(a.useContext)(kt),C=function(){u(!d),h("")};return Object(c.jsxs)(ct,{title:"Assets",className:"identity-balance",headerRight:Object(c.jsx)("button",{onClick:C,children:"Watch Asset"}),children:[r&&Object(c.jsx)(bt,{name:"Balance",className:"defaultBalance",balance:r,symbol:H(t),conversion:i||void 0}),null===n||void 0===n?void 0:n.map((function(e){return Object(c.jsx)(bt,{name:e.name||"Custom token: ".concat(le(e.address)),balance:e.balance,symbol:e.symbol,conversion:e.conversion},e.address)})),Object(c.jsx)(xt,{show:d,onClose:C,disabled:p,error:N,strings:{title:"Add Token",intro:"Add an ERC20 or ERC721 token to the dashboard",label:"Token to add:",placeholder:"contract address",submit:"Add Token"},onConfirm:function(){if(v(!0),w(null),!Object(Pt.isValidAddress)(m))return v(!1),w("Not a valid address!");s(null===D||void 0===D?void 0:D.provider,m).then((function(){v(!1),u(!1)})).catch((function(e){v(!1),w(e.message)}))}})]})},$t=function(e){var n=e.tokens,t=e.chainId,a=e.balance,r=e.conversion,i=e.addCustomToken;return Object(c.jsx)("div",{className:"content defi",children:Object(c.jsx)("div",{className:"container",children:Object(c.jsx)("div",{className:"column",children:Object(c.jsx)(Zt,{tokens:n,addCustomToken:i,chainId:t,balance:a,conversion:r})})})})},Qt=Object(d.b)((function(e){return{tokens:e.defi.tokens,chainId:e.identity.chainId,balance:e.defi.balance,conversion:e.defi.conversion}}),(function(e){return{addCustomToken:function(n,t,c,a){return e(Pe(n,t,c,a))}}}),(function(e,n,t){return Object(l.a)(Object(l.a)(Object(l.a)(Object(l.a)({},e),n),t),{},{addCustomToken:function(t,c){return n.addCustomToken(t,e.address,c,e.chainId)}})}))($t),Xt=function(e){var n=e.chainId,t=e.address,r=e.persona,i=e.modifyMultipleItems,s=e.logout,o=Object(a.useState)(Mn.DASHBOARD),l=Object(x.a)(o,2),d=l[0],u=l[1],b=Object(a.useContext)(kt),j=function(e){return u(e)};return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(Hn,{chainId:n||void 0,did:t&&n?oe(t,n):void 0,persona:r,hasDataVault:!!b.dvClient,updatePersona:function(e){return b.dvClient&&i(b.dvClient,e)}}),Object(c.jsx)(Gn,{selected:d,handleClick:j,showDataVault:!!b.dvClient,logout:function(){b.reset(),s()}}),d===Mn.DASHBOARD&&Object(c.jsx)(ht,{changeScreen:j}),d===Mn.DATAVAULT&&Object(c.jsx)(Lt,{}),d===Mn.IDENTITY&&Object(c.jsx)(qt,{}),d===Mn.DEFI&&Object(c.jsx)(Qt,{})]})},ec=function(e){var n={};return["DD_NAME","DD_EMAIL","DD_ADDRESS","DD_IDNUMBER","DD_PHONE","DD_BIRTHDATE"].forEach((function(t){n[t]=function(n){return e[n]&&e[n][0]?e[n]:[{id:"",content:""}]}(t)})),n},nc=Object(d.b)((function(e){return{address:e.identity.address,chainId:e.identity.chainId,persona:ec(e.datavault.declarativeDetails)}}),(function(e){return{modifyMultipleItems:function(n,t){return e(function(e,n){return function(t){var c=[];return Object.keys(n).map((function(a){return n[a].map((function(n){var r;""===n.id&&""!==n.content?r=function(){return t(tn(e,a,n.content))}:""!==n.id&&""!==n.content?r=function(){return t(an(e,a,n.content,n.id))}:""!==n.id&&""===n.content&&(r=function(){return t(cn(e,a,n.id))}),c.push(new Promise((function(e){e(r())})))}))})),Promise.all(c)}}(n,t))},logout:function(){return e(on())}}}))(Xt),tc=t.p+"static/media/powered-by-iov.a0397e40.svg",cc=t.p+"static/media/powered-by-iov-gray.e25db553.svg",ac=function(e){var n=e.isLoggedIn,t=e.version;return Object(c.jsxs)("footer",{className:"app-footer",children:[Object(c.jsx)("img",{src:n?cc:tc,alt:"Powered By IOV"}),Object(c.jsx)("p",{children:"Copyright \xa9 2020 IOV Labs. All rights reserved."}),Object(c.jsxs)("p",{children:["Version ",t]})]})},rc=function(){var e=Object(a.useContext)(kt),n=null===e||void 0===e?void 0:e.provider;return Object(c.jsxs)("div",{className:n?"app loggedin":"app login",children:[n?Object(c.jsx)(nc,{}):Object(c.jsx)(ln,{context:e}),Object(c.jsx)(ac,{isLoggedIn:n,version:o.a})]})},ic=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,749)).then((function(n){var t=n.getCLS,c=n.getFID,a=n.getFCP,r=n.getLCP,i=n.getTTFB;t(e),c(e),a(e),r(e),i(e)}))},sc=t(17),oc=t(82),lc=t(323),dc=[oc.a,Object(lc.createLogger)()],uc=Object(sc.c)({identity:Q,ethrdid:re,defi:Ce,datavault:en}),bc=function(e){return Object(sc.e)(uc,e,sc.a.apply(void 0,dc))};s.a.render(Object(c.jsx)(r.a.StrictMode,{children:Object(c.jsx)(d.a,{store:bc(),children:Object(c.jsx)(Et,{children:Object(c.jsx)(rc,{})})})}),document.getElementById("root")),ic()}},[[747,1,2]]]);
//# sourceMappingURL=main.54e2ec1c.chunk.js.map